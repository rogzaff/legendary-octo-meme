From: <Saved by Blink>
Snapshot-Content-Location: https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?showmsg=1
Subject: kernel/git/stable/linux.git - Linux kernel stable tree
Date: Sun, 2 Apr 2023 17:30:07 -0000
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----MultipartBoundary--2Ng0UIrejWON2hK2bTTeGrk0kOyFYgbVPrXihQP3nh----"


------MultipartBoundary--2Ng0UIrejWON2hK2bTTeGrk0kOyFYgbVPrXihQP3nh----
Content-Type: text/html
Content-ID: <frame-9A0D6AFDA2767ECE16294E40F3DFA588@mhtml.blink>
Content-Transfer-Encoding: binary
Content-Location: https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?showmsg=1

<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>kernel/git/stable/linux.git - Linux kernel stable tree</title>
<meta name="generator" content="cgit ">
<meta name="robots" content="noindex, nofollow">
<link rel="stylesheet" type="text/css" href="https://git.kernel.org/cgit-data/cgit.css">
<link rel="shortcut icon" href="https://git.kernel.org/favicon.ico">
<link rel="alternate" title="Atom feed" href="http://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/atom/?h=master" type="application/atom+xml">
<link rel="vcs-git" href="git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git" title="kernel/git/stable/linux.git Git repository">
<link rel="vcs-git" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git" title="kernel/git/stable/linux.git Git repository">
<link rel="vcs-git" href="https://kernel.googlesource.com/pub/scm/linux/kernel/git/stable/linux.git" title="kernel/git/stable/linux.git Git repository">
</head>
<body>
<div id="cgit"><table id="header">
<tbody><tr>
<td class="logo" rowspan="2"><a href="https://git.kernel.org/"><img src="https://git.kernel.org/cgit-data/cgit.png" alt="cgit logo"></a></td>
<td class="main"><a href="https://git.kernel.org/">index</a> : <a title="kernel/git/stable/linux.git" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/">kernel/git/stable/linux.git</a></td><td class="form"><form method="get">
<select name="h">
<option value="linux-2.6.11.y">linux-2.6.11.y</option>
<option value="linux-2.6.12.y">linux-2.6.12.y</option>
<option value="linux-2.6.13.y">linux-2.6.13.y</option>
<option value="linux-2.6.14.y">linux-2.6.14.y</option>
<option value="linux-2.6.15.y">linux-2.6.15.y</option>
<option value="linux-2.6.16.y">linux-2.6.16.y</option>
<option value="linux-2.6.17.y">linux-2.6.17.y</option>
<option value="linux-2.6.18.y">linux-2.6.18.y</option>
<option value="linux-2.6.19.y">linux-2.6.19.y</option>
<option value="linux-2.6.20.y">linux-2.6.20.y</option>
<option value="linux-2.6.21.y">linux-2.6.21.y</option>
<option value="linux-2.6.22.y">linux-2.6.22.y</option>
<option value="linux-2.6.23.y">linux-2.6.23.y</option>
<option value="linux-2.6.24.y">linux-2.6.24.y</option>
<option value="linux-2.6.25.y">linux-2.6.25.y</option>
<option value="linux-2.6.26.y">linux-2.6.26.y</option>
<option value="linux-2.6.27.y">linux-2.6.27.y</option>
<option value="linux-2.6.28.y">linux-2.6.28.y</option>
<option value="linux-2.6.29.y">linux-2.6.29.y</option>
<option value="linux-2.6.30.y">linux-2.6.30.y</option>
<option value="linux-2.6.31.y">linux-2.6.31.y</option>
<option value="linux-2.6.32.y">linux-2.6.32.y</option>
<option value="linux-2.6.33.y">linux-2.6.33.y</option>
<option value="linux-2.6.34.y">linux-2.6.34.y</option>
<option value="linux-2.6.35.y">linux-2.6.35.y</option>
<option value="linux-2.6.36.y">linux-2.6.36.y</option>
<option value="linux-2.6.37.y">linux-2.6.37.y</option>
<option value="linux-2.6.38.y">linux-2.6.38.y</option>
<option value="linux-2.6.39.y">linux-2.6.39.y</option>
<option value="linux-3.0.y">linux-3.0.y</option>
<option value="linux-3.1.y">linux-3.1.y</option>
<option value="linux-3.10.y">linux-3.10.y</option>
<option value="linux-3.11.y">linux-3.11.y</option>
<option value="linux-3.12.y">linux-3.12.y</option>
<option value="linux-3.13.y">linux-3.13.y</option>
<option value="linux-3.14.y">linux-3.14.y</option>
<option value="linux-3.15.y">linux-3.15.y</option>
<option value="linux-3.16.y">linux-3.16.y</option>
<option value="linux-3.17.y">linux-3.17.y</option>
<option value="linux-3.18.y">linux-3.18.y</option>
<option value="linux-3.19.y">linux-3.19.y</option>
<option value="linux-3.2.y">linux-3.2.y</option>
<option value="linux-3.3.y">linux-3.3.y</option>
<option value="linux-3.4.y">linux-3.4.y</option>
<option value="linux-3.5.y">linux-3.5.y</option>
<option value="linux-3.6.y">linux-3.6.y</option>
<option value="linux-3.7.y">linux-3.7.y</option>
<option value="linux-3.8.y">linux-3.8.y</option>
<option value="linux-3.9.y">linux-3.9.y</option>
<option value="linux-4.0.y">linux-4.0.y</option>
<option value="linux-4.1.y">linux-4.1.y</option>
<option value="linux-4.10.y">linux-4.10.y</option>
<option value="linux-4.11.y">linux-4.11.y</option>
<option value="linux-4.12.y">linux-4.12.y</option>
<option value="linux-4.13.y">linux-4.13.y</option>
<option value="linux-4.14.y">linux-4.14.y</option>
<option value="linux-4.15.y">linux-4.15.y</option>
<option value="linux-4.16.y">linux-4.16.y</option>
<option value="linux-4.17.y">linux-4.17.y</option>
<option value="linux-4.18.y">linux-4.18.y</option>
<option value="linux-4.19.y">linux-4.19.y</option>
<option value="linux-4.2.y">linux-4.2.y</option>
<option value="linux-4.20.y">linux-4.20.y</option>
<option value="linux-4.3.y">linux-4.3.y</option>
<option value="linux-4.4.y">linux-4.4.y</option>
<option value="linux-4.5.y">linux-4.5.y</option>
<option value="linux-4.6.y">linux-4.6.y</option>
<option value="linux-4.7.y">linux-4.7.y</option>
<option value="linux-4.8.y">linux-4.8.y</option>
<option value="linux-4.9.y">linux-4.9.y</option>
<option value="linux-5.0.y">linux-5.0.y</option>
<option value="linux-5.1.y">linux-5.1.y</option>
<option value="linux-5.10.y">linux-5.10.y</option>
<option value="linux-5.11.y">linux-5.11.y</option>
<option value="linux-5.12.y">linux-5.12.y</option>
<option value="linux-5.13.y">linux-5.13.y</option>
<option value="linux-5.14.y">linux-5.14.y</option>
<option value="linux-5.15.y">linux-5.15.y</option>
<option value="linux-5.16.y">linux-5.16.y</option>
<option value="linux-5.17.y">linux-5.17.y</option>
<option value="linux-5.18.y">linux-5.18.y</option>
<option value="linux-5.19.y">linux-5.19.y</option>
<option value="linux-5.2.y">linux-5.2.y</option>
<option value="linux-5.3.y">linux-5.3.y</option>
<option value="linux-5.4.y">linux-5.4.y</option>
<option value="linux-5.5.y">linux-5.5.y</option>
<option value="linux-5.6.y">linux-5.6.y</option>
<option value="linux-5.7.y">linux-5.7.y</option>
<option value="linux-5.8.y">linux-5.8.y</option>
<option value="linux-5.9.y">linux-5.9.y</option>
<option value="linux-6.0.y">linux-6.0.y</option>
<option value="linux-6.1.y">linux-6.1.y</option>
<option value="linux-6.2.y">linux-6.2.y</option>
<option value="linux-rolling-lts">linux-rolling-lts</option>
<option value="linux-rolling-stable">linux-rolling-stable</option>
<option value="master" selected="selected">master</option>
</select> <input type="submit" value="switch"></form></td></tr>
<tr><td class="sub">Linux kernel stable tree</td><td class="sub right">Stable Group</td></tr></tbody></table>
<table class="tabs"><tbody><tr><td>
<a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/about/">about</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/">summary</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/refs/">refs</a><a class="active" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?showmsg=1">log</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/">tree</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/">commit</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/diff/">diff</a><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/stats/">stats</a></td><td class="form"><form class="right" method="get" action="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/">
<select name="qt">
<option value="grep">log msg</option>
<option value="author">author</option>
<option value="committer">committer</option>
<option value="range">range</option>
</select>
<input class="txt" type="search" size="10" name="q" value="">
<input type="submit" value="search">
</form>
</td></tr></tbody></table>
<div class="content"><table class="list nowrap"><tbody><tr class="nohover"><th class="left">Age</th><th class="left">Commit message (<a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/">Collapse</a>)</th><th class="left">Author</th><th class="left">Files</th><th class="left">Lines</th></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-29 10:24:07 -0700">4 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ffe78bbd512166e0ef1cc4858010b128c510ed7d">Merge tag 'xtensa-20230327' of https://github.com/jcmvbkbc/linux-xtensa</a><span class="decoration"><a class="deco" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ffe78bbd512166e0ef1cc4858010b128c510ed7d">HEAD</a><a class="branch-deco" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?showmsg=1">master</a></span></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-6</span>/<span class="insertions">+12</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull xtensa fixes from Max Filippov:

 - fix KASAN report in show_stack

 - drop linux-xtensa mailing list from the MAINTAINERS file

* tag 'xtensa-20230327' of https://github.com/jcmvbkbc/linux-xtensa:
  MAINTAINERS: xtensa: drop linux-xtensa@linux-xtensa.org mailing list
  xtensa: fix KASAN report for show_stack


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-29 10:13:37 -0700">4 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3577a4d37f9e5caeb817e221482385151795ec6a">Merge tag 'f2fs-fix-6.3-rc5' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs

Pull f2fs fix from Jaegeuk Kim:
 "This fixes a tracepoint field size in f2fs in preparation for stricter
  rules for tracing fields"

* tag 'f2fs-fix-6.3-rc5' of git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs:
  f2fs: Fix f2fs_truncate_partial_nodes ftrace event


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-28 13:28:52 -0700">5 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fcd476ea6a888ef6e6627f4c21a2ea8cca3e9312">Merge tag 'urgent-rcu.2023.03.28a' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/paulmck/linux-rcu

Pull RCU fix from Paul McKenney:
 "This brings the rcu_torture_read event trace into line with the new
  trace tools by replacing this event trace's __field() with the
  corresponding __array().

  Without this, the new trace tools will fail when presented wtih an
  rcu_torture_read event trace, which is a regression from the viewpoint
  of trace tools users"

Link: https://lore.kernel.org/all/20230320133650.5388a05e@gandalf.local.home/

* tag 'urgent-rcu.2023.03.28a' of git://git.kernel.org/pub/scm/linux/kernel/git/paulmck/linux-rcu:
  rcu: Fix rcu_torture_read ftrace event


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-28 13:14:47 -0700">5 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=756c1a0593e7d26bd7dc6332e9490607cd106c4f">Merge tag 'linux-kselftest-fixes-6.3-rc5' of ↵</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-6</span>/<span class="insertions">+24</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/shuah/linux-kselftest

Pull Kselftest fixes from Shuah Khan:
 "One single fix for sigaltstack test -Wuninitialized warning found when
  building with clang"

* tag 'linux-kselftest-fixes-6.3-rc5' of git://git.kernel.org/pub/scm/linux/kernel/git/shuah/linux-kselftest:
  selftests: sigaltstack: fix -Wuninitialized


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-28 10:43:04 -0700">5 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=05c24161f4d2adc0deb6f3f0f55d25e12fbbdcde">Merge tag 's390-6.3-4' of ↵</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-9</span>/<span class="insertions">+6</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux

Pull s390 fixes from Vasily Gorbik:

 - Fix an error handling issue with PTRACE_GET_LAST_BREAK request so
   that -EFAULT is returned if put_user() fails, instead of ignoring it

 - Fix a build race for the modules_prepare target when
   CONFIG_EXPOLINE_EXTERN is enabled by reintroducing the dependence on
   scripts

 - Fix a memory leak in vfio_ap device driver

 - Add missing earlyclobber annotations to __clear_user() inline
   assembly to prevent incorrect register allocation

* tag 's390-6.3-4' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux:
  s390/ptrace: fix PTRACE_GET_LAST_BREAK error handling
  s390: reintroduce expoline dependence to scripts
  s390/vfio-ap: fix memory leak in vfio_ap device driver
  s390/uaccess: add missing earlyclobber annotations to __clear_user()


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 12:22:45 -0700">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3a93e40326c8f470e71d20b4c42d36767450f38f">Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-42</span>/<span class="insertions">+87</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull kvm fixes from Paolo Bonzini:
 "RISC-V:

   - Fix VM hang in case of timer delta being zero

 ARM:

   - MMU fixes:

      - Read the MMU notifier seq before dropping the mmap lock to guard
        against reading a potentially stale VMA

      - Disable interrupts when walking user page tables to protect
        against the page table being freed

      - Read the MTE permissions for the VMA within the mmap lock
        critical section, avoiding the use of a potentally stale VMA
        pointer

   - vPMU fixes:

      - Return the sum of the current perf event value and PMC snapshot
        for reads from userspace

      - Don't save the value of guest writes to PMCR_EL0.{C,P}, which
        could otherwise lead to userspace erroneously resetting the vPMU
        during VM save/restore"

* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm:
  riscv/kvm: Fix VM hang in case of timer delta being zero.
  KVM: arm64: Check for kvm_vma_mte_allowed in the critical section
  KVM: arm64: Disable interrupts while walking userspace PTs
  KVM: arm64: Retry fault if vma_lookup() results become invalid
  KVM: arm64: PMU: Don't save PMCR_EL0.{C,P} for the vCPU
  KVM: arm64: PMU: Fix GET_ONE_REG for vPMC regs to return the current value


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 09:45:39 -0700">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=91fe204578ba3183cc32984a613bd539b3670507">Merge tag 'platform-drivers-x86-v6.3-3' of ↵</a></td><td>Linus Torvalds</td><td>5</td><td><span class="deletions">-20</span>/<span class="insertions">+69</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/pdx86/platform-drivers-x86

Pull x86 platform driver fixes from Hans de Goede:

 -  Intel tpmi/vsec fixes

 -  think-lmi fixes

 -  two other small fixes / hw-id additions

* tag 'platform-drivers-x86-v6.3-3' of git://git.kernel.org/pub/scm/linux/kernel/git/pdx86/platform-drivers-x86:
  platform/surface: aggregator: Add missing fwnode_handle_put()
  platform/x86: think-lmi: Add possible_values for ThinkStation
  platform/x86: think-lmi: only display possible_values if available
  platform/x86: think-lmi: use correct possible_values delimiters
  platform/x86: think-lmi: add missing type attribute
  platform/x86 (gigabyte-wmi): Add support for A320M-S2H V2
  platform/x86/intel: tpmi: Revise the comment of intel_vsec_add_aux
  platform/x86/intel: tpmi: Fix double free in tpmi_create_device()
  platform/x86/intel: vsec: Fix a memory leak in intel_vsec_add_aux


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 09:41:17 -0700">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fc5d1a9233eef4a3656712994e5bfa0c0470ebfc">Merge tag 'mtd/fixes-for-6.3-rc5' of ↵</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-3</span>/<span class="insertions">+32</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux

Pull MTD fixes from Miquel Raynal:
 "Raw NAND controller driver fixes:

   - meson:
      - Invalidate cache on polling ECC bit
      - Initialize struct with zeroes

   - nandsim: Artificially prevent sequential page reads

  ECC engine driver fixes:

   - mxic-ecc: Fix mxic_ecc_data_xfer_wait_for_completion() when irq is
     used

  Binging fixes:

   - jedec,spi-nor: Document CPOL/CPHA support"

* tag 'mtd/fixes-for-6.3-rc5' of git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux:
  mtd: rawnand: meson: invalidate cache on polling ECC bit
  mtd: rawnand: nandsim: Artificially prevent sequential page reads
  dt-bindings: mtd: jedec,spi-nor: Document CPOL/CPHA support
  mtd: nand: mxic-ecc: Fix mxic_ecc_data_xfer_wait_for_completion() when irq is used
  mtd: rawnand: meson: initialize struct with zeroes


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 17:23:08 +0200">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f9bbf25e7b2b74b52b2f269216a92657774f239c">s390/ptrace: fix PTRACE_GET_LAST_BREAK error handling</a></td><td>Heiko Carstens</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Return -EFAULT if put_user() for the PTRACE_GET_LAST_BREAK
request fails, instead of silently ignoring it.

Reviewed-by: Sven Schnelle &lt;svens@linux.ibm.com&gt;
Signed-off-by: Heiko Carstens &lt;hca@linux.ibm.com&gt;
Signed-off-by: Vasily Gorbik &lt;gor@linux.ibm.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 17:23:08 +0200">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7bb2107e63d8a4a13bbb6fe0e1cbd68784a2e9ac">s390: reintroduce expoline dependence to scripts</a></td><td>Jiri Slaby (SUSE)</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Expolines depend on scripts/basic/fixdep. And build of expolines can now
race with the fixdep build:

 make[1]: *** Deleting file 'arch/s390/lib/expoline/expoline.o'
 /bin/sh: line 1: scripts/basic/fixdep: Permission denied
 make[1]: *** [../scripts/Makefile.build:385: arch/s390/lib/expoline/expoline.o] Error 126
 make: *** [../arch/s390/Makefile:166: expoline_prepare] Error 2

The dependence was removed in the below Fixes: commit. So reintroduce
the dependence on scripts.

Fixes: a0b0987a7811 ("s390/nospec: remove unneeded header includes")
Cc: Joe Lawrence &lt;joe.lawrence@redhat.com&gt;
Cc: stable@vger.kernel.org
Cc: Heiko Carstens &lt;hca@linux.ibm.com&gt;
Cc: Vasily Gorbik &lt;gor@linux.ibm.com&gt;
Cc: Alexander Gordeev &lt;agordeev@linux.ibm.com&gt;
Cc: Christian Borntraeger &lt;borntraeger@linux.ibm.com&gt;
Cc: Sven Schnelle &lt;svens@linux.ibm.com&gt;
Cc: linux-s390@vger.kernel.org
Signed-off-by: Jiri Slaby (SUSE) &lt;jirislaby@kernel.org&gt;
Link: https://lore.kernel.org/r/20230316112809.7903-1-jirislaby@kernel.org
Signed-off-by: Vasily Gorbik &lt;gor@linux.ibm.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 17:23:08 +0200">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f8cf767589f2131ae5d40f3758429095c701c84">s390/vfio-ap: fix memory leak in vfio_ap device driver</a></td><td>Tony Krowiak</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The device release callback function invoked to release the matrix device
uses the dev_get_drvdata(device *dev) function to retrieve the
pointer to the vfio_matrix_dev object in order to free its storage. The
problem is, this object is not stored as drvdata with the device; since the
kfree function will accept a NULL pointer, the memory for the
vfio_matrix_dev object is never freed.

Since the device being released is contained within the vfio_matrix_dev
object, the container_of macro will be used to retrieve its pointer.

Fixes: 1fde573413b5 ("s390: vfio-ap: base implementation of VFIO AP device driver")
Signed-off-by: Tony Krowiak &lt;akrowiak@linux.ibm.com&gt;
Reviewed-by: Harald Freudenberger &lt;freude@linux.ibm.com&gt;
Link: https://lore.kernel.org/r/20230320150447.34557-1-akrowiak@linux.ibm.com
Signed-off-by: Heiko Carstens &lt;hca@linux.ibm.com&gt;
Signed-off-by: Vasily Gorbik &lt;gor@linux.ibm.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 17:23:08 +0200">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=89aba4c26fae4e459f755a18912845c348ee48f3">s390/uaccess: add missing earlyclobber annotations to __clear_user()</a></td><td>Heiko Carstens</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Add missing earlyclobber annotation to size, to, and tmp2 operands of the
__clear_user() inline assembly since they are modified or written to before
the last usage of all input operands. This can lead to incorrect register
allocation for the inline assembly.

Fixes: 6c2a9e6df604 ("[S390] Use alternative user-copy operations for new hardware.")
Reported-by: Mark Rutland &lt;mark.rutland@arm.com&gt;
Link: https://lore.kernel.org/all/20230321122514.1743889-3-mark.rutland@arm.com/
Cc: stable@vger.kernel.org
Reviewed-by: Gerald Schaefer &lt;gerald.schaefer@linux.ibm.com&gt;
Signed-off-by: Heiko Carstens &lt;hca@linux.ibm.com&gt;
Signed-off-by: Vasily Gorbik &lt;gor@linux.ibm.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 10:04:07 -0400">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9e347ba03029e10e6405f8c3a7a91a5597943ed9">Merge tag 'kvm-riscv-fixes-6.3-1' of https://github.com/kvm-riscv/linux into ↵</a></td><td>Paolo Bonzini</td><td>1</td><td><span class="deletions">-4</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
HEAD

KVM/riscv fixes for 6.3, take #1

- Fix VM hang in case of timer delta being zero


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-27 10:03:16 -0400">6 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8607daa2145f277c2548eee22e9fa45dfecd8dea">Merge tag 'kvmarm-fixes-6.3-2' of ↵</a></td><td>Paolo Bonzini</td><td>3</td><td><span class="deletions">-38</span>/<span class="insertions">+85</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/kvmarm/kvmarm into HEAD

KVM/arm64 fixes for 6.3, part #2

Fixes for a rather interesting set of bugs relating to the MMU:

 - Read the MMU notifier seq before dropping the mmap lock to guard
   against reading a potentially stale VMA

 - Disable interrupts when walking user page tables to protect against
   the page table being freed

 - Read the MTE permissions for the VMA within the mmap lock critical
   section, avoiding the use of a potentally stale VMA pointer

Additionally, some fixes targeting the vPMU:

 - Return the sum of the current perf event value and PMC snapshot for
   reads from userspace

 - Don't save the value of guest writes to PMCR_EL0.{C,P}, which could
   otherwise lead to userspace erroneously resetting the vPMU during VM
   save/restore


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 14:40:20 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=197b6b60ae7bc51dd0814953c562833143b292aa">Linux 6.3-rc4</a><span class="decoration"><a class="tag-annotated-deco" href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tag/?h=v6.3-rc4">v6.3-rc4</a></span></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 10:22:44 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0ec57cfa721fbd36b4c4c0d9ccc5d78a78f7fa35">Merge tag 'usb-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>31</td><td><span class="deletions">-130</span>/<span class="insertions">+625</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/usb

Pull USB / Thunderbolt driver fixes from Greg KH:
 "Here are a small set of USB and Thunderbolt driver fixes for reported
  problems and a documentation update, for 6.3-rc4.

  Included in here are:

   - documentation update for uvc gadget driver

   - small thunderbolt driver fixes

   - cdns3 driver fixes

   - dwc3 driver fixes

   - dwc2 driver fixes

   - chipidea driver fixes

   - typec driver fixes

   - onboard_usb_hub device id updates

   - quirk updates

  All of these have been in linux-next with no reported problems"

* tag 'usb-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/gregkh/usb: (30 commits)
  usb: dwc2: fix a race, don't power off/on phy for dual-role mode
  usb: dwc2: fix a devres leak in hw_enable upon suspend resume
  usb: chipidea: core: fix possible concurrent when switch role
  usb: chipdea: core: fix return -EINVAL if request role is the same with current role
  thunderbolt: Rename shadowed variables bit to interrupt_bit and auto_clear_bit
  thunderbolt: Disable interrupt auto clear for rings
  thunderbolt: Use const qualifier for `ring_interrupt_index`
  usb: gadget: Use correct endianness of the wLength field for WebUSB
  uas: Add US_FL_NO_REPORT_OPCODES for JMicron JMS583Gen 2
  usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver
  usb: cdns3: Fix issue with using incorrect PCI device function
  usb: cdnsp: Fixes issue with redundant Status Stage
  MAINTAINERS: make me a reviewer of USB/IP
  thunderbolt: Use scale field when allocating USB3 bandwidth
  thunderbolt: Limit USB3 bandwidth of certain Intel USB4 host routers
  thunderbolt: Call tb_check_quirks() after initializing adapters
  thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access
  thunderbolt: Fix memory leak in margining
  usb: dwc2: drd: fix inconsistent mode if role-switch-default-mode="host"
  docs: usb: Add documentation for the UVC Gadget
  ...


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 09:18:30 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=18940c888c85fd7527375343bd4fcc94a540c69c">Merge tag 'sched_urgent_for_v6.3_rc4' of ↵</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-11</span>/<span class="insertions">+47</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip

Pull scheduler fix from Borislav Petkov:

 - Fix a corner case where vruntime of a task is not being sanitized

* tag 'sched_urgent_for_v6.3_rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:
  sched/fair: Sanitize vruntime of entity being migrated


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 09:13:35 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=974fc94336df81137b3b3502e73f89282a743607">Merge tag 'perf_urgent_for_v6.3_rc4' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip

Pull perf fix from Borislav Petkov:

 - Properly clear perf event status tracking in the AMD perf event
   overflow handler

* tag 'perf_urgent_for_v6.3_rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:
  perf/x86/amd/core: Always clear status for idx


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 09:06:20 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f6cdaeb08b66db0d06b1b70c0801a00b6f30571c">Merge tag 'core_urgent_for_v6.3_rc4' of ↵</a></td><td>Linus Torvalds</td><td>3</td><td><span class="deletions">-2</span>/<span class="insertions">+6</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip

Pull core fixes from Borislav Petkov:

 - Do the delayed RCU wakeup for kthreads in the proper order so that
   former doesn't get ignored

 - A noinstr warning fix

* tag 'core_urgent_for_v6.3_rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:
  entry/rcu: Check TIF_RESCHED _after_ delayed RCU wake-up
  entry: Fix noinstr warning in __enter_from_user_mode()


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 09:01:24 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=986c63741da243c68e1faa97064a1bb216e8d7c0">Merge tag 'x86_urgent_for_v6.3_rc4' of ↵</a></td><td>Linus Torvalds</td><td>3</td><td><span class="deletions">-19</span>/<span class="insertions">+126</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip

Pull x86 fixes from Borislav Petkov:

 - Add a AMX ptrace self test

 - Prevent a false-positive warning when retrieving the (invalid)
   address of dynamic FPU features in their init state which are not
   saved in init_fpstate at all

 - Randomize per-CPU entry areas only when KASLR is enabled

* tag 'x86_urgent_for_v6.3_rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:
  selftests/x86/amx: Add a ptrace test
  x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()
  x86/mm: Do not shuffle CPU entry areas without KASLR


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-26 08:56:09 -0700">7 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6485ac65af2b204e5150576d800c92d968c065b0">Merge tag 'smb3-client-fixes-6.3-rc3' of git://git.samba.org/sfrench/cifs-2.6</a></td><td>Linus Torvalds</td><td>15</td><td><span class="deletions">-92</span>/<span class="insertions">+221</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull cifs client fixes from Steve French:
 "Twelve cifs/smb3 client fixes (most also for stable)

   - forced umount fix

   - fix for two perf regressions

   - reconnect fixes

   - small debugging improvements

   - multichannel fixes"

* tag 'smb3-client-fixes-6.3-rc3' of git://git.samba.org/sfrench/cifs-2.6:
  smb3: fix unusable share after force unmount failure
  cifs: fix dentry lookups in directory handle cache
  smb3: lower default deferred close timeout to address perf regression
  cifs: fix missing unload_nls() in smb2_reconnect()
  cifs: avoid race conditions with parallel reconnects
  cifs: append path to open_enter trace event
  cifs: print session id while listing open files
  cifs: dump pending mids for all channels in DebugData
  cifs: empty interface list when server doesn't support query interfaces
  cifs: do not poll server interfaces too regularly
  cifs: lock chan_lock outside match_session
  cifs: check only tcon status on tcon related functions


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-25 13:32:43 -0700">8 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=da8e7da11e4ba758caf4c149cc8d8cd555aefe5f">Merge tag 'nfsd-6.3-4' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux

Pull nfsd fix from Chuck Lever:

 - Fix a crash when using NFS with krb5p

* tag 'nfsd-6.3-4' of git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux:
  SUNRPC: Fix a crash in gss_krb5_checksum()


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-25 13:12:36 -0700">8 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5b9ff397a26aeb94180e0d459fda9731c3c617ba">Merge tag 'xfs-6.3-fixes-7' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-5</span>/<span class="insertions">+10</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull yet more xfs bug fixes from Darrick Wong:
 "The first bugfix addresses a longstanding problem where we use the
  wrong file mapping cursors when trying to compute the speculative
  preallocation quantity. This has been causing sporadic crashes when
  alwayscow mode is engaged.

  The other two fixes correct minor problems in more recent changes.

   - Fix the new allocator tracepoints because git am mismerged the
     changes such that the trace_XXX got rebased to be in function YYY
     instead of XXX

   - Ensure that the perag AGFL_RESET state is consistent with whatever
     we've just read off the disk

   - Fix a bug where we used the wrong iext cursor during a write begin"

* tag 'xfs-6.3-fixes-7' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux:
  xfs: fix mismerged tracepoints
  xfs: clear incore AGFL_RESET state if it's not needed
  xfs: pass the correct cursor to xfs_iomap_prealloc_size


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-25 12:57:34 -0700">8 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f768b35a2371ccf85255f608444d234062a1b5c9">Merge tag 'xfs-6.3-fixes-4' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux</a></td><td>Linus Torvalds</td><td>6</td><td><span class="deletions">-34</span>/<span class="insertions">+77</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull xfs percpu counter fixes from Darrick Wong:
 "We discovered a filesystem summary counter corruption problem that was
  traced to cpu hot-remove racing with the call to percpu_counter_sum
  that sets the free block count in the superblock when writing it to
  disk. The root cause is that percpu_counter_sum doesn't cull from
  dying cpus and hence misses those counter values if the cpu shutdown
  hooks have not yet run to merge the values.

  I'm hoping this is a fairly painless fix to the problem, since the
  dying cpu mask should generally be empty. It's been in for-next for a
  week without any complaints from the bots.

   - Fix a race in the percpu counters summation code where the
     summation failed to add in the values for any CPUs that were dying
     but not yet dead. This fixes some minor discrepancies and incorrect
     assertions when running generic/650"

* tag 'xfs-6.3-fixes-4' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux:
  pcpcntr: remove percpu_counter_sum_all()
  fork: remove use of percpu_counter_sum_all
  pcpcntrs: fix dying cpu summation race
  cpumask: introduce for_each_cpu_or


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-25 12:51:25 -0700">8 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d704426300f2e95275267a387ffc3b8e5f4ae8b7">Merge tag 'xfs-6.3-fixes-3' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux</a></td><td>Linus Torvalds</td><td>6</td><td><span class="deletions">-1</span>/<span class="insertions">+722</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull xfs fixes from Darrick Wong:
 "This batch started with some debugging enhancements to the new
  allocator refactoring that we put in 6.3-rc1 to assist developers in
  rebasing their dev branches.

  As for more serious code changes -- there's a bug fix to make the
  lockless allocator scan the whole filesystem before resorting to the
  locking allocator. We're also adding a selftest for the venerable
  directory/xattr hash function to make sure that it produces consistent
  results so that we can address any fallout as soon as possible.

   - Add a few debugging assertions so that people (me) trying to port
     code to the new allocator functions don't mess up the caller
     requirements

   - Relax some overly cautious lock ordering enforcement in the new
     allocator code, which means that file allocations will locklessly
     scan for the best space they can get before backing off to the
     traditional lock-and-really-get-it behavior

   - Add tracepoints to make it easier to trace the xfs allocator
     behavior

   - Actually test the dir/xattr hash algorithm to make sure it produces
     consistent results across all the platforms XFS supports"

* tag 'xfs-6.3-fixes-3' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux:
  xfs: test dir/attr hash when loading module
  xfs: add tracepoints for each of the externally visible allocators
  xfs: walk all AGs if TRYLOCK passed to xfs_alloc_vextent_iterate_ags
  xfs: try to idiot-proof the allocators


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-25 10:27:27 -0700">8 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bdec23f971b1a5caf7a18ae117e44bdfaf26c93">Merge tag 'hwmon-for-v6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-11</span>/<span class="insertions">+22</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/groeck/linux-staging

Pull hwmon fixes from Guenter Roeck:

 - it87: Fix voltage scaling for chips with 10.9mV ADCs

 - xgene: Fix ioremap and memremap leak

 - peci/cputemp: Fix miscalculated DTS temperature for SKX

 - hwmon core: fix potential sensor registration failure with thermal
   subsystem if of_node is missing

* tag 'hwmon-for-v6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/groeck/linux-staging:
  hwmon (it87): Fix voltage scaling for chips with 10.9mV  ADCs
  hwmon: (xgene) Fix ioremap and memremap leak
  hwmon: fix potential sensor registration fail if of_node is missing
  hwmon: (peci/cputemp) Fix miscalculated DTS for SKX


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 18:06:11 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=65aca32efdcb0965502d3db2f1fa33838c070952">Merge tag 'mm-hotfixes-stable-2023-03-24-17-09' of ↵</a></td><td>Linus Torvalds</td><td>19</td><td><span class="deletions">-53</span>/<span class="insertions">+140</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/akpm/mm

Pull misc fixes from Andrew Morton:
 "21 hotfixes, 8 of which are cc:stable. 11 are for MM, the remainder
  are for other subsystems"

* tag 'mm-hotfixes-stable-2023-03-24-17-09' of git://git.kernel.org/pub/scm/linux/kernel/git/akpm/mm: (21 commits)
  mm: mmap: remove newline at the end of the trace
  mailmap: add entries for Richard Leitner
  kcsan: avoid passing -g for test
  kfence: avoid passing -g for test
  mm: kfence: fix using kfence_metadata without initialization in show_object()
  lib: dhry: fix unstable smp_processor_id(_) usage
  mailmap: add entry for Enric Balletbo i Serra
  mailmap: map Sai Prakash Ranjan's old address to his current one
  mailmap: map Rajendra Nayak's old address to his current one
  Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"
  mailmap: add entry for Tobias Klauser
  kasan, powerpc: don't rename memintrinsics if compiler adds prefixes
  mm/ksm: fix race with VMA iteration and mm_struct teardown
  kselftest: vm: fix unused variable warning
  mm: fix error handling for map_deny_write_exec
  mm: deduplicate error handling for map_deny_write_exec
  checksyscalls: ignore fstat to silence build warning on LoongArch
  nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()
  test_maple_tree: add more testing for mas_empty_area()
  maple_tree: fix mas_skip_node() end slot detection
  ...


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 17:59:00 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=90c8ce31dbe93f277fc1157e34740e841094c254">Merge tag '6.3-rc3-ksmbd-smb3-server-fixes' of git://git.samba.org/ksmbd</a></td><td>Linus Torvalds</td><td>8</td><td><span class="deletions">-55</span>/<span class="insertions">+78</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull ksmbd server fixes from Steve French:

 - return less confusing messages on unsupported dialects
   (STATUS_NOT_SUPPORTED instead of I/O error)

 - fix for overly frequent inactive session termination

 - fix refcount leak

 - fix bounds check problems found by static checkers

 - fix to advertise named stream support correctly

 - Fix AES256 signing bug when connected to from MacOS

* tag '6.3-rc3-ksmbd-smb3-server-fixes' of git://git.samba.org/ksmbd:
  ksmbd: return unsupported error on smb1 mount
  ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect
  ksmbd: don't terminate inactive sessions after a few seconds
  ksmbd: fix possible refcount leak in smb2_open()
  ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES
  ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA
  ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION
  ksmbd: fix wrong signingkey creation when encryption is AES256


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 15:38:13 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e76db6e50c85cce9e68c47076f8eab06189fe4db">Merge tag 'arm-fixes-6.3-2' of ↵</a></td><td>Linus Torvalds</td><td>39</td><td><span class="deletions">-145</span>/<span class="insertions">+212</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/soc/soc

Pull ARM SoC fixes from Arnd Bergmann:
 "As usual, most of the bug fixes address issues in the devicetree
  files, and out of these, most are for the Qualcomm and NXP platforms,
  including:

   - A missing 'reserved-memory' property on LG G Watch R that is needed
     to prevent clashing with firmware

   - Annotations for cache coherency on multiple machines

   - Corrections for pinctrl, regulator, clock, iommu and power domain
     properties for i.MX and Qualcomm to correctly reflect the hardware
     settings

   - Firmware file names on multiple machines SA8540P Ride board

   - An incompatible change to the qcom vadc driver requires adding
     individual labels

   - Fix EQoS PHY reset GPIO by dropping the deprecated/wrong property
     and switch to the new bindings.

   - A fix for PCI bus address translation Tegra194 and Tegra234.

  There are also a couple of device driver fixes, addressing:

   - A race condition in the amdtee driver

   - A performance regression in the Qualcomm 'llcc' driver

   - An unitialized variable use NXP i.MX 'weim' driver

   - Error handling issues in Qualcomm 'rmtfs', and 'scm' drivers and
     the Arm scmi firmware driver"

* tag 'arm-fixes-6.3-2' of git://git.kernel.org/pub/scm/linux/kernel/git/soc/soc: (48 commits)
  arm64: dts: qcom: sc8280xp-x13s: mark bob regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s12b regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s10b regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on
  arm64: dts: imx93: add missing #address-cells and #size-cells to i2c nodes
  bus: imx-weim: fix branch condition evaluates to a garbage value
  arm64: dts: imx8mn: specify #sound-dai-cells for SAI nodes
  ARM: dts: imx6sl: tolino-shine2hd: fix usbotg1 pinctrl
  ARM: dts: imx6sll: e60k02: fix usbotg1 pinctrl
  ARM: dts: imx6sll: e70k02: fix usbotg1 pinctrl
  arm64: dts: imx93: Fix eqos properties
  arm64: dts: imx8mp: Fix LCDIF2 node clock order
  arm64: dts: imx8mm-nitrogen-r2: fix WM8960 clock name
  arm64: dts: imx8dxl-evk: Fix eqos phy reset gpio
  firmware: qcom: scm: fix bogus irq error at probe
  arm64: dts: qcom: sm8550: Mark UFS controller as cache coherent
  arm64: dts: qcom: sa8540p-ride: correct name of remoteproc_nsp0 firmware
  arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent
  arm64: dts: qcom: sm8350: Mark UFS controller as cache coherent
  arm64: dts: qcom: sm8550: fix LPASS pinctrl slew base address
  ...


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 15:32:01 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7b5c942f0752894a91a925c7249116333d4ab25">Merge tag 'for-v6.3-rc' of ↵</a></td><td>Linus Torvalds</td><td>5</td><td><span class="deletions">-5</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/sre/linux-power-supply

Pull power supply fixes from Sebastian Reichel:

 - rk817: Fix compiler warning

 - cros_usbpd-charger: Fix excessive error printing

 - axp288_fuel_gauge: handle platform_get_irq error

 - bq24190 and da9150: Fix race condition in remove path

* tag 'for-v6.3-rc' of git://git.kernel.org/pub/scm/linux/kernel/git/sre/linux-power-supply:
  power: supply: da9150: Fix use after free bug in da9150_charger_remove due to race condition
  power: supply: bq24190: Fix use after free bug in bq24190_remove due to race condition
  power: supply: axp288_fuel_gauge: Added check for negative values
  power: supply: cros_usbpd: reclassify "default case!" as debug
  power: supply: rk817: Fix unsigned comparison with less than zero


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 15:21:24 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=37154c19dd79966009befdcf2b499099e3cbbe9c">Merge tag 'drm-fixes-2023-03-24' of git://anongit.freedesktop.org/drm/drm</a></td><td>Linus Torvalds</td><td>27</td><td><span class="deletions">-123</span>/<span class="insertions">+180</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull drm fixes from Daniel Vetter:

 - usual pile of fixes for amdgpu &amp; i915

 - probe error handling fixes for meson, lt8912b bridge

 - the host1x patch from Arnd

 - panel-orientation fix for Lenovo Book X90F

* tag 'drm-fixes-2023-03-24' of git://anongit.freedesktop.org/drm/drm: (23 commits)
  gpu: host1x: fix uninitialized variable use
  drm/amd/display: Set dcn32 caps.seamless_odm
  drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk
  drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi
  drm/amd/display: remove outdated 8bpc comments
  drm/amdgpu/gfx: set cg flags to enter/exit safe mode
  drm/amdgpu: Force signal hw_fences that are embedded in non-sched jobs
  drm/amdgpu: add mes resume when do gfx post soft reset
  drm/amdgpu: skip ASIC reset for APUs when go to S4
  drm/amdgpu: reposition the gpu reset checking for reuse
  drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found
  drm/meson: fix missing component unbind on bind errors
  drm: panel-orientation-quirks: Add quirk for Lenovo Yoga Book X90F
  Revert "drm/i915/hwmon: Enable PL1 power limit"
  drm/i915: Update vblank timestamping stuff on seamless M/N change
  drm/i915: Fix format for perf_limit_reasons
  drm/i915/gt: perform uc late init after probe error injection
  drm/i915/active: Fix missing debug object activation
  drm/i915/guc: Fix missing ecodes
  drm/i915/mtl: Disable MC6 for MTL A step
  ...


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:20:48 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5ad4fe9613cb8c202150f5cce5347fc8926c6c01">Merge tag 'for-6.3/dm-fixes' of ↵</a></td><td>Linus Torvalds</td><td>5</td><td><span class="deletions">-9</span>/<span class="insertions">+22</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/device-mapper/linux-dm

Pull device mapper fixes from Mike Snitzer:

 - Fix DM thin to work as a swap device by using 'limit_swap_bios' DM
   target flag (initially added to allow swap to dm-crypt) to throttle
   the amount of outstanding swap bios.

 - Fix DM crypt soft lockup warnings by calling cond_resched() from the
   cpu intensive loop in dmcrypt_write().

 - Fix DM crypt to not access an uninitialized tasklet. This fix allows
   for consistent handling of IO completion, by _not_ needlessly punting
   to a workqueue when tasklets are not needed.

 - Fix DM core's alloc_dev() initialization for DM stats to check for
   and propagate alloc_percpu() failure.

* tag 'for-6.3/dm-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/device-mapper/linux-dm:
  dm stats: check for and propagate alloc_percpu failure
  dm crypt: avoid accessing uninitialized tasklet
  dm crypt: add cond_resched() to dmcrypt_write()
  dm thin: fix deadlock when swapping to thin device


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:10:39 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=83511470af1a734ec47c37957612d2eecf1a2352">Merge tag 'block-6.3-2023-03-24' of git://git.kernel.dk/linux</a></td><td>Linus Torvalds</td><td>6</td><td><span class="deletions">-32</span>/<span class="insertions">+45</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull block fixes from Jens Axboe:

 - NVMe pull request via Christoph:
     - Send Identify with CNS 06h only to I/O controllers (Martin
       George)
     - Fix nvme_tcp_term_pdu to match spec (Caleb Sander)

 - Pass in issue_flags for uring_cmd, so the end_io handlers don't need
   to assume what the right context is (me)

 - Fix for ublk, marking it as LIVE before adding it to avoid races on
   the initial IO (Ming)

* tag 'block-6.3-2023-03-24' of git://git.kernel.dk/linux:
  nvme-tcp: fix nvme_tcp_term_pdu to match spec
  nvme: send Identify with CNS 06h only to I/O controllers
  block/io_uring: pass in issue_flags for uring_cmd task_work handling
  block: ublk_drv: mark device as LIVE before adding disk


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:01:01 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e344eb7be2a25c66a8bac5d4388f1a4583450a72">Merge tag 'io_uring-6.3-2023-03-24' of git://git.kernel.dk/linux</a></td><td>Linus Torvalds</td><td>3</td><td><span class="deletions">-9</span>/<span class="insertions">+20</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull io_uring fixes from Jens Axboe:

 - Fix an issue with repeated -ECONNREFUSED on a socket (me)

 - Fix a NULL pointer deference due to a stale lookup cache for
   allocating direct descriptors (Savino)

* tag 'io_uring-6.3-2023-03-24' of git://git.kernel.dk/linux:
  io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()
  io_uring/net: avoid sending -ECONNABORTED on repeated connection requests


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 13:45:58 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fd3d06ff5f4fa23f32bdb7f4d9f308503801d9e0">Merge tag 'thermal-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>6</td><td><span class="deletions">-26</span>/<span class="insertions">+183</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm

Pull thermal control fixes from Rafael Wysocki:
 "These address two recent regressions related to thermal control.

  Specifics:

   - Restore the thermal core behavior regarding zero-temperature trip
     points to avoid a driver regression (Ido Schimmel)

   - Fix a recent regression in the ACPI processor driver preventing it
     from changing the number of CPU cooling device states exposed via
     sysfs after the given CPU cooling device has been registered
     (Rafael Wysocki)"

* tag 'thermal-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm:
  thermal: core: Restore behavior regarding invalid trip points
  ACPI: processor: thermal: Update CPU cooling devices on cpufreq policy changes
  thermal: core: Introduce thermal_cooling_device_update()
  thermal: core: Introduce thermal_cooling_device_present()
  ACPI: processor: Reorder acpi_processor_driver_init()


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 13:29:44 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1868d192d8f504f88e61a8e83164fce6e6b7190c">Merge tag 'acpi-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-0</span>/<span class="insertions">+15</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm

Pull ACPI fixes from Rafael Wysocki:
 "These add new ACPI IRQ override and backlight detection quirks.

  Specifics:

   - Add backlight=native DMI quirk for Acer Aspire 3830TG to the ACPI
     backlight driver (Hans de Goede)

   - Add an ACPI IRQ override quirk for Medion S17413 (Aymeric Wibo)"

* tag 'acpi-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm:
  ACPI: resource: Add Medion S17413 to IRQ override quirk
  ACPI: video: Add backlight=native DMI quirk for Acer Aspire 3830TG


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 13:16:01 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4dfb02d5cae80289384c4d3c6ddfbd92d30aced9">xfs: fix mismerged tracepoints</a></td><td>Darrick J. Wong</td><td>1</td><td><span class="deletions">-4</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
At some point in between sending this patch to the list and merging it
into for-next, the tracepoints got all mixed up because I've
over-reliant on automated tools not sucking.  The end result is that the
tracepoints are all wrong, so fix them.

Signed-off-by: Darrick J. Wong &lt;djwong@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:37:12 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=491eafce1a51c457701351a4bf40733799745314">smb3: fix unusable share after force unmount failure</a></td><td>Steve French</td><td>4</td><td><span class="deletions">-13</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
If user does forced unmount ("umount -f") while files are still open
on the share (as was seen in a Kubernetes example running on SMB3.1.1
mount) then we were marking the share as "TID_EXITING" in umount_begin()
which caused all subsequent operations (except write) to fail ... but
unfortunately when umount_begin() is called we do not know yet that
there are open files or active references on the share that would prevent
unmount from succeeding.  Kubernetes had example when they were doing
umount -f when files were open which caused the share to become
unusable until the files were closed (and the umount retried).

Fix this so that TID_EXITING is not set until we are about to send
the tree disconnect (not at the beginning of forced umounts in
umount_begin) so that if "umount -f" fails (due to open files or
references) the mount is still usable.

Cc: stable@vger.kernel.org
Reviewed-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:37:12 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be4fde79812f02914e350bde0bc4cfeae8429378">cifs: fix dentry lookups in directory handle cache</a></td><td>Paulo Alcantara</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+34</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Get rid of any prefix paths in @path before lookup_positive_unlocked()
as it will call -&gt;lookup() which already adds those prefix paths
through build_path_from_dentry().

This has caused a performance regression when mounting shares with a
prefix path where readdir(2) would end up retrying several times to
open bad directory names that contained duplicate prefix paths.

Fix this by skipping any prefix paths in @path before calling
lookup_positive_unlocked().

Fixes: e4029e072673 ("cifs: find and use the dentry for cached non-root directories also")
Cc: stable@vger.kernel.org # 6.1+
Signed-off-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:37:12 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7e0e76d99079be13c9961dde7c93b2d1ee665af4">smb3: lower default deferred close timeout to address perf regression</a></td><td>Steve French</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Performance tests with large number of threads noted that the change
of the default closetimeo (deferred close timeout between when
close is done by application and when client has to send the close
to the server), to 5 seconds from 1 second, significantly degraded
perf in some cases like this (in the filebench example reported,
the stats show close requests on the wire taking twice as long,
and 50% regression in filebench perf). This is stil configurable
via mount parm closetimeo, but to be safe, decrease default back
to its previous value of 1 second.

Reported-by: Yin Fengwei &lt;fengwei.yin@intel.com&gt;
Reported-by: kernel test robot &lt;yujie.liu@intel.com&gt;
Link: https://lore.kernel.org/lkml/997614df-10d4-af53-9571-edec36b0e2f3@intel.com/
Fixes: 5efdd9122eff ("smb3: allow deferred close timeout to be configurable")
Cc: stable@vger.kernel.org # 6.0+
Tested-by: Yin Fengwei &lt;fengwei.yin@intel.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Reviewed-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 14:37:05 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c24bb1a87dc3f2d77d410eaac2c6a295961bf50e">cifs: fix missing unload_nls() in smb2_reconnect()</a></td><td>Paulo Alcantara</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Make sure to unload_nls() @nls_codepage if we no longer need it.

Fixes: bc962159e8e3 ("cifs: avoid race conditions with parallel reconnects")
Signed-off-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:12:14 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cb7f5b41f8341148050fe63e27cf52aa4f1519ad">Merge tag 'slab-fix-for-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/vbabka/slab

Pull slab fix from Vlastimil Babka:
 "A single build fix for a corner case configuration that is apparently
  possible to achieve on some arches, from Geert"

* tag 'slab-fix-for-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/vbabka/slab:
  mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:07:38 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=877c20b1042535d79f9806095b03fdb082095532">Merge tag 'efi-fixes-for-v6.3-1' of ↵</a></td><td>Linus Torvalds</td><td>19</td><td><span class="deletions">-40</span>/<span class="insertions">+147</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/efi/efi

Pull EFI fixes from Ard Biesheuvel:

 - Set the NX compat flag for arm64 and zboot, to ensure compatibility
   with EFI firmware that complies with tightening requirements imposed
   across the ecosystem.

 - Improve identification of Ampere Altra systems based on SMBIOS data.

 - Fix some issues related to the EFI framebuffer that were introduced
   as a result from some refactoring related to zboot and the merge with
   sysfb.

 - Makefile tweak to avoid rebuilding vmlinuz unnecessarily.

 - Fix efi_random_alloc() return value on out of memory condition.

* tag 'efi-fixes-for-v6.3-1' of git://git.kernel.org/pub/scm/linux/kernel/git/efi/efi:
  efi/libstub: randomalloc: Return EFI_OUT_OF_RESOURCES on failure
  efi/libstub: Use relocated version of kernel's struct screen_info
  efi/libstub: zboot: Add compressed image to make targets
  efi: sysfb_efi: Add quirk for Lenovo Yoga Book X91F/L
  efi: sysfb_efi: Fix DMI quirks not working for simpledrm
  efi/libstub: smbios: Drop unused 'recsize' parameter
  arm64: efi: Use SMBIOS processor version to key off Ampere quirk
  efi/libstub: smbios: Use length member instead of record struct size
  efi: earlycon: Reprobe after parsing config tables
  arm64: efi: Set NX compat flag in PE/COFF header
  efi/libstub: arm64: Remap relocated image with strict permissions
  efi/libstub: zboot: Mark zboot EFI application as NX compatible


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 18:06:29 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ec7d8bd7d40f14b03da2d9cc3c6c8c845d62fb0f">Merge tag 'qcom-driver-fixes-for-6.3' of ↵</a></td><td>Arnd Bergmann</td><td>3</td><td><span class="deletions">-7</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux into soc/fixes

Qualcomm driver fixes for v6.3

Support for the secure world interrupting the SCM driver drive the wait
queue mechanism was recently introduced, but most platforms doesn't have
this mechanism and an error should not be printed in the log.

The rmtfs_mem driver recently gained support for assigning the region to
multiple VMIDs, but accidentally removed the support for running without
assignment. A couple of changes are introducd to correct this.

The SC8280XP LLCC slice configuration is wrong, reslting in incorrect
configuration of the hardware. The table is corrected, based on the
datasheet.

* tag 'qcom-driver-fixes-for-6.3' of https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux:
  firmware: qcom: scm: fix bogus irq error at probe
  soc: qcom: rmtfs: handle optional qcom,vmid correctly
  soc: qcom: rmtfs: fix error handling reading qcom,vmid
  soc: qcom: llcc: Fix slice configuration values for SC8280XP

Link: https://lore.kernel.org/r/20230323142505.1086072-1-andersson@kernel.org
Signed-off-by: Arnd Bergmann &lt;arnd@arndb.de&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 18:06:17 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7158e61c6cc8dc90f822d520c2ba696619b14812">Merge tag 'qcom-dts-fixes-for-6.3' of ↵</a></td><td>Arnd Bergmann</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+10</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux into soc/fixes

Qualcomm ARM32 Devicetree fixes for v6.3

This introduces missing reserved-memory ranges on LG G Watch R,
resolving stability issues caused by Linux reusing memory used by
firmware.

* tag 'qcom-dts-fixes-for-6.3' of https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux:
  ARM: dts: qcom: apq8026-lg-lenok: add missing reserved memory

Link: https://lore.kernel.org/r/20230323141922.1085875-1-andersson@kernel.org
Signed-off-by: Arnd Bergmann &lt;arnd@arndb.de&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 18:05:52 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f42ee7c45764102c1351ed1dfcba93d3591e37da">Merge tag 'qcom-arm64-fixes-for-6.3' of ↵</a></td><td>Arnd Bergmann</td><td>14</td><td><span class="deletions">-60</span>/<span class="insertions">+94</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux into soc/fixes

Qualcomm ARM64 Devicetree fixes for v6.3

This correct SIM card selection on the two newly introduced
MSM8916-based USB modems.

The firmware-name for the first CDSP is corrected on the SA8540P Ride
board.

The PCIe controller in SC7280 is marked cache-coherent, which resolves
seen data corruption issues.

Labels are added to the vadc channel nodes on SC8280XP, as the Linux
driver was updated to not include the unit address when generating
device names and collisions thereby prevented registration of the
channels. Audio clocks and routing is corrected and a few regulators are
marked always-on for the Lenovo Thinkpad X13s, as their clients are not
fully described at this point.

SPI5 was accidentally enabled by default on SM6115, and is disabled
again.

CDSP on SM6375 is provided its power-domains, to appropriately vote for
during power up for the DSP.

The iommu mask for the PCIe controllers in SM8150 is updated, to match
what the hypervisor expects.

Th Venus firmware path is corrected on Xiaomi Mi Pad 5 Pro.

The UFS controller is marked cache coherent on SM8350 and SM8450.

The clocks for the second WSA macro on SM8450 is corrected, and given
its own clocks.

The bias-pull-up value for I2C pins are corrected on SM8550, to trigger
the selection of the strong pull. CPU compatibles and the base address
of the LPASS TLMM block are corrected.

* tag 'qcom-arm64-fixes-for-6.3' of https://git.kernel.org/pub/scm/linux/kernel/git/qcom/linux: (23 commits)
  arm64: dts: qcom: sc8280xp-x13s: mark bob regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s12b regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s10b regulator as always-on
  arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on
  arm64: dts: qcom: sm8550: Mark UFS controller as cache coherent
  arm64: dts: qcom: sa8540p-ride: correct name of remoteproc_nsp0 firmware
  arm64: dts: qcom: sm8450: Mark UFS controller as cache coherent
  arm64: dts: qcom: sm8350: Mark UFS controller as cache coherent
  arm64: dts: qcom: sm8550: fix LPASS pinctrl slew base address
  arm64: dts: qcom: sc8280xp-x13s: fix va dmic dai links and routing
  arm64: dts: qcom: sc8280xp-x13s: fix dmic sample rate
  arm64: dts: qcom: sc8280xp: fix lpass tx macro clocks
  arm64: dts: qcom: sc8280xp: fix rx frame shapping info
  arm64: dts: qcom: sm8450: correct WSA2 assigned clocks
  arm64: dts: qcom: sc7280: Mark PCIe controller as cache coherent
  arm64: dts: qcom: msm8916-ufi: Fix sim card selection pinctrl
  arm64: dts: qcom: sm8250-xiaomi-elish: Correct venus firmware path
  arm64: dts: qcom: sm8550: Use correct CPU compatibles
  arm64: dts: qcom: sm8550: Add bias pull up value to tlmm i2c data clk states
  arm64: dts: qcom: sm6375: Add missing power-domain-named to CDSP
  ...

Link: https://lore.kernel.org/r/20230323141642.1085684-1-andersson@kernel.org
Signed-off-by: Arnd Bergmann &lt;arnd@arndb.de&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:52:26 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=19a6b66ca5244203214726376fda978cda2fc488">Merge tag 'riscv-for-linus-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>5</td><td><span class="deletions">-6</span>/<span class="insertions">+32</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/riscv/linux

Pull RISC-V fixes from Palmer Dabbelt:

 - A fix to match the CSR ASID masking rules when passing ASIDs to
   firmware

 - Force GCC to use ISA 2.2, to avoid a host of compatibily issues
   between toolchains

* tag 'riscv-for-linus-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/riscv/linux:
  riscv: Handle zicsr/zifencei issues between clang and binutils
  riscv: mm: Fix incorrect ASID argument when flushing TLB


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:44:43 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2495697422d374b097151205d399ff0dcbaa08e0">Merge tag 'for-linus-6.3-rc4-tag' of ↵</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-3</span>/<span class="insertions">+18</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/xen/tip

Pull xen fixes from Juergen Gross:

 - fix build warning

 - avoid concurrent accesses to the Xen PV console ring page

* tag 'for-linus-6.3-rc4-tag' of git://git.kernel.org/pub/scm/linux/kernel/git/xen/tip:
  x86/PVH: avoid 32-bit build warning when obtaining VGA console info
  hvc/xen: prevent concurrent accesses to the shared ring


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 17:11:27 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6babf38d894bec696761c10fbfccafceae76f4eb">Merge branch 'thermal-acpi'</a></td><td>Rafael J. Wysocki</td><td>6</td><td><span class="deletions">-25</span>/<span class="insertions">+182</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Merge a fix for a recent thermal-related regression in the ACPI
processor driver.

* thermal-acpi:
  ACPI: processor: thermal: Update CPU cooling devices on cpufreq policy changes
  thermal: core: Introduce thermal_cooling_device_update()
  thermal: core: Introduce thermal_cooling_device_present()
  ACPI: processor: Reorder acpi_processor_driver_init()


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 17:08:52 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8dbfa057b3f8e8402f639c0bf5fcbc4e43a8b3da">Merge branch 'acpi-video'</a></td><td>Rafael J. Wysocki</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+8</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Merge an ACPI backlight quirk for Acer Aspire 3830TG (Hans de Goede).

* acpi-video:
  ACPI: video: Add backlight=native DMI quirk for Acer Aspire 3830TG


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 17:07:56 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d0ab14634a26e54f8d6d231b47b7ef233e84599">ACPI: resource: Add Medion S17413 to IRQ override quirk</a></td><td>Aymeric Wibo</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Add DMI info of the Medion S17413 (board M1xA) to the IRQ override
quirk table. This fixes the keyboard not working on these laptops.

Link: https://bugzilla.kernel.org/show_bug.cgi?id=213031
Signed-off-by: Aymeric Wibo &lt;obiwac@gmail.com&gt;
[ rjw: Fixed up white space ]
Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:05:25 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bae0ad148f41904dd4e5857bdc2e3e31b950b3d">Merge tag 'tag-chrome-platform-fixes-for-v6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/chrome-platform/linux

Pull chrome platform fix from Tzung-Bi Shih:
 "Fix a kernel data leak vulnerability"

* tag 'tag-chrome-platform-fixes-for-v6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/chrome-platform/linux:
  platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:02:24 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ed1407e7f7f906aed5afa851b0f409740c4bfea8">Merge tag 'i2c-for-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-6</span>/<span class="insertions">+34</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/wsa/linux

Pull i2c fixes from Wolfram Sang:
 "A set of regular driver fixes"

* tag 'i2c-for-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/wsa/linux:
  i2c: xgene-slimpro: Fix out-of-bounds bug in xgene_slimpro_i2c_xfer()
  i2c: hisi: Only use the completion interrupt to finish the transfer
  i2c: hisi: Avoid redundant interrupts
  i2c: mxs: ensure that DMA buffers are safe for DMA
  i2c: imx-lpi2c: check only for enabled interrupt flags
  i2c: imx-lpi2c: clean rx/tx buffers upon new message


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 08:48:12 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=608f1b136616ff09d717776922c9ea9e9f9f3947">Merge tag 'net-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>106</td><td><span class="deletions">-579</span>/<span class="insertions">+980</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net

Pull networking fixes from Jakub Kicinski:
 "Including fixes from bpf, wifi and bluetooth.

  Current release - regressions:

   - wifi: mt76: mt7915: add back 160MHz channel width support for
     MT7915

   - libbpf: revert poisoning of strlcpy, it broke uClibc-ng

  Current release - new code bugs:

   - bpf: improve the coverage of the "allow reads from uninit stack"
     feature to fix verification complexity problems

   - eth: am65-cpts: reset PPS genf adj settings on enable

  Previous releases - regressions:

   - wifi: mac80211: serialize ieee80211_handle_wake_tx_queue()

   - wifi: mt76: do not run mt76_unregister_device() on unregistered hw,
     fix null-deref

   - Bluetooth: btqcomsmd: fix command timeout after setting BD address

   - eth: igb: revert rtnl_lock() that causes a deadlock

   - dsa: mscc: ocelot: fix device specific statistics

  Previous releases - always broken:

   - xsk: add missing overflow check in xdp_umem_reg()

   - wifi: mac80211:
      - fix QoS on mesh interfaces
      - fix mesh path discovery based on unicast packets

   - Bluetooth:
      - ISO: fix timestamped HCI ISO data packet parsing
      - remove "Power-on" check from Mesh feature

   - usbnet: more fixes to drivers trusting packet length

   - wifi: iwlwifi: mvm: fix mvmtxq-&gt;stopped handling

   - Bluetooth: btintel: iterate only bluetooth device ACPI entries

   - eth: iavf: fix inverted Rx hash condition leading to disabled hash

   - eth: igc: fix the validation logic for taprio's gate list

   - dsa: tag_brcm: legacy: fix daisy-chained switches

  Misc:

   - bpf: adjust insufficient default bpf_jit_limit to account for
     growth of BPF use over the last 5 years

   - xdp: bpf_xdp_metadata() use EOPNOTSUPP as unique errno indicating
     no driver support"

* tag 'net-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net: (84 commits)
  Bluetooth: HCI: Fix global-out-of-bounds
  Bluetooth: mgmt: Fix MGMT add advmon with RSSI command
  Bluetooth: btsdio: fix use after free bug in btsdio_remove due to unfinished work
  Bluetooth: L2CAP: Fix responding with wrong PDU type
  Bluetooth: btqcomsmd: Fix command timeout after setting BD address
  Bluetooth: btinel: Check ACPI handle for NULL before accessing
  net: mdio: thunder: Add missing fwnode_handle_put()
  net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case
  net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()
  net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()
  net: asix: fix modprobe "sysfs: cannot create duplicate filename"
  gve: Cache link_speed value from device
  tools: ynl: Fix genlmsg header encoding formats
  net: enetc: fix aggregate RMON counters not showing the ranges
  Bluetooth: Remove "Power-on" check from Mesh feature
  Bluetooth: Fix race condition in hci_cmd_sync_clear
  Bluetooth: btintel: Iterate only bluetooth device ACPI entries
  Bluetooth: ISO: fix timestamped HCI ISO data packet parsing
  Bluetooth: btusb: Remove detection of ISO packets over bulk
  Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet
  ...


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 08:40:02 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e2e63b071b2da53ad6a154e34c387bb064137f74">xfs: clear incore AGFL_RESET state if it's not needed</a></td><td>Darrick J. Wong</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Prior to commit 7ac2ff8bb371, when we loaded the incore perag structure
with information from the AGF header, we would set or clear the
pagf_agfl_reset field based on whether or not the AGFL list was
misaligned within the block.  IOWs, it's an incore state bit that's
supposed to cache something in the ondisk metadata.  Therefore, the code
still needs to support clearing the incore bit if (somehow) the AGFL
were to correct itself.

It turns out that xfs_repair does exactly this -- phase 4 loads the AGF
to scan the rmapbt for corrupt records, which can set NEEDS_AGFL_RESET.
The scan unsets AGF_INIT but doesn't unset NEEDS_AGFL_RESET.  Phase 5
totally rewrites the AGFL and fixes the alignment problem, didn't clear
NEEDS_AGFL_RESET historically, and reloads the perag state to fix the
freelist.  This results in the AGFL being reset based on stale data,
which then causes the new AGFL blocks to be leaked.  A subsequent
xfs_repair -n then complains about the leaks.

One could argue that phase 5 ought to clear this bit directly when it
reloads the perag AGF data after rewriting the AGFL, but libxfs used to
handle this for us, so it should go back to doing that.

Found by fuzzing flfirst = ones in xfs/352.

Fixes: 7ac2ff8bb371 ("xfs: perags need atomic operational state")
Signed-off-by: Darrick J. Wong &lt;djwong@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 08:40:01 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fcde88af6a783d32e735dd2615528e2bf7a0f533">xfs: pass the correct cursor to xfs_iomap_prealloc_size</a></td><td>Darrick J. Wong</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In xfs_buffered_write_iomap_begin, @icur is the iext cursor for the data
fork and @ccur is the cursor for the cow fork.  Pass in whichever cursor
corresponds to allocfork, because otherwise the xfs_iext_prev_extent
call can use the data fork cursor to walk off the end of the cow fork
structure.  Best case it returns the wrong results, worst case it does
this:

stack segment: 0000 [#1] PREEMPT SMP
CPU: 2 PID: 3141909 Comm: fsstress Tainted: G        W          6.3.0-rc2-xfsx #6.3.0-rc2 7bf5cc2e98997627cae5c930d890aba3aeec65dd
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS ?-20171121_152543-x86-ol7-builder-01.us.oracle.com-4.el7.1 04/01/2014
RIP: 0010:xfs_iext_prev+0x71/0x150 [xfs]
RSP: 0018:ffffc90002233aa8 EFLAGS: 00010297
RAX: 000000000000000f RBX: 000000000000000e RCX: 000000000000000c
RDX: 0000000000000002 RSI: 000000000000000e RDI: ffff8883d0019ba0
RBP: 989642409af8a7a7 R08: ffffea0000000001 R09: 0000000000000002
R10: 0000000000000000 R11: 000000000000000c R12: ffffc90002233b00
R13: ffff8883d0019ba0 R14: 989642409af8a6bf R15: 000ffffffffe0000
FS:  00007fdf8115f740(0000) GS:ffff88843fd00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fdf8115e000 CR3: 0000000357256000 CR4: 00000000003506e0
Call Trace:
 &lt;TASK&gt;
 xfs_iomap_prealloc_size.constprop.0.isra.0+0x1a6/0x410 [xfs 619a268fb2406d68bd34e007a816b27e70abc22c]
 xfs_buffered_write_iomap_begin+0xa87/0xc60 [xfs 619a268fb2406d68bd34e007a816b27e70abc22c]
 iomap_iter+0x132/0x2f0
 iomap_file_buffered_write+0x92/0x330
 xfs_file_buffered_write+0xb1/0x330 [xfs 619a268fb2406d68bd34e007a816b27e70abc22c]
 vfs_write+0x2eb/0x410
 ksys_write+0x65/0xe0
 do_syscall_64+0x2b/0x80
 entry_SYSCALL_64_after_hwframe+0x46/0xb0

Found by xfs/538 in alwayscow mode, but this doesn't seem particular to
that test.

Fixes: 590b16516ef3 ("xfs: refactor xfs_iomap_prealloc_size")
Actually-Fixes: 66ae56a53f0e ("xfs: introduce an always_cow mode")
Signed-off-by: Darrick J. Wong &lt;djwong@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 08:32:10 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=285063049a65251aada1c34664de692dd083aa03">Merge tag 'for-6.3-rc3-tag' of ↵</a></td><td>Linus Torvalds</td><td>8</td><td><span class="deletions">-71</span>/<span class="insertions">+71</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/kdave/linux

Pull btrfs fixes from David Sterba:
 "A few more fixes, the zoned accounting fix is spread across a few
  patches, preparatory and the actual fixes:

   - zoned mode:
      - fix accounting of unusable zone space
      - fix zone activation condition for DUP profile
      - preparatory patches

   - improved error handling of missing chunks

   - fix compiler warning"

* tag 'for-6.3-rc3-tag' of git://git.kernel.org/pub/scm/linux/kernel/git/kdave/linux:
  btrfs: zoned: drop space_info-&gt;active_total_bytes
  btrfs: zoned: count fresh BG region as zone unusable
  btrfs: use temporary variable for space_info in btrfs_update_block_group
  btrfs: rename BTRFS_FS_NO_OVERCOMMIT to BTRFS_FS_ACTIVE_ZONE_TRACKING
  btrfs: zoned: fix btrfs_can_activate_zone() to support DUP profile
  btrfs: fix compiler warning on SPARC/PA-RISC handling fscrypt_setup_filename
  btrfs: handle missing chunk mapping more gracefully


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 08:27:13 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6dd74c51b48567e6ec56276aa35c8d25f6472f6f">Merge tag 'scsi-fixes' of ↵</a></td><td>Linus Torvalds</td><td>4</td><td><span class="deletions">-3</span>/<span class="insertions">+18</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/jejb/scsi

Pull SCSI fixes from James Bottomley:
 "Four small fixes, three in drivers.

  The core fix adds a UFS device to an existing quirk to avoid a huge
  delay on boot"

* tag 'scsi-fixes' of git://git.kernel.org/pub/scm/linux/kernel/git/jejb/scsi:
  scsi: scsi_dh_alua: Fix memleak for 'qdata' in alua_activate()
  scsi: qla2xxx: Synchronize the IOCB count to be in order
  scsi: qla2xxx: Perform lockless command completion in abort path
  scsi: core: Add BLIST_SKIP_VPD_PAGES for SKhynix H28U74301AMR


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:03:55 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bc962159e8e326af634a506508034a375bf2b858">cifs: avoid race conditions with parallel reconnects</a></td><td>Shyam Prasad N</td><td>3</td><td><span class="deletions">-33</span>/<span class="insertions">+76</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When multiple processes/channels do reconnects in parallel
we used to return success immediately
negotiate/session-setup/tree-connect, causing race conditions
between processes that enter the function in parallel.
This caused several errors related to session not found to
show up during parallel reconnects.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:02:26 -0500">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fddc6ccc487e5de07b98df8d04118d5dcb5e0407">cifs: append path to open_enter trace event</a></td><td>Shyam Prasad N</td><td>6</td><td><span class="deletions">-6</span>/<span class="insertions">+25</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
We do not dump the file path for smb3_open_enter ftrace
calls, which is a severe handicap while debugging
using ftrace evens. This change adds that info.

Unfortunately, we're not updating the path in open params
in many places; which I had to do as a part of this change.
SMB2_open gets path in utf16 format, but it's easier of
path is supplied as char pointer in oparms.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 05:30:56 -0700">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e313de5b5b04176f28384b45ebebd552c0c7dae3">MAINTAINERS: xtensa: drop linux-xtensa@linux-xtensa.org mailing list</a></td><td>Max Filippov</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+0</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The linux-xtensa@linux-xtensa.org mailing list has been bouncing emails
for a few months now. Drop it from the xtensa entries in the MAINTAINERS
file.

Signed-off-by: Max Filippov &lt;jcmvbkbc@gmail.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:46:12 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=08570b7c8db6d9185deccf5bcda773bd6f17172f">gpu: host1x: fix uninitialized variable use</a></td><td>Arnd Bergmann</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The error handling for platform_get_irq() failing no longer
works after a recent change, clang now points this out with
a warning:

drivers/gpu/host1x/dev.c:520:6: error: variable 'syncpt_irq' is uninitialized when used here [-Werror,-Wuninitialized]
        if (syncpt_irq &lt; 0)
            ^~~~~~~~~~

Fix this by removing the variable and checking the correct
error status.

Fixes: 625d4ffb438c ("gpu: host1x: Rewrite syncpoint interrupt handling")
Reviewed-by: Nathan Chancellor &lt;nathan@kernel.org&gt;
Reviewed-by: Mikko Perttunen &lt;mperttunen@nvidia.com&gt;
Reported-by: "kernelci.org bot" &lt;bot@kernelci.org&gt;
Reviewed-by: Nick Desaulniers &lt;ndesaulniers@google.com&gt;
Reviewed-by: Jon Hunter &lt;jonathanh@nvidia.com&gt;
Signed-off-by: Arnd Bergmann &lt;arnd@arndb.de&gt;
Signed-off-by: Daniel Vetter &lt;daniel.vetter@ffwll.ch&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/20230127221418.2522612-1-arnd@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:23:29 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e4e9de1620f76a69893b35f920171b563bd007c">Merge tag 'amd-drm-fixes-6.3-2023-03-23' of ↵</a></td><td>Daniel Vetter</td><td>11</td><td><span class="deletions">-41</span>/<span class="insertions">+72</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
https://gitlab.freedesktop.org/agd5f/linux into drm-fixes

amd-drm-fixes-6.3-2023-03-23:

amdgpu:
- S4 fix
- Soft reset fixes
- SR-IOV fix
- Remove an out of date comment in the DC code
- ASPM fix
- DCN 3.2 fixes

Signed-off-by: Daniel Vetter &lt;daniel.vetter@ffwll.ch&gt;
From: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/20230323161939.7751-1-alexander.deucher@amd.com


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:18:44 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e37fef79bf3b045c44a1350acc327a8e34f07184">Merge tag 'drm-intel-fixes-2023-03-23' of ↵</a></td><td>Daniel Vetter</td><td>13</td><td><span class="deletions">-72</span>/<span class="insertions">+88</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://anongit.freedesktop.org/drm/drm-intel into drm-fixes

drm/i915 fixes for v6.3-rc4:
- Fix an MTL workaround
- Fix fbdev obj locking before vma pin
- Fix state inheritance tracking in initial commit
- Fix missing GuC error capture codes
- Fix missing debug object activation
- Fix uc init late order relative to probe error injection
- Fix perf limit reasons formatting
- Fix vblank timestamp update on seamless M/N changes

Signed-off-by: Daniel Vetter &lt;daniel.vetter@ffwll.ch&gt;
From: Jani Nikula &lt;jani.nikula@intel.com&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/878rfn7njw.fsf@intel.com


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 09:33:39 +0100">9 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9b5dbf6b15b564be5c7cd562737853dc95d30935">Merge tag 'drm-misc-fixes-2023-03-23' of ↵</a></td><td>Daniel Vetter</td><td>3</td><td><span class="deletions">-10</span>/<span class="insertions">+20</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://anongit.freedesktop.org/drm/drm-misc into drm-fixes

Short summary of fixes pull:

 * fixes for bind and probing error handling for meson, lt8912b bridge
 * panel-orientation fixes for Lenovo Book X90F

Signed-off-by: Daniel Vetter &lt;daniel.vetter@ffwll.ch&gt;
From: Thomas Zimmermann &lt;tzimmermann@suse.de&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/20230323082401.GA8371@linux-uq9g


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 00:23:13 -0500">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=39b291b86b5988bf8753c3874d5c773399d09b96">ksmbd: return unsupported error on smb1 mount</a></td><td>Namjae Jeon</td><td>3</td><td><span class="deletions">-30</span>/<span class="insertions">+30</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
ksmbd disconnect connection when mounting with vers=smb1.
ksmbd should send smb1 negotiate response to client for correct
unsupported error return. This patch add needed SMB1 macros and fill
NegProt part of the response for smb1 negotiate response.

Cc: stable@vger.kernel.org
Reported-by: Steve French &lt;stfrench@microsoft.com&gt;
Reviewed-by: Sergey Senozhatsky &lt;senozhatsky@chromium.org&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-24 10:56:28 +0800">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b20cf3f89c56b5f6a38b7f76a8128bf9f291bbd3">platform/chrome: cros_ec_chardev: fix kernel data leak from ioctl</a></td><td>Tzung-Bi Shih</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
It is possible to peep kernel page's data by providing larger `insize`
in struct cros_ec_command[1] when invoking EC host commands.

Fix it by using zeroed memory.

[1]: https://elixir.bootlin.com/linux/v6.2/source/include/linux/platform_data/cros_ec_proto.h#L74

Fixes: eda2e30c6684 ("mfd / platform: cros_ec: Miscellaneous character device to talk with the EC")
Signed-off-by: Tzung-Bi Shih &lt;tzungbi@kernel.org&gt;
Reviewed-by: Guenter Roeck &lt;groeck@chromium.org&gt;
Link: https://lore.kernel.org/r/20230324010658.1082361-1-tzungbi@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:36 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0072ca529674c36421023ffe90837a7de9387f3">mm: mmap: remove newline at the end of the trace</a></td><td>Minwoo Im</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
We already have newline in TP_printk so remove the redundant newline
character at the end of the mmap trace.

&lt;...&gt;-345     [006] .....    95.589290: exit_mmap: mt_mod ...

&lt;...&gt;-345     [006] .....    95.589413: vm_unmapped_area: addr=...

&lt;...&gt;-345     [006] .....    95.589571: vm_unmapped_area: addr=...

&lt;...&gt;-345     [006] .....    95.589606: vm_unmapped_area: addr=...

to

&lt;...&gt;-336     [006] .....    44.762506: exit_mmap: mt_mod ...
&lt;...&gt;-336     [006] .....    44.762654: vm_unmapped_area: addr=...
&lt;...&gt;-336     [006] .....    44.762794: vm_unmapped_area: addr=...
&lt;...&gt;-336     [006] .....    44.762835: vm_unmapped_area: addr=...

Link: https://lkml.kernel.org/r/ZAu6qDsNPmk82UjV@minwoo-desktop
FIxes: df529cabb7a25 ("mm: mmap: add trace point of vm_unmapped_area")
Signed-off-by: Minwoo Im &lt;minwoo.im.dev@gmail.com&gt;
Acked-by: Steven Rostedt (Google) &lt;rostedt@goodmis.org&gt;
Reviewed-by: Mukesh Ojha &lt;quic_mojha@quicinc.com&gt;
Reviewed-by: David Hildenbrand &lt;david@redhat.com&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:35 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5aa360971beaadf51f099fb7904fa4807b7d39cd">mailmap: add entries for Richard Leitner</a></td><td>Richard Leitner</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Map all my old email addresses to my current address.

Link: https://lkml.kernel.org/r/20230316-my-mailmap-v1-1-76bc3a36ba41@linux.dev
Signed-off-by: Richard Leitner &lt;richard.leitner@linux.dev&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:35 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5eb39cde1e2487ba5ec1802dc5e58a77e700d99e">kcsan: avoid passing -g for test</a></td><td>Marco Elver</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Nathan reported that when building with GNU as and a version of clang that
defaults to DWARF5, the assembler will complain with:

  Error: non-constant .uleb128 is not supported

This is because `-g` defaults to the compiler debug info default. If the
assembler does not support some of the directives used, the above errors
occur. To fix, remove the explicit passing of `-g`.

All the test wants is that stack traces print valid function names, and
debug info is not required for that. (I currently cannot recall why I
added the explicit `-g`.)

Link: https://lkml.kernel.org/r/20230316224705.709984-2-elver@google.com
Fixes: 1fe84fd4a402 ("kcsan: Add test suite")
Signed-off-by: Marco Elver &lt;elver@google.com&gt;
Reported-by: Nathan Chancellor &lt;nathan@kernel.org&gt;
Cc: Alexander Potapenko &lt;glider@google.com&gt;
Cc: Dmitry Vyukov &lt;dvyukov@google.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:35 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e08ca1802441224f5b7cc6bffbb687f7406de95">kfence: avoid passing -g for test</a></td><td>Marco Elver</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Nathan reported that when building with GNU as and a version of clang that
defaults to DWARF5:

  $ make -skj"$(nproc)" ARCH=riscv CROSS_COMPILE=riscv64-linux-gnu- \
			LLVM=1 LLVM_IAS=0 O=build \
			mrproper allmodconfig mm/kfence/kfence_test.o
  /tmp/kfence_test-08a0a0.s: Assembler messages:
  /tmp/kfence_test-08a0a0.s:14627: Error: non-constant .uleb128 is not supported
  /tmp/kfence_test-08a0a0.s:14628: Error: non-constant .uleb128 is not supported
  /tmp/kfence_test-08a0a0.s:14632: Error: non-constant .uleb128 is not supported
  /tmp/kfence_test-08a0a0.s:14633: Error: non-constant .uleb128 is not supported
  /tmp/kfence_test-08a0a0.s:14639: Error: non-constant .uleb128 is not supported
  ...

This is because `-g` defaults to the compiler debug info default.  If the
assembler does not support some of the directives used, the above errors
occur.  To fix, remove the explicit passing of `-g`.

All the test wants is that stack traces print valid function names, and
debug info is not required for that.  (I currently cannot recall why I
added the explicit `-g`.)

Link: https://lkml.kernel.org/r/20230316224705.709984-1-elver@google.com
Fixes: bc8fbc5f305a ("kfence: add test suite")
Signed-off-by: Marco Elver &lt;elver@google.com&gt;
Reported-by: Nathan Chancellor &lt;nathan@kernel.org&gt;
Cc: Alexander Potapenko &lt;glider@google.com&gt;
Cc: Dmitry Vyukov &lt;dvyukov@google.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:35 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1c86a188e03156223a34d09ce290b49bd4dd0403">mm: kfence: fix using kfence_metadata without initialization in show_object()</a></td><td>Muchun Song</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+8</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The variable kfence_metadata is initialized in kfence_init_pool(), then,
it is not initialized if kfence is disabled after booting.  In this case,
kfence_metadata will be used (e.g.  -&gt;lock and -&gt;state fields) without
initialization when reading /sys/kernel/debug/kfence/objects.  There will
be a warning if you enable CONFIG_DEBUG_SPINLOCK.  Fix it by creating
debugfs files when necessary.

Link: https://lkml.kernel.org/r/20230315034441.44321-1-songmuchun@bytedance.com
Fixes: 0ce20dd84089 ("mm: add Kernel Electric-Fence infrastructure")
Signed-off-by: Muchun Song &lt;songmuchun@bytedance.com&gt;
Tested-by: Marco Elver &lt;elver@google.com&gt;
Reviewed-by: Marco Elver &lt;elver@google.com&gt;
Cc: Alexander Potapenko &lt;glider@google.com&gt;
Cc: Dmitry Vyukov &lt;dvyukov@google.com&gt;
Cc: Jann Horn &lt;jannh@google.com&gt;
Cc: SeongJae Park &lt;sjpark@amazon.de&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:35 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13684e966d46283e0e89b6a4941596dc52b18bf3">lib: dhry: fix unstable smp_processor_id(_) usage</a></td><td>Geert Uytterhoeven</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When running the in-kernel Dhrystone benchmark with
CONFIG_DEBUG_PREEMPT=y:

    BUG: using smp_processor_id() in preemptible [00000000] code: bash/938

Fix this by not using smp_processor_id() directly, but instead wrapping
the whole benchmark inside a get_cpu()/put_cpu() pair.  This makes sure
the whole benchmark is run on the same CPU core, and the reported values
are consistent.

Link: https://lkml.kernel.org/r/b0d29932bb24ad82cea7f821e295c898e9657be0.1678890070.git.geert+renesas@glider.be
Fixes: d5528cc16893f1f6 ("lib: add Dhrystone benchmark test")
Signed-off-by: Geert Uytterhoeven &lt;geert+renesas@glider.be&gt;
Reported-by: Tobias Klausmann &lt;klausman@schwarzvogel.de&gt;
  Link: https://bugzilla.kernel.org/show_bug.cgi?id=217179
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:34 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d2e44a50ecebb72257e5deb7ce8d227d7e3f53b9">mailmap: add entry for Enric Balletbo i Serra</a></td><td>Enric Balletbo i Serra</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Map Enric's old corporate addresses to his kernel.org address.

Link: https://lkml.kernel.org/r/20230314115455.188818-1-eballetbo@kernel.org
Signed-off-by: Enric Balletbo i Serra &lt;eballetbo@kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:34 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9e26240c3bc1cf4895abdd5330a35465b5050109">mailmap: map Sai Prakash Ranjan's old address to his current one</a></td><td>Konrad Dybcio</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Sai's old email is still picked up by the likes of get_maintainer.pl and
keeps bouncing like all other @codeaurora.org addresses.  Map it to his
current one.

Link: https://lkml.kernel.org/r/20230314125604.2734146-1-konrad.dybcio@linaro.org
Signed-off-by: Konrad Dybcio &lt;konrad.dybcio@linaro.org&gt;
Cc: Sai Prakash Ranjan &lt;quic_saipraka@quicinc.com&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:34 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=83bd3eeb326bb0b5800573622d18e1c5e4355323">mailmap: map Rajendra Nayak's old address to his current one</a></td><td>Konrad Dybcio</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Rajendra's old email is still picked up by the likes of get_maintainer.pl
and keeps bouncing like all other @codeaurora.org addresses.  Map it to
his current one.

Link: https://lkml.kernel.org/r/20230313090343.2148346-1-konrad.dybcio@linaro.org
Signed-off-by: Konrad Dybcio &lt;konrad.dybcio@linaro.org&gt;
Cc: Rajendra Nayak &lt;quic_rjendra@quicinc.com&gt;
Cc: Andy Gross &lt;agross@kernel.org&gt;
Cc: Baolin Wang &lt;baolin.wang@linux.alibaba.com&gt;
Cc: Bjorn Andersson &lt;andersson@kernel.org&gt;
Cc: Colin Ian King &lt;colin.i.king@gmail.com&gt;
Cc: Jakub Kicinski &lt;kuba@kernel.org&gt;
Cc: Kirill Tkhai &lt;tkhai@ya.ru&gt;
Cc: Marijn Suijten &lt;marijn.suijten@somainline.org&gt;
Cc: Qais Yousef &lt;qyousef@layalina.io&gt;
Cc: Stephen Hemminger &lt;stephen@networkplumber.org&gt;
Cc: Vasily Averin &lt;vasily.averin@linux.dev&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:34 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f446883d12b8bfa486f7c98d403054d61d38c989">Revert "kasan: drop skip_kasan_poison variable in free_pages_prepare"</a></td><td>Peter Collingbourne</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
This reverts commit 487a32ec24be819e747af8c2ab0d5c515508086a.

should_skip_kasan_poison() reads the PG_skip_kasan_poison flag from
page-&gt;flags.  However, this line of code in free_pages_prepare():

	page-&gt;flags &amp;= ~PAGE_FLAGS_CHECK_AT_PREP;

clears most of page-&gt;flags, including PG_skip_kasan_poison, before calling
should_skip_kasan_poison(), which meant that it would never return true as
a result of the page flag being set.  Therefore, fix the code to call
should_skip_kasan_poison() before clearing the flags, as we were doing
before the reverted patch.

This fixes a measurable performance regression introduced in the reverted
commit, where munmap() takes longer than intended if HW tags KASAN is
supported and enabled at runtime.  Without this patch, we see a
single-digit percentage performance regression in a particular
mmap()-heavy benchmark when enabling HW tags KASAN, and with the patch,
there is no statistically significant performance impact when enabling HW
tags KASAN.

Link: https://lkml.kernel.org/r/20230310042914.3805818-2-pcc@google.com
Fixes: 487a32ec24be ("kasan: drop skip_kasan_poison variable in free_pages_prepare")
  Link: https://linux-review.googlesource.com/id/Ic4f13affeebd20548758438bb9ed9ca40e312b79
Signed-off-by: Peter Collingbourne &lt;pcc@google.com&gt;
Reviewed-by: Andrey Konovalov &lt;andreyknvl@gmail.com&gt;
Cc: Andrey Ryabinin &lt;ryabinin.a.a@gmail.com&gt;
Cc: Catalin Marinas &lt;catalin.marinas@arm.com&gt; [arm64]
Cc: Evgenii Stepanov &lt;eugenis@google.com&gt;
Cc: Vincenzo Frascino &lt;vincenzo.frascino@arm.com&gt;
Cc: Will Deacon &lt;will@kernel.org&gt;
Cc: &lt;stable@vger.kernel.org&gt;	[6.1]
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:34 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc2a978d28422ca957d14cb25caa72e25c45be1d">mailmap: add entry for Tobias Klauser</a></td><td>Tobias Klauser</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Map my old email addresses to the current address.

Link: https://lkml.kernel.org/r/20230310123508.22079-1-tklauser@distanz.ch
Signed-off-by: Tobias Klauser &lt;tklauser@distanz.ch&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:33 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=90db9dbedd26ce029f3a0f8d2cbd3a142f452408">kasan, powerpc: don't rename memintrinsics if compiler adds prefixes</a></td><td>Marco Elver</td><td>3</td><td><span class="deletions">-7</span>/<span class="insertions">+19</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
With appropriate compiler support [1], KASAN builds use __asan prefixed
meminstrinsics, and KASAN no longer overrides memcpy/memset/memmove.

If compiler support is detected (CC_HAS_KASAN_MEMINTRINSIC_PREFIX), define
memintrinsics normally (do not prefix '__').

On powerpc, KASAN is the only user of __mem functions, which are used to
define instrumented memintrinsics.  Alias the normal versions for KASAN to
use in its implementation.

Link: https://lore.kernel.org/all/20230224085942.1791837-1-elver@google.com/ [1]
Link: https://lore.kernel.org/oe-kbuild-all/202302271348.U5lvmo0S-lkp@intel.com/
Link: https://lkml.kernel.org/r/20230227094726.3833247-1-elver@google.com
Signed-off-by: Marco Elver &lt;elver@google.com&gt;
Reported-by: kernel test robot &lt;lkp@intel.com&gt;
Acked-by: Michael Ellerman &lt;mpe@ellerman.id.au&gt;	[powerpc]
Cc: Alexander Potapenko &lt;glider@google.com&gt;
Cc: Andrey Konovalov &lt;andreyknvl@gmail.com&gt;
Cc: Andrey Ryabinin &lt;ryabinin.a.a@gmail.com&gt;
Cc: Christophe Leroy &lt;christophe.leroy@csgroup.eu&gt;
Cc: Daniel Axtens &lt;dja@axtens.net&gt;
Cc: Dmitry Vyukov &lt;dvyukov@google.com&gt;
Cc: Liam R. Howlett &lt;Liam.Howlett@oracle.com&gt;
Cc: Nicholas Piggin &lt;npiggin@gmail.com&gt;
Cc: Vincenzo Frascino &lt;vincenzo.frascino@arm.com&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:33 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6db504ce55bdbc575723938fc480713c9183f6a2">mm/ksm: fix race with VMA iteration and mm_struct teardown</a></td><td>Liam R. Howlett</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+9</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
exit_mmap() will tear down the VMAs and maple tree with the mmap_lock held
in write mode.  Ensure that the maple tree is still valid by checking
ksm_test_exit() after taking the mmap_lock in read mode, but before the
for_each_vma() iterator dereferences a destroyed maple tree.

Since the maple tree is destroyed, the flags telling lockdep to check an
external lock has been cleared.  Skip the for_each_vma() iterator to avoid
dereferencing a maple tree without the external lock flag, which would
create a lockdep warning.

Link: https://lkml.kernel.org/r/20230308220310.3119196-1-Liam.Howlett@oracle.com
Fixes: a5f18ba07276 ("mm/ksm: use vma iterators instead of vma linked list")
Signed-off-by: Liam R. Howlett &lt;Liam.Howlett@oracle.com&gt;
Reported-by: Pengfei Xu &lt;pengfei.xu@intel.com&gt;
  Link: https://lore.kernel.org/lkml/ZAdUUhSbaa6fHS36@xpf.sh.intel.com/
Reported-by: syzbot+2ee18845e89ae76342c5@syzkaller.appspotmail.com
  Link: https://syzkaller.appspot.com/bug?id=64a3e95957cd3deab99df7cd7b5a9475af92c93e
Acked-by: David Hildenbrand &lt;david@redhat.com&gt;
Cc: Matthew Wilcox (Oracle) &lt;willy@infradead.org&gt;
Cc: &lt;heng.su@intel.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:33 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d035230ec9937a9138921d2a0eeb99496ea7eac0">kselftest: vm: fix unused variable warning</a></td><td>Peter Xu</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Remove unused variable from the MDWE test.

[joey.gouly@arm.com: add commit message]
Link: https://lkml.kernel.org/r/20230308190423.46491-4-joey.gouly@arm.com
Fixes: 4cf1fe34fd18 ("kselftest: vm: add tests for memory-deny-write-execute")
Signed-off-by: Peter Xu &lt;peterx@redhat.com&gt;
Signed-off-by: Joey Gouly &lt;joey.gouly@arm.com&gt;
Acked-by: Catalin Marinas &lt;catalin.marinas@arm.com&gt;
Cc: Alexey Izbyshev &lt;izbyshev@ispras.ru&gt;
Cc: Arnaldo Carvalho de Melo &lt;acme@redhat.com&gt;
Cc: Kees Cook &lt;keescook@chromium.org&gt;
Cc: nd &lt;nd@arm.com&gt;
Cc: Shuah Khan &lt;shuah@kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:33 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3d27a95b1d96757e48ce970baa3d419af299c2af">mm: fix error handling for map_deny_write_exec</a></td><td>Joey Gouly</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Commit 4a18419f71cd ("mm/mprotect: use mmu_gather") changed 'goto out;' to
'break' in the loop.

This wasn't noticed while rebasing the MDWE patches, so fix it now.

Link: https://lkml.kernel.org/r/20230308190423.46491-3-joey.gouly@arm.com
Fixes: b507808ebce2 ("mm: implement memory-deny-write-execute as a prctl")
Signed-off-by: Joey Gouly &lt;joey.gouly@arm.com&gt;
Reported-by: Alexey Izbyshev &lt;izbyshev@ispras.ru&gt;
  Link: https://lore.kernel.org/linux-arm-kernel/8408d8901e9d7ee6b78db4c6cba04b78@ispras.ru/
Reviewed-by: Catalin Marinas &lt;catalin.marinas@arm.com&gt;
Cc: Arnaldo Carvalho de Melo &lt;acme@redhat.com&gt;
Cc: Kees Cook &lt;keescook@chromium.org&gt;
Cc: nd &lt;nd@arm.com&gt;
Cc: Peter Xu &lt;peterx@redhat.com&gt;
Cc: Shuah Khan &lt;shuah@kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:32 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6bbf1090672673183a98cd6e19de91fa5a319df0">mm: deduplicate error handling for map_deny_write_exec</a></td><td>Joey Gouly</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Patch series "Fixes for MDWE prctl"

These are four small fixes for the recent memory-write-deny-execute prctl
patches [1].  Two reported by Alexey about error handling and two tooling
fixes by Peter.


This patch (of 4):

Commit cc8d1b097de7 ("mmap: clean up mmap_region() unrolling")
deduplicated the error handling, do the same for the return value of
`map_deny_write_exec`.

Link: https://lkml.kernel.org/r/20230308190423.46491-1-joey.gouly@arm.com
Link: https://lkml.kernel.org/r/20230308190423.46491-2-joey.gouly@arm.com
Link: https://lore.kernel.org/linux-arm-kernel/20230119160344.54358-1-joey.gouly@arm.com/ [1]
Fixes: b507808ebce2 ("mm: implement memory-deny-write-execute as a prctl")
Signed-off-by: Joey Gouly &lt;joey.gouly@arm.com&gt;
Reported-by: Alexey Izbyshev &lt;izbyshev@ispras.ru&gt;
  Link: https://lore.kernel.org/linux-arm-kernel/8408d8901e9d7ee6b78db4c6cba04b78@ispras.ru/
Reviewed-by: Catalin Marinas &lt;catalin.marinas@arm.com&gt;
Cc: Arnaldo Carvalho de Melo &lt;acme@redhat.com&gt;
Cc: Kees Cook &lt;keescook@chromium.org&gt;
Cc: nd &lt;nd@arm.com&gt;
Cc: Peter Xu &lt;peterx@redhat.com&gt;
Cc: Shuah Khan &lt;shuah@kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:32 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=12871a154690c52e2ded718b392a3977c114f6c1">checksyscalls: ignore fstat to silence build warning on LoongArch</a></td><td>Tiezhu Yang</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
fstat is replaced by statx on the new architecture, so an exception is
added to the checksyscalls script to silence the following build warning
on LoongArch:

  CALL    scripts/checksyscalls.sh
&lt;stdin&gt;:569:2: warning: #warning syscall fstat not implemented [-Wcpp]

Link: https://lkml.kernel.org/r/1678175940-20872-1-git-send-email-yangtiezhu@loongson.cn
Signed-off-by: Tiezhu Yang &lt;yangtiezhu@loongson.cn&gt;
Suggested-by: WANG Xuerui &lt;kernel@xen0n.name&gt;
Suggested-by: Arnd Bergmann &lt;arnd@arndb.de&gt;
Reviewed-by: Arnd Bergmann &lt;arnd@arndb.de&gt;
Cc: Huacai Chen &lt;chenhuacai@kernel.org&gt;
Cc: Masahiro Yamada &lt;masahiroy@kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:32 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=003587000276f81d0114b5ce773d80c119d8cb30">nilfs2: fix kernel-infoleak in nilfs_ioctl_wrap_copy()</a></td><td>Ryusuke Konishi</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The ioctl helper function nilfs_ioctl_wrap_copy(), which exchanges a
metadata array to/from user space, may copy uninitialized buffer regions
to user space memory for read-only ioctl commands NILFS_IOCTL_GET_SUINFO
and NILFS_IOCTL_GET_CPINFO.

This can occur when the element size of the user space metadata given by
the v_size member of the argument nilfs_argv structure is larger than the
size of the metadata element (nilfs_suinfo structure or nilfs_cpinfo
structure) on the file system side.

KMSAN-enabled kernels detect this issue as follows:

 BUG: KMSAN: kernel-infoleak in instrument_copy_to_user
 include/linux/instrumented.h:121 [inline]
 BUG: KMSAN: kernel-infoleak in _copy_to_user+0xc0/0x100 lib/usercopy.c:33
  instrument_copy_to_user include/linux/instrumented.h:121 [inline]
  _copy_to_user+0xc0/0x100 lib/usercopy.c:33
  copy_to_user include/linux/uaccess.h:169 [inline]
  nilfs_ioctl_wrap_copy+0x6fa/0xc10 fs/nilfs2/ioctl.c:99
  nilfs_ioctl_get_info fs/nilfs2/ioctl.c:1173 [inline]
  nilfs_ioctl+0x2402/0x4450 fs/nilfs2/ioctl.c:1290
  nilfs_compat_ioctl+0x1b8/0x200 fs/nilfs2/ioctl.c:1343
  __do_compat_sys_ioctl fs/ioctl.c:968 [inline]
  __se_compat_sys_ioctl+0x7dd/0x1000 fs/ioctl.c:910
  __ia32_compat_sys_ioctl+0x93/0xd0 fs/ioctl.c:910
  do_syscall_32_irqs_on arch/x86/entry/common.c:112 [inline]
  __do_fast_syscall_32+0xa2/0x100 arch/x86/entry/common.c:178
  do_fast_syscall_32+0x37/0x80 arch/x86/entry/common.c:203
  do_SYSENTER_32+0x1f/0x30 arch/x86/entry/common.c:246
  entry_SYSENTER_compat_after_hwframe+0x70/0x82

 Uninit was created at:
  __alloc_pages+0x9f6/0xe90 mm/page_alloc.c:5572
  alloc_pages+0xab0/0xd80 mm/mempolicy.c:2287
  __get_free_pages+0x34/0xc0 mm/page_alloc.c:5599
  nilfs_ioctl_wrap_copy+0x223/0xc10 fs/nilfs2/ioctl.c:74
  nilfs_ioctl_get_info fs/nilfs2/ioctl.c:1173 [inline]
  nilfs_ioctl+0x2402/0x4450 fs/nilfs2/ioctl.c:1290
  nilfs_compat_ioctl+0x1b8/0x200 fs/nilfs2/ioctl.c:1343
  __do_compat_sys_ioctl fs/ioctl.c:968 [inline]
  __se_compat_sys_ioctl+0x7dd/0x1000 fs/ioctl.c:910
  __ia32_compat_sys_ioctl+0x93/0xd0 fs/ioctl.c:910
  do_syscall_32_irqs_on arch/x86/entry/common.c:112 [inline]
  __do_fast_syscall_32+0xa2/0x100 arch/x86/entry/common.c:178
  do_fast_syscall_32+0x37/0x80 arch/x86/entry/common.c:203
  do_SYSENTER_32+0x1f/0x30 arch/x86/entry/common.c:246
  entry_SYSENTER_compat_after_hwframe+0x70/0x82

 Bytes 16-127 of 3968 are uninitialized
 ...

This eliminates the leak issue by initializing the page allocated as
buffer using get_zeroed_page().

Link: https://lkml.kernel.org/r/20230307085548.6290-1-konishi.ryusuke@gmail.com
Signed-off-by: Ryusuke Konishi &lt;konishi.ryusuke@gmail.com&gt;
Reported-by: syzbot+132fdd2f1e1805fdc591@syzkaller.appspotmail.com
  Link: https://lkml.kernel.org/r/000000000000a5bd2d05f63f04ae@google.com
Tested-by: Ryusuke Konishi &lt;konishi.ryusuke@gmail.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:32 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bd6dded6318dc8e2514d74868c1f8fb38b61a60">test_maple_tree: add more testing for mas_empty_area()</a></td><td>Liam R. Howlett</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+48</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Test robust filling of an entire area of the tree, then test one beyond. 
This is to test the walking back up the tree at the end of nodes and error
condition.  Test inspired by the reproducer code provided by Snild Dolkow.

The last test in the function tests for the case of a corrupted maple
state caused by the incorrect limits set during mas_skip_node().  There
needs to be a gap in the second last child and last child, but the search
must rule out the second last child's gap.  This would avoid correcting
the maple state to the correct max limit and return an error.

Link: https://lkml.kernel.org/r/20230307180247.2220303-3-Liam.Howlett@oracle.com
Cc: Snild Dolkow &lt;snild@sony.com&gt;
Link: https://lore.kernel.org/linux-mm/cb8dc31a-fef2-1d09-f133-e9f7b9f9e77a@sony.com/
Fixes: e15e06a83923 ("lib/test_maple_tree: add testing for maple tree")
Signed-off-by: Liam R. Howlett &lt;Liam.Howlett@oracle.com&gt;
Cc: Peng Zhang &lt;zhangpeng.00@bytedance.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:32 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0fa99fdfe1b38da396d0b2d1496a823bcd0ebea0">maple_tree: fix mas_skip_node() end slot detection</a></td><td>Liam R. Howlett</td><td>1</td><td><span class="deletions">-19</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Patch series "Fix mas_skip_node() for mas_empty_area()", v2.

mas_empty_area() was incorrectly returning an error when there was room. 
The issue was tracked down to mas_skip_node() using the incorrect
end-of-slot count.  Instead of using the nodes hard limit, the limit of
data should be used.

mas_skip_node() was also setting the min and max to that of the child
node, which was unnecessary.  Within these limits being set, there was
also a bug that corrupted the maple state's max if the offset was set to
the maximum node pivot.  The bug was without consequence unless there was
a sufficient gap in the next child node which would cause an error to be
returned.

This patch set fixes these errors by removing the limit setting from
mas_skip_node() and uses the mas_data_end() for slot limits, and adds
tests for all failures discovered.


This patch (of 2):

mas_skip_node() is used to move the maple state to the node with a higher
limit.  It does this by walking up the tree and increasing the slot count.
Since slot count may not be able to be increased, it may need to walk up
multiple times to find room to walk right to a higher limit node.  The
limit of slots that was being used was the node limit and not the last
location of data in the node.  This would cause the maple state to be
shifted outside actual data and enter an error state, thus returning
-EBUSY.

The result of the incorrect error state means that mas_awalk() would
return an error instead of finding the allocation space.

The fix is to use mas_data_end() in mas_skip_node() to detect the nodes
data end point and continue walking the tree up until it is safe to move
to a node with a higher limit.

The walk up the tree also sets the maple state limits so remove the buggy
code from mas_skip_node().  Setting the limits had the unfortunate side
effect of triggering another bug if the parent node was full and the there
was no suitable gap in the second last child, but room in the next child.

mas_skip_node() may also be passed a maple state in an error state from
mas_anode_descend() when no allocations are available.  Return on such an
error state immediately.

Link: https://lkml.kernel.org/r/20230307180247.2220303-1-Liam.Howlett@oracle.com
Link: https://lkml.kernel.org/r/20230307180247.2220303-2-Liam.Howlett@oracle.com
Fixes: 54a611b60590 ("Maple Tree: add new data structure")
Signed-off-by: Liam R. Howlett &lt;Liam.Howlett@oracle.com&gt;
Reported-by: Snild Dolkow &lt;snild@sony.com&gt;
  Link: https://lore.kernel.org/linux-mm/cb8dc31a-fef2-1d09-f133-e9f7b9f9e77a@sony.com/
Tested-by: Snild Dolkow &lt;snild@sony.com&gt;
Cc: Peng Zhang &lt;zhangpeng.00@bytedance.com&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 17:18:31 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e9c3cda4d86e56bf7fe403729f38c4f0f65d3860">mm, vmalloc: fix high order __GFP_NOFAIL allocations</a></td><td>Michal Hocko</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+23</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Gao Xiang has reported that the page allocator complains about high order
__GFP_NOFAIL request coming from the vmalloc core:

 __alloc_pages+0x1cb/0x5b0 mm/page_alloc.c:5549
 alloc_pages+0x1aa/0x270 mm/mempolicy.c:2286
 vm_area_alloc_pages mm/vmalloc.c:2989 [inline]
 __vmalloc_area_node mm/vmalloc.c:3057 [inline]
 __vmalloc_node_range+0x978/0x13c0 mm/vmalloc.c:3227
 kvmalloc_node+0x156/0x1a0 mm/util.c:606
 kvmalloc include/linux/slab.h:737 [inline]
 kvmalloc_array include/linux/slab.h:755 [inline]
 kvcalloc include/linux/slab.h:760 [inline]

it seems that I have completely missed high order allocation backing
vmalloc areas case when implementing __GFP_NOFAIL support.  This means
that [k]vmalloc at al.  can allocate higher order allocations with
__GFP_NOFAIL which can trigger OOM killer for non-costly orders easily or
cause a lot of reclaim/compaction activity if those requests cannot be
satisfied.

Fix the issue by falling back to zero order allocations for __GFP_NOFAIL
requests if the high order request fails.

Link: https://lkml.kernel.org/r/ZAXynvdNqcI0f6Us@dhcp22.suse.cz
Fixes: 9376130c390a ("mm/vmalloc: add support for __GFP_NOFAIL")
Reported-by: Gao Xiang &lt;hsiangkao@linux.alibaba.com&gt;
  Link: https://lkml.kernel.org/r/20230305053035.1911-1-hsiangkao@linux.alibaba.com
Signed-off-by: Michal Hocko &lt;mhocko@suse.com&gt;
Reviewed-by: Uladzislau Rezki (Sony) &lt;urezki@gmail.com&gt;
Acked-by: Vlastimil Babka &lt;vbabka@suse.cz&gt;
Cc: Baoquan He &lt;bhe@redhat.com&gt;
Cc: Christoph Hellwig &lt;hch@lst.de&gt;
Cc: Mel Gorman &lt;mgorman@techsingularity.net&gt;
Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 16:03:33 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1b4ae19e432dfec785d980993c09593cbb182754">Merge tag 'for-netdev' of ↵</a></td><td>Jakub Kicinski</td><td>21</td><td><span class="deletions">-161</span>/<span class="insertions">+238</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
https://git.kernel.org/pub/scm/linux/kernel/git/bpf/bpf

Daniel Borkmann says:

====================
pull-request: bpf 2023-03-23

We've added 8 non-merge commits during the last 13 day(s) which contain
a total of 21 files changed, 238 insertions(+), 161 deletions(-).

The main changes are:

1) Fix verification issues in some BPF programs due to their stack usage
   patterns, from Eduard Zingerman.

2) Fix to add missing overflow checks in xdp_umem_reg and return an error
   in such case, from Kal Conley.

3) Fix and undo poisoning of strlcpy in libbpf given it broke builds for
   libcs which provided the former like uClibc-ng, from Jesus Sanchez-Palencia.

4) Fix insufficient bpf_jit_limit default to avoid users running into hard
   to debug seccomp BPF errors, from Daniel Borkmann.

5) Fix driver return code when they don't support a bpf_xdp_metadata kfunc
   to make it unambiguous from other errors, from Jesper Dangaard Brouer.

6) Two BPF selftest fixes to address compilation errors from recent changes
   in kernel structures, from Alexei Starovoitov.

* tag 'for-netdev' of https://git.kernel.org/pub/scm/linux/kernel/git/bpf/bpf:
  xdp: bpf_xdp_metadata use EOPNOTSUPP for no driver support
  bpf: Adjust insufficient default bpf_jit_limit
  xsk: Add missing overflow check in xdp_umem_reg
  selftests/bpf: Fix progs/test_deny_namespace.c issues.
  selftests/bpf: Fix progs/find_vma_fail1.c build error.
  libbpf: Revert poisoning of strlcpy
  selftests/bpf: Tests for uninitialized stack reads
  bpf: Allow reads from uninit stack
====================

Link: https://lore.kernel.org/r/20230323225221.6082-1-daniel@iogearbox.net
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 15:56:20 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e63a2dfe73fd00e48b615ef1274a44299f57c5f">Merge tag 'for-net-2023-03-23' of ↵</a></td><td>Jakub Kicinski</td><td>11</td><td><span class="deletions">-107</span>/<span class="insertions">+206</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/bluetooth/bluetooth

Luiz Augusto von Dentz says:

====================
bluetooth pull request for net:

 - Fix MGMT add advmon with RSSI command
 - L2CAP: Fix responding with wrong PDU type
 - Fix race condition in hci_cmd_sync_clear
 - ISO: Fix timestamped HCI ISO data packet parsing
 - HCI: Fix global-out-of-bounds
 - hci_sync: Resume adv with no RPA when active scan

* tag 'for-net-2023-03-23' of git://git.kernel.org/pub/scm/linux/kernel/git/bluetooth/bluetooth:
  Bluetooth: HCI: Fix global-out-of-bounds
  Bluetooth: mgmt: Fix MGMT add advmon with RSSI command
  Bluetooth: btsdio: fix use after free bug in btsdio_remove due to unfinished work
  Bluetooth: L2CAP: Fix responding with wrong PDU type
  Bluetooth: btqcomsmd: Fix command timeout after setting BD address
  Bluetooth: btinel: Check ACPI handle for NULL before accessing
  Bluetooth: Remove "Power-on" check from Mesh feature
  Bluetooth: Fix race condition in hci_cmd_sync_clear
  Bluetooth: btintel: Iterate only bluetooth device ACPI entries
  Bluetooth: ISO: fix timestamped HCI ISO data packet parsing
  Bluetooth: btusb: Remove detection of ISO packets over bulk
  Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet
  Bluetooth: hci_sync: Resume adv with no RPA when active scan
====================

Link: https://lore.kernel.org/r/20230323202335.3380841-1-luiz.dentz@gmail.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 15:47:53 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4f44d3260536a754fcbf36f47f965147fa59a70c">Merge tag 'wireless-2023-03-23' of ↵</a></td><td>Jakub Kicinski</td><td>15</td><td><span class="deletions">-64</span>/<span class="insertions">+119</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/wireless/wireless

Kalle Valo says:

====================
wireless fixes for v6.3

Third set of fixes for v6.3. mt76 has two kernel crash fixes and
adding back 160 MHz channel support for mt7915. mac80211 has fixes for
a race in transmit path and two mesh related fixes. iwlwifi also has
fixes for races.

* tag 'wireless-2023-03-23' of git://git.kernel.org/pub/scm/linux/kernel/git/wireless/wireless:
  wifi: mac80211: fix mesh path discovery based on unicast packets
  wifi: mac80211: fix qos on mesh interfaces
  wifi: iwlwifi: mvm: protect TXQ list manipulation
  wifi: iwlwifi: mvm: fix mvmtxq-&gt;stopped handling
  wifi: mac80211: Serialize ieee80211_handle_wake_tx_queue()
  wifi: mwifiex: mark OF related data as maybe unused
  wifi: mt76: connac: do not check WED status for non-mmio devices
  wifi: mt76: mt7915: add back 160MHz channel width support for MT7915
  wifi: mt76: do not run mt76_unregister_device() on unregistered hw
====================

Link: https://lore.kernel.org/r/20230323110332.C4FE4C433D2@smtp.kernel.org
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 15:25:49 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1e760fa3596e8c7f08412712c168288b79670d78">Merge tag 'gfs2-v6.3-rc3-fix' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+18</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/gfs2/linux-gfs2

Pull gfs2 fix from Andreas Gruenbacher:

 - Reinstate commit 970343cd4904 ("GFS2: free disk inode which is
   deleted by remote node -V2") as reverting that commit could cause
   gfs2_put_super() to hang.

* tag 'gfs2-v6.3-rc3-fix' of git://git.kernel.org/pub/scm/linux/kernel/git/gfs2/linux-gfs2:
  Reinstate "GFS2: free disk inode which is deleted by remote node -V2"


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:38 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bce56405201111807cc8e4f47c6de3e10b17c1ac">Bluetooth: HCI: Fix global-out-of-bounds</a></td><td>Sungwoo Kim</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
To loop a variable-length array, hci_init_stage_sync(stage) considers
that stage[i] is valid as long as stage[i-1].func is valid.
Thus, the last element of stage[].func should be intentionally invalid
as hci_init0[], le_init2[], and others did.
However, amp_init1[] and amp_init2[] have no invalid element, letting
hci_init_stage_sync() keep accessing amp_init1[] over its valid range.
This patch fixes this by adding {} in the last of amp_init1[] and
amp_init2[].

==================================================================
BUG: KASAN: global-out-of-bounds in hci_dev_open_sync (
/v6.2-bzimage/net/bluetooth/hci_sync.c:3154
/v6.2-bzimage/net/bluetooth/hci_sync.c:3343
/v6.2-bzimage/net/bluetooth/hci_sync.c:4418
/v6.2-bzimage/net/bluetooth/hci_sync.c:4609
/v6.2-bzimage/net/bluetooth/hci_sync.c:4689)
Read of size 8 at addr ffffffffaed1ab70 by task kworker/u5:0/1032
CPU: 0 PID: 1032 Comm: kworker/u5:0 Not tainted 6.2.0 #3
Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.15.0-1 04
Workqueue: hci1 hci_power_on
Call Trace:
 &lt;TASK&gt;
dump_stack_lvl (/v6.2-bzimage/lib/dump_stack.c:107 (discriminator 1))
print_report (/v6.2-bzimage/mm/kasan/report.c:307
  /v6.2-bzimage/mm/kasan/report.c:417)
? hci_dev_open_sync (/v6.2-bzimage/net/bluetooth/hci_sync.c:3154
  /v6.2-bzimage/net/bluetooth/hci_sync.c:3343
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4418
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4609
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4689)
kasan_report (/v6.2-bzimage/mm/kasan/report.c:184
  /v6.2-bzimage/mm/kasan/report.c:519)
? hci_dev_open_sync (/v6.2-bzimage/net/bluetooth/hci_sync.c:3154
  /v6.2-bzimage/net/bluetooth/hci_sync.c:3343
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4418
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4609
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4689)
hci_dev_open_sync (/v6.2-bzimage/net/bluetooth/hci_sync.c:3154
  /v6.2-bzimage/net/bluetooth/hci_sync.c:3343
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4418
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4609
  /v6.2-bzimage/net/bluetooth/hci_sync.c:4689)
? __pfx_hci_dev_open_sync (/v6.2-bzimage/net/bluetooth/hci_sync.c:4635)
? mutex_lock (/v6.2-bzimage/./arch/x86/include/asm/atomic64_64.h:190
  /v6.2-bzimage/./include/linux/atomic/atomic-long.h:443
  /v6.2-bzimage/./include/linux/atomic/atomic-instrumented.h:1781
  /v6.2-bzimage/kernel/locking/mutex.c:171
  /v6.2-bzimage/kernel/locking/mutex.c:285)
? __pfx_mutex_lock (/v6.2-bzimage/kernel/locking/mutex.c:282)
hci_power_on (/v6.2-bzimage/net/bluetooth/hci_core.c:485
  /v6.2-bzimage/net/bluetooth/hci_core.c:984)
? __pfx_hci_power_on (/v6.2-bzimage/net/bluetooth/hci_core.c:969)
? read_word_at_a_time (/v6.2-bzimage/./include/asm-generic/rwonce.h:85)
? strscpy (/v6.2-bzimage/./arch/x86/include/asm/word-at-a-time.h:62
  /v6.2-bzimage/lib/string.c:161)
process_one_work (/v6.2-bzimage/kernel/workqueue.c:2294)
worker_thread (/v6.2-bzimage/./include/linux/list.h:292
  /v6.2-bzimage/kernel/workqueue.c:2437)
? __pfx_worker_thread (/v6.2-bzimage/kernel/workqueue.c:2379)
kthread (/v6.2-bzimage/kernel/kthread.c:376)
? __pfx_kthread (/v6.2-bzimage/kernel/kthread.c:331)
ret_from_fork (/v6.2-bzimage/arch/x86/entry/entry_64.S:314)
 &lt;/TASK&gt;
The buggy address belongs to the variable:
amp_init1+0x30/0x60
The buggy address belongs to the physical page:
page:000000003a157ec6 refcount:1 mapcount:0 mapping:0000000000000000 ia
flags: 0x200000000001000(reserved|node=0|zone=2)
raw: 0200000000001000 ffffea0005054688 ffffea0005054688 000000000000000
raw: 0000000000000000 0000000000000000 00000001ffffffff 000000000000000
page dumped because: kasan: bad access detected
Memory state around the buggy address:
 ffffffffaed1aa00: f9 f9 f9 f9 00 00 00 00 f9 f9 f9 f9 00 00 00 00
 ffffffffaed1aa80: 00 00 00 00 f9 f9 f9 f9 00 00 00 00 00 00 00 00
&gt;ffffffffaed1ab00: 00 f9 f9 f9 f9 f9 f9 f9 00 00 00 00 00 00 f9 f9
                                                             ^
 ffffffffaed1ab80: f9 f9 f9 f9 00 00 00 00 f9 f9 f9 f9 00 00 00 f9
 ffffffffaed1ac00: f9 f9 f9 f9 00 06 f9 f9 f9 f9 f9 f9 00 00 02 f9

This bug is found by FuzzBT, a modified version of Syzkaller.
Other contributors for this bug are Ruoyu Wu and Peng Hui.

Fixes: d0b137062b2d ("Bluetooth: hci_sync: Rework init stages")
Signed-off-by: Sungwoo Kim &lt;iam@sung-woo.kim&gt;
Reviewed-by: Simon Horman &lt;simon.horman@corigine.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:38 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a0291f81529e8044fb29845a0196ba47af894ce">Bluetooth: mgmt: Fix MGMT add advmon with RSSI command</a></td><td>Howard Chung</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The MGMT command: MGMT_OP_ADD_ADV_PATTERNS_MONITOR_RSSI uses variable
length argument. This causes host not able to register advmon with rssi.

This patch has been locally tested by adding monitor with rssi via
btmgmt on a kernel 6.1 machine.

Reviewed-by: Archie Pusaka &lt;apusaka@chromium.org&gt;
Fixes: b338d91703fa ("Bluetooth: Implement support for Mesh")
Signed-off-by: Howard Chung &lt;howardchung@google.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:38 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1e9ac114c4428fdb7ff4635b45d4f46017e8916f">Bluetooth: btsdio: fix use after free bug in btsdio_remove due to unfinished ↵</a></td><td>Zheng Wang</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
work

In btsdio_probe, &amp;data-&gt;work was bound with btsdio_work.In
btsdio_send_frame, it was started by schedule_work.

If we call btsdio_remove with an unfinished job, there may
be a race condition and cause UAF bug on hdev.

Fixes: ddbaf13e3609 ("[Bluetooth] Add generic driver for Bluetooth SDIO devices")
Signed-off-by: Zheng Wang &lt;zyytlz.wz@163.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:38 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9aa9d9473f1550d1936c31259720b3f1f4690576">Bluetooth: L2CAP: Fix responding with wrong PDU type</a></td><td>Luiz Augusto von Dentz</td><td>1</td><td><span class="deletions">-38</span>/<span class="insertions">+79</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
L2CAP_ECRED_CONN_REQ shall be responded with L2CAP_ECRED_CONN_RSP not
L2CAP_LE_CONN_RSP:

L2CAP LE EATT Server - Reject - run
  Listening for connections
  New client connection with handle 0x002a
  Sending L2CAP Request from client
  Client received response code 0x15
  Unexpected L2CAP response code (expected 0x18)
L2CAP LE EATT Server - Reject - test failed

&gt; ACL Data RX: Handle 42 flags 0x02 dlen 26
      LE L2CAP: Enhanced Credit Connection Request (0x17) ident 1 len 18
        PSM: 39 (0x0027)
        MTU: 64
        MPS: 64
        Credits: 5
        Source CID: 65
        Source CID: 66
        Source CID: 67
        Source CID: 68
        Source CID: 69
&lt; ACL Data TX: Handle 42 flags 0x00 dlen 16
      LE L2CAP: LE Connection Response (0x15) ident 1 len 8
        invalid size
        00 00 00 00 00 00 06 00

L2CAP LE EATT Server - Reject - run
  Listening for connections
  New client connection with handle 0x002a
  Sending L2CAP Request from client
  Client received response code 0x18
L2CAP LE EATT Server - Reject - test passed

Fixes: 15f02b910562 ("Bluetooth: L2CAP: Add initial code for Enhanced Credit Based Mode")
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:38 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5d44ab9e204200a78ad55cdf185aa2bb109b5950">Bluetooth: btqcomsmd: Fix command timeout after setting BD address</a></td><td>Stephan Gerhold</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+16</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
On most devices using the btqcomsmd driver (e.g. the DragonBoard 410c
and other devices based on the Qualcomm MSM8916/MSM8909/... SoCs)
the Bluetooth firmware seems to become unresponsive for a while after
setting the BD address. On recent kernel versions (at least 5.17+)
this often causes timeouts for subsequent commands, e.g. the HCI reset
sent by the Bluetooth core during initialization:

    Bluetooth: hci0: Opcode 0x c03 failed: -110

Unfortunately this behavior does not seem to be documented anywhere.
Experimentation suggests that the minimum necessary delay to avoid
the problem is ~150us. However, to be sure add a sleep for &gt; 1ms
in case it is a bit longer on other firmware versions.

Older kernel versions are likely also affected, although perhaps with
slightly different errors or less probability. Side effects can easily
hide the issue in most cases, e.g. unrelated incoming interrupts that
cause the necessary delay.

Fixes: 1511cc750c3d ("Bluetooth: Introduce Qualcomm WCNSS SMD based HCI driver")
Signed-off-by: Stephan Gerhold &lt;stephan.gerhold@kernkonzept.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:09:26 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=902160cdb2bf4d23cd75f43ed0597ddf0134bb89">Bluetooth: btinel: Check ACPI handle for NULL before accessing</a></td><td>Kiran K</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+9</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Older platforms and Virtual platforms which doesn't have support for
bluetooth device in ACPI firmware will not have valid ACPI handle.
Check for validity of handle before accessing.

dmesg log from simics environment (virtual platform):

BUG: unable to handle kernel NULL pointer dereference at
0000000000000018
IP: acpi_ns_walk_namespace+0x5c/0x278
PGD 0 P4D 0
Oops: 0000 [#1] SMP PTI
Modules linked in: bnep intel_powerclamp coretemp kvm_intel
kvm irqbypass intel_cstate input_leds joydev serio_raw mac_hid
btusb(OE) btintel(OE) bluetooth(OE) lpc_ich compat(OE) ecdh_generic
i7core_edac i5500_temp shpchp binfmt_misc sch_fq_codel parport_pc ppdev
lp parport ip_tables x_tables autofs4 hid_generic usbhid hid e1000e
psmouse ahci pata_acpi libahci ptp pps_core floppy
CPU: 0 PID: 35 Comm: kworker/u3:0 Tainted: G           OE
4.15.0-140-generic #144-Ubuntu
Hardware name: Simics Simics, BIOS Simics 01/01/2011
Workqueue: hci0 hci_power_on [bluetooth]
RIP: 0010:acpi_ns_walk_namespace+0x5c/0x278
RSP: 0000:ffffaa9c0049bba8 EFLAGS: 00010246
RAX: 0000000000000001 RBX: 0000000000001001 RCX: 0000000000000010
RDX: ffffffff92ea7e27 RSI: ffffffff92ea7e10 RDI: 00000000000000c8
RBP: ffffaa9c0049bbf8 R08: 0000000000000000 R09: ffffffffc05b39d0
R10: 0000000000000000 R11: 0000000000000001 R12: 0000000000000001
R13: 0000000000000000 R14: ffffffffc05b39d0 R15: ffffaa9c0049bc70
FS:  0000000000000000(0000) GS:ffff8be73fc00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 0000000000000018 CR3: 0000000075f0e000 CR4: 00000000000006f0

Fixes: 294d749b5df5 ("Bluetooth: btintel: Iterate only bluetooth device ACPI entries")
Signed-off-by: Kiran K &lt;kiran.k@intel.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 12:52:49 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e89c2e815e76471cb507bd95728bf26da7976430">riscv: Handle zicsr/zifencei issues between clang and binutils</a></td><td>Nathan Chancellor</td><td>2</td><td><span class="deletions">-4</span>/<span class="insertions">+28</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
There are two related issues that appear in certain combinations with
clang and GNU binutils.

The first occurs when a version of clang that supports zicsr or zifencei
via '-march=' [1] (i.e, &gt;= 17.x) is used in combination with a version
of GNU binutils that do not recognize zicsr and zifencei in the
'-march=' value (i.e., &lt; 2.36):

  riscv64-linux-gnu-ld: -march=rv64i2p0_m2p0_a2p0_c2p0_zicsr2p0_zifencei2p0: Invalid or unknown z ISA extension: 'zifencei'
  riscv64-linux-gnu-ld: failed to merge target specific data of file fs/efivarfs/file.o
  riscv64-linux-gnu-ld: -march=rv64i2p0_m2p0_a2p0_c2p0_zicsr2p0_zifencei2p0: Invalid or unknown z ISA extension: 'zifencei'
  riscv64-linux-gnu-ld: failed to merge target specific data of file fs/efivarfs/super.o

The second occurs when a version of clang that does not support zicsr or
zifencei via '-march=' (i.e., &lt;= 16.x) is used in combination with a
version of GNU as that defaults to a newer ISA base spec, which requires
specifying zicsr and zifencei in the '-march=' value explicitly (i.e, &gt;=
2.38):

  ../arch/riscv/kernel/kexec_relocate.S: Assembler messages:
  ../arch/riscv/kernel/kexec_relocate.S:147: Error: unrecognized opcode `fence.i', extension `zifencei' required
  clang-12: error: assembler command failed with exit code 1 (use -v to see invocation)

This is the same issue addressed by commit 6df2a016c0c8 ("riscv: fix
build with binutils 2.38") (see [2] for additional information) but
older versions of clang miss out on it because the cc-option check
fails:

  clang-12: error: invalid arch name 'rv64imac_zicsr_zifencei', unsupported standard user-level extension 'zicsr'
  clang-12: error: invalid arch name 'rv64imac_zicsr_zifencei', unsupported standard user-level extension 'zicsr'

To resolve the first issue, only attempt to add zicsr and zifencei to
the march string when using the GNU assembler 2.38 or newer, which is
when the default ISA spec was updated, requiring these extensions to be
specified explicitly. LLVM implements an older version of the base
specification for all currently released versions, so these instructions
are available as part of the 'i' extension. If LLVM's implementation is
updated in the future, a CONFIG_AS_IS_LLVM condition can be added to
CONFIG_TOOLCHAIN_NEEDS_EXPLICIT_ZICSR_ZIFENCEI.

To resolve the second issue, use version 2.2 of the base ISA spec when
using an older version of clang that does not support zicsr or zifencei
via '-march=', as that is the spec version most compatible with the one
clang/LLVM implements and avoids the need to specify zicsr and zifencei
explicitly due to still being a part of 'i'.

[1]: https://github.com/llvm/llvm-project/commit/22e199e6afb1263c943c0c0d4498694e15bf8a16
[2]: https://lore.kernel.org/ZAxT7T9Xy1Fo3d5W@aurel32.net/

Cc: stable@vger.kernel.org
Link: https://github.com/ClangBuiltLinux/linux/issues/1808
Co-developed-by: Conor Dooley &lt;conor.dooley@microchip.com&gt;
Signed-off-by: Conor Dooley &lt;conor.dooley@microchip.com&gt;
Signed-off-by: Nathan Chancellor &lt;nathan@kernel.org&gt;
Acked-by: Conor Dooley &lt;conor.dooley@microchip.com&gt;
Link: https://lore.kernel.org/r/20230313-riscv-zicsr-zifencei-fiasco-v1-1-dd1b7840a551@kernel.org
Signed-off-by: Palmer Dabbelt &lt;palmer@rivosinc.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 13:02:20 -0600">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f915da0f0dfb69ffea53f62101b38073e0b81f73">Merge tag 'nvme-6.3-2023-03-23' of git://git.infradead.org/nvme into block-6.3</a></td><td>Jens Axboe</td><td>2</td><td><span class="deletions">-3</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull NVMe fixes from Christoph:

"nvme fixes for Linux 6.3

 - send Identify with CNS 06h only to I/O controllers (Martin George)
 - fix nvme_tcp_term_pdu to match spec (Caleb Sander)"

* tag 'nvme-6.3-2023-03-23' of git://git.infradead.org/nvme:
  nvme-tcp: fix nvme_tcp_term_pdu to match spec
  nvme: send Identify with CNS 06h only to I/O controllers


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 19:37:56 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=260595b439776c473cc248f0de63fe78d964d849">Reinstate "GFS2: free disk inode which is deleted by remote node -V2"</a></td><td>Bob Peterson</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+18</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
It turns out that reverting commit 970343cd4904 ("GFS2: free disk inode
which is deleted by remote node -V2") causes a regression related to
evicting inodes that were unlinked on a different cluster node.

We could also have simply added a call to d_mark_dontcache() to function
gfs2_try_evict(), but the original pre-revert code is better tested and
proven.

This reverts commit 445cb1277e10d7e19b631ef8a64aa3f055df377d.

Signed-off-by: Bob Peterson &lt;rpeterso@redhat.com&gt;
Signed-off-by: Andreas Gruenbacher &lt;agruenba@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 19:13:16 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5021383242ada277a38bd052a4c12ed4707faccb">usb: dwc2: fix a race, don't power off/on phy for dual-role mode</a></td><td>Fabrice Gasnier</td><td>2</td><td><span class="deletions">-6</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When in dual role mode (dr_mode == USB_DR_MODE_OTG), platform probe
successively basically calls:
- dwc2_gadget_init()
- dwc2_hcd_init()
- dwc2_lowlevel_hw_disable() since recent change [1]
- usb_add_gadget_udc()

The PHYs (and so the clocks it may provide) shouldn't be disabled for all
SoCs, in OTG mode, as the HCD part has been initialized.

On STM32 this creates some weird race condition upon boot, when:
- initially attached as a device, to a HOST
- and there is a gadget script invoked to setup the device part.
Below issue becomes systematic, as long as the gadget script isn't
started by userland: the hardware PHYs (and so the clocks provided by the
PHYs) remains disabled.
It ends up in having an endless interrupt storm, before the watchdog
resets the platform.

[   16.924163] dwc2 49000000.usb-otg: EPs: 9, dedicated fifos, 952 entries in SPRAM
[   16.962704] dwc2 49000000.usb-otg: DWC OTG Controller
[   16.966488] dwc2 49000000.usb-otg: new USB bus registered, assigned bus number 2
[   16.974051] dwc2 49000000.usb-otg: irq 77, io mem 0x49000000
[   17.032170] hub 2-0:1.0: USB hub found
[   17.042299] hub 2-0:1.0: 1 port detected
[   17.175408] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
[   17.181741] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
[   17.189303] dwc2 49000000.usb-otg: Mode Mismatch Interrupt: currently in Host mode
...

The host part is also not functional, until the gadget part is configured.

The HW may only be disabled for peripheral mode (original init), e.g.
dr_mode == USB_DR_MODE_PERIPHERAL, until the gadget driver initializes.

But when in USB_DR_MODE_OTG, the HW should remain enabled, as the HCD part
is able to run, while the gadget part isn't necessarily configured.

I don't fully get the of purpose the original change, that claims disabling
the hardware is missing. It creates conditions on SOCs using the PHY
initialization to be completely non working in OTG mode. Original
change [1] should be reworked to be platform specific.

[1] https://lore.kernel.org/r/20221206-dwc2-gadget-dual-role-v1-2-36515e1092cd@theobroma-systems.com

Fixes: ade23d7b7ec5 ("usb: dwc2: power on/off phy for peripheral mode in dual-role mode")
Cc: stable &lt;stable@kernel.org&gt;
Signed-off-by: Fabrice Gasnier &lt;fabrice.gasnier@foss.st.com&gt;
Reviewed-by: Quentin Schulz &lt;quentin.schulz@theobroma-systems.com&gt;
Tested-by: Quentin Schulz &lt;quentin.schulz@theobroma-systems.com&gt;
Link: https://lore.kernel.org/r/20230315144433.3095859-1-fabrice.gasnier@foss.st.com
Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 19:12:55 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f747313249b74f323ddf841a9c8db14d989f296a">usb: dwc2: fix a devres leak in hw_enable upon suspend resume</a></td><td>Fabrice Gasnier</td><td>1</td><td><span class="deletions">-14</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Each time the platform goes to low power, PM suspend / resume routines
call: __dwc2_lowlevel_hw_enable -&gt; devm_add_action_or_reset().
This adds a new devres each time.
This may also happen at runtime, as dwc2_lowlevel_hw_enable() can be
called from udc_start().

This can be seen with tracing:
- echo 1 &gt; /sys/kernel/debug/tracing/events/dev/devres_log/enable
- go to low power
- cat /sys/kernel/debug/tracing/trace

A new "ADD" entry is found upon each low power cycle:
... devres_log: 49000000.usb-otg ADD 82a13bba devm_action_release (8 bytes)
... devres_log: 49000000.usb-otg ADD 49889daf devm_action_release (8 bytes)
...

A second issue is addressed here:
- regulator_bulk_enable() is called upon each PM cycle (suspend/resume).
- regulator_bulk_disable() never gets called.

So the reference count for these regulators constantly increase, by one
upon each low power cycle, due to missing regulator_bulk_disable() call
in __dwc2_lowlevel_hw_disable().

The original fix that introduced the devm_add_action_or_reset() call,
fixed an issue during probe, that happens due to other errors in
dwc2_driver_probe() -&gt; dwc2_core_reset(). Then the probe fails without
disabling regulators, when dr_mode == USB_DR_MODE_PERIPHERAL.

Rather fix the error path: disable all the low level hardware in the
error path, by using the "hsotg-&gt;ll_hw_enabled" flag. Checking dr_mode
has been introduced to avoid a dual call to dwc2_lowlevel_hw_disable().
"ll_hw_enabled" should achieve the same (and is used currently in the
remove() routine).

Fixes: 54c196060510 ("usb: dwc2: Always disable regulators on driver teardown")
Fixes: 33a06f1300a7 ("usb: dwc2: Fix error path in gadget registration")
Cc: stable &lt;stable@kernel.org&gt;
Signed-off-by: Fabrice Gasnier &lt;fabrice.gasnier@foss.st.com&gt;
Link: https://lore.kernel.org/r/20230316084127.126084-1-fabrice.gasnier@foss.st.com
Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 11:05:08 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9fd6ba5420ba2b637d1ecc6de8613ec8b9c87e5a">Merge tag 'zonefs-6.3-rc4' of ↵</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/dlemoal/zonefs

Pull zonefs fixes from Damien Le Moal:

 - Silence a false positive smatch warning about an uninitialized
   variable

 - Fix an error message to provide more useful information about invalid
   zone append write results

* tag 'zonefs-6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/dlemoal/zonefs:
  zonefs: Fix error message in zonefs_file_dio_append()
  zonefs: Prevent uninitialized symbol 'size' warning


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 18:17:32 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=451b15ed138ec15bffbebb58a00ebdd884c3e659">usb: chipidea: core: fix possible concurrent when switch role</a></td><td>Xu Yang</td><td>3</td><td><span class="deletions">-2</span>/<span class="insertions">+13</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The user may call role_store() when driver is handling
ci_handle_id_switch() which is triggerred by otg event or power lost
event. Unfortunately, the controller may go into chaos in this case.
Fix this by protecting it with mutex lock.

Fixes: a932a8041ff9 ("usb: chipidea: core: add sysfs group")
cc: &lt;stable@vger.kernel.org&gt;
Acked-by: Peter Chen &lt;peter.chen@kernel.org&gt;
Signed-off-by: Xu Yang &lt;xu.yang_2@nxp.com&gt;
Link: https://lore.kernel.org/r/20230317061516.2451728-2-xu.yang_2@nxp.com
Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 18:17:32 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3670de80678961eda7fa2220883fc77c16868951">usb: chipdea: core: fix return -EINVAL if request role is the same with ↵</a></td><td>Xu Yang</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
current role

It should not return -EINVAL if the request role is the same with current
role, return non-error and without do anything instead.

Fixes: a932a8041ff9 ("usb: chipidea: core: add sysfs group")
cc: &lt;stable@vger.kernel.org&gt;
Acked-by: Peter Chen &lt;peter.chen@kernel.org&gt;
Signed-off-by: Xu Yang &lt;xu.yang_2@nxp.com&gt;
Link: https://lore.kernel.org/r/20230317061516.2451728-1-xu.yang_2@nxp.com
Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 11:19:42 -0500">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=175b54abc443b6965e9379b71ec05f7c73c192e9">cifs: print session id while listing open files</a></td><td>Shyam Prasad N</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In the output of /proc/fs/cifs/open_files, we only print
the tree id for the tcon of each open file. It becomes
difficult to know which tcon these files belong to with
just the tree id.

This change dumps ses id in addition to all other data today.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 11:19:42 -0500">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d12bc6d26f92c51b28e8f4a146ffcc630b688198">cifs: dump pending mids for all channels in DebugData</a></td><td>Shyam Prasad N</td><td>1</td><td><span class="deletions">-14</span>/<span class="insertions">+27</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Currently, we only dump the pending mid information only
on the primary channel in /proc/fs/cifs/DebugData.
If multichannel is active, we do not print the pending MID
list on secondary channels.

This change will dump the pending mids for all the channels
based on server-&gt;conn_id.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 11:19:42 -0500">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=896cd316b841053f6df95ab77b5f1322c16a8e18">cifs: empty interface list when server doesn't support query interfaces</a></td><td>Shyam Prasad N</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When querying server interfaces returns -EOPNOTSUPP,
clear the list of interfaces. Assumption is that multichannel
would be disabled too.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 11:19:42 -0500">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=072a28c8907c841f7d4b56c78bce46d3ee211e73">cifs: do not poll server interfaces too regularly</a></td><td>Shyam Prasad N</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+14</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
We have the server interface list hanging off the tcon
structure today for reasons unknown. So each tcon which is
connected to a file server can query them separately,
which is really unnecessary. To avoid this, in the query
function, we will check the time of last update of the
interface list, and avoid querying the server if it is
within a certain range.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 15:15:45 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0b1d9debe30304f35c1211e6dcdca1935ce67240">efi/libstub: randomalloc: Return EFI_OUT_OF_RESOURCES on failure</a></td><td>Ard Biesheuvel</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The logic in efi_random_alloc() will iterate over the memory map twice,
once to count the number of candidate slots, and another time to locate
the chosen slot after randomization.

If there is insufficient memory to do the allocation, the second loop
will run to completion without actually having located a slot, but we
currently return EFI_SUCCESS in this case, as we fail to initialize
status to the appropriate error value of EFI_OUT_OF_RESOURCES.

Signed-off-by: Ard Biesheuvel &lt;ardb@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:39:34 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f9537b1fa7fb51c2162bc15ce469cbbf1ca0fbfe">drm/amd/display: Set dcn32 caps.seamless_odm</a></td><td>Hersen Wu</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
[Why &amp; How]
seamless_odm set was not picked up while
merging commit 2d017189e2b3 ("drm/amd/display:
Blank eDP on enable drv if odm enabled")

Fixes: 2d017189e2b3 ("drm/amd/display: Blank eDP on enable drv if odm enabled")
Reviewed-by: Qingqing Zhuo &lt;qingqing.zhuo@amd.com&gt;
Acked-by: Qingqing Zhuo &lt;qingqing.zhuo@amd.com&gt;
Signed-off-by: Hersen Wu &lt;hersenxs.wu@amd.com&gt;
Tested-by: Daniel Wheeler &lt;daniel.wheeler@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:39:34 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4c94e57c258cb7800aa5f3a9d9597d91291407a9">drm/amd/display: fix wrong index used in dccg32_set_dpstreamclk</a></td><td>Hersen Wu</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
[Why &amp; How]
When merging commit 9af611f29034
("drm/amd/display: Fix DCN32 DPSTREAMCLK_CNTL programming"),
index change was not picked up.

Cc: stable@vger.kernel.org
Cc: Mario Limonciello &lt;mario.limonciello@amd.com&gt;
Fixes: 9af611f29034 ("drm/amd/display: Fix DCN32 DPSTREAMCLK_CNTL programming")
Reviewed-by: Qingqing Zhuo &lt;qingqing.zhuo@amd.com&gt;
Acked-by: Qingqing Zhuo &lt;qingqing.zhuo@amd.com&gt;
Signed-off-by: Hersen Wu &lt;hersenxs.wu@amd.com&gt;
Tested-by: Daniel Wheeler &lt;daniel.wheeler@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:34:35 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2b072442f4962231a8516485012bb2d2551ef2fe">drm/amdgpu/nv: Apply ASPM quirk on Intel ADL + AMD Navi</a></td><td>Kai-Heng Feng</td><td>4</td><td><span class="deletions">-17</span>/<span class="insertions">+18</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
S2idle resume freeze can be observed on Intel ADL + AMD WX5500. This is
caused by commit 0064b0ce85bb ("drm/amd/pm: enable ASPM by default").

The root cause is still not clear for now.

So extend and apply the ASPM quirk from commit e02fe3bc7aba
("drm/amdgpu: vi: disable ASPM on Intel Alder Lake based systems"), to
workaround the issue on Navi cards too.

Fixes: 0064b0ce85bb ("drm/amd/pm: enable ASPM by default")
Link: https://gitlab.freedesktop.org/drm/amd/-/issues/2458
Reviewed-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Signed-off-by: Kai-Heng Feng &lt;kai.heng.feng@canonical.com&gt;
Reviewed-by: Mario Limonciello &lt;mario.limonciello@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Cc: stable@vger.kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:34:07 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6d457ca162da98a6a1a381320e936d7448177de9">drm/amd/display: remove outdated 8bpc comments</a></td><td>Alex Hung</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+0</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
[Why]
The commit c76e483cd916 ("drm/amd/display: Don't restrict bpc to 8 bpc")
removes the historical 8bpc dependency and sets max_bpc to 16.

[How]
The comment that states "8bpc for non-edp" needs to be removed as well.

Reviewed-by: Harry Wentland &lt;Harry.Wentland@amd.com&gt;
Acked-by: Qingqing Zhuo &lt;qingqing.zhuo@amd.com&gt;
Signed-off-by: Alex Hung &lt;alex.hung@amd.com&gt;
Tested-by: Daniel Wheeler &lt;daniel.wheeler@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:32:01 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e06bfcc1a1c41bcb8c31470d437e147ce9f0acfd">drm/amdgpu/gfx: set cg flags to enter/exit safe mode</a></td><td>Jane Jian</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
sriov needs to enter/exit safe mode in update umd p state
add the cg flag to let it enter or exit while needed

Signed-off-by: Jane Jian &lt;Jane.Jian@amd.com&gt;
Reviewed-by: Lijo Lazar &lt;lijo.lazar@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:31:30 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=033c56474acf567a450f8bafca50e0b610f2b716">drm/amdgpu: Force signal hw_fences that are embedded in non-sched jobs</a></td><td>YuBiao Wang</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+9</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
[Why]
For engines not supporting soft reset, i.e. VCN, there will be a failed
ib test before mode 1 reset during asic reset. The fences in this case
are never signaled and next time when we try to free the sa_bo, kernel
will hang.

[How]
During pre_asic_reset, driver will clear job fences and afterwards the
fences' refcount will be reduced to 1. For drm_sched_jobs it will be
released in job_free_cb, and for non-sched jobs like ib_test, it's meant
to be released in sa_bo_free but only when the fences are signaled. So
we have to force signal the non_sched bad job's fence during
pre_asic_reset or the clear is not complete.

Signed-off-by: YuBiao Wang &lt;YuBiao.Wang@amd.com&gt;
Acked-by: Luben Tuikov &lt;luben.tuikov@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:30:59 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4eb0b49a0ad3e004a6a65b84efe37bc7e66d560f">drm/amdgpu: add mes resume when do gfx post soft reset</a></td><td>Tong Liu01</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+9</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
[why]
when gfx do soft reset, mes will also do reset, if mes is not
resumed when do recover from soft reset, mes is unable to respond
in later sequence

[how]
resume mes when do gfx post soft reset

Signed-off-by: Tong Liu01 &lt;Tong.Liu01@amd.com&gt;
Acked-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:29:55 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b589626674de94d977e81c99bf7905872b991197">drm/amdgpu: skip ASIC reset for APUs when go to S4</a></td><td>Tim Huang</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
For GC IP v11.0.4/11, PSP TMR need to be reserved
for ASIC mode2 reset. But for S4, when psp suspend,
it will destroy the TMR that fails the ASIC reset.

[  96.006101] amdgpu 0000:62:00.0: amdgpu: MODE2 reset
[  100.409717] amdgpu 0000:62:00.0: amdgpu: SMU: I'm not done with your previous command: SMN_C2PMSG_66:0x00000011 SMN_C2PMSG_82:0x00000002
[  100.411593] amdgpu 0000:62:00.0: amdgpu: Mode2 reset failed!
[  100.412470] amdgpu 0000:62:00.0: PM: pci_pm_freeze(): amdgpu_pmops_freeze+0x0/0x50 [amdgpu] returns -62
[  100.414020] amdgpu 0000:62:00.0: PM: dpm_run_callback(): pci_pm_freeze+0x0/0xd0 returns -62
[  100.415311] amdgpu 0000:62:00.0: PM: pci_pm_freeze+0x0/0xd0 returned -62 after 4623202 usecs
[  100.416608] amdgpu 0000:62:00.0: PM: failed to freeze async: error -62

We can skip the reset on APUs, assuming we can resume them
properly. Verified on some GFX11, GFX10 and old GFX9 APUs.

Signed-off-by: Tim Huang &lt;tim.huang@amd.com&gt;
Reviewed-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Cc: stable@vger.kernel.org # 6.1.x


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 09:29:32 -0400">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aaee0ce460b954e08b6e630d7e54b2abb672feb8">drm/amdgpu: reposition the gpu reset checking for reuse</a></td><td>Tim Huang</td><td>2</td><td><span class="deletions">-20</span>/<span class="insertions">+25</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Move the amdgpu_acpi_should_gpu_reset out of
CONFIG_SUSPEND to share it with hibernate case.

Signed-off-by: Tim Huang &lt;tim.huang@amd.com&gt;
Reviewed-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Signed-off-by: Alex Deucher &lt;alexander.deucher@amd.com&gt;
Cc: stable@vger.kernel.org # 6.1.x


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 12:27:18 +0100">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fc3608aaa5751318837e4bbe0282b3836bca5080">efi/libstub: Use relocated version of kernel's struct screen_info</a></td><td>Ard Biesheuvel</td><td>6</td><td><span class="deletions">-14</span>/<span class="insertions">+21</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In some cases, we expose the kernel's struct screen_info to the EFI stub
directly, so it gets populated before even entering the kernel.  This
means the early console is available as soon as the early param parsing
happens, which is nice. It also means we need two different ways to pass
this information, as this trick only works if the EFI stub is baked into
the core kernel image, which is not always the case.

Huacai reports that the preparatory refactoring that was needed to
implement this alternative method for zboot resulted in a non-functional
efifb earlycon for other cases as well, due to the reordering of the
kernel image relocation with the population of the screen_info struct,
and the latter now takes place after copying the image to its new
location, which means we copy the old, uninitialized state.

So let's ensure that the same-image version of alloc_screen_info()
produces the correct screen_info pointer, by taking the displacement of
the loaded image into account.

Reported-by: Huacai Chen &lt;chenhuacai@loongson.cn&gt;
Tested-by: Huacai Chen &lt;chenhuacai@loongson.cn&gt;
Link: https://lore.kernel.org/linux-efi/20230310021749.921041-1-chenhuacai@loongson.cn/
Fixes: 42c8ea3dca094ab8 ("efi: libstub: Factor out EFI stub entrypoint into separate file")
Signed-off-by: Ard Biesheuvel &lt;ardb@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-23 08:46:55 +0000">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b1de5c78ebe9858ccec9d49af2f76724f1d47e3e">net: mdio: thunder: Add missing fwnode_handle_put()</a></td><td>Liang He</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In device_for_each_child_node(), we should add fwnode_handle_put()
when break out of the iteration device_for_each_child_node()
as it will automatically increase and decrease the refcounter.

Fixes: 379d7ac7ca31 ("phy: mdio-thunder: Add driver for Cavium Thunder SoC MDIO buses.")
Signed-off-by: Liang He &lt;windhl@126.com&gt;
Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:50:01 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb63d217e68f5040aec88b63c96355f32d522d01">Merge tag 'mlx5-fixes-2023-03-21' of ↵</a></td><td>Jakub Kicinski</td><td>7</td><td><span class="deletions">-7</span>/<span class="insertions">+39</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/saeed/linux

Saeed Mahameed says:

====================
mlx5 fixes 2023-03-21

This series provides bug fixes to mlx5 driver.

* tag 'mlx5-fixes-2023-03-21' of git://git.kernel.org/pub/scm/linux/kernel/git/saeed/linux:
  net/mlx5: E-Switch, Fix an Oops in error handling code
  net/mlx5: Read the TC mapping of all priorities on ETS query
  net/mlx5e: Overcome slow response for first macsec ASO WQE
  net/mlx5e: Initialize link speed to zero
  net/mlx5: Fix steering rules cleanup
  net/mlx5e: Block entering switchdev mode with ns inconsistency
  net/mlx5e: Set uplink rep as NETNS_LOCAL
====================

Link: https://lore.kernel.org/r/20230321211135.47711-1-saeed@kernel.org
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:45:22 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e212b0b968a02ddb36c73ff7e8abe0a2256ce49">Merge branch '100GbE' of ↵</a></td><td>Jakub Kicinski</td><td>4</td><td><span class="deletions">-6</span>/<span class="insertions">+13</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tnguy/net-queue

Tony Nguyen says:

====================
Intel Wired LAN Driver Updates 2023-03-21 (ice)

This series contains updates to ice driver only.

Piotr sets first_desc field for proper handling of Flow Director
packets.

Michal moves error checking for VF earlier in function to properly return
error before other checks/reporting; he also corrects VSI filter removal to
be done during VSI removal and not rebuild.

* '100GbE' of git://git.kernel.org/pub/scm/linux/kernel/git/tnguy/net-queue:
  ice: remove filters only if VSI is deleted
  ice: check if VF exists before mode check
  ice: fix rx buffers handling for flow director packets
====================

Link: https://lore.kernel.org/r/20230321183641.2849726-1-anthony.l.nguyen@intel.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:42:15 -0700">10 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cad4fb02d8a3aa9dff97e10342c253a7b96b371b">Merge branch '40GbE' of ↵</a></td><td>Jakub Kicinski</td><td>2</td><td><span class="deletions">-4</span>/<span class="insertions">+9</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/tnguy/net-queue

Tony Nguyen says:

====================
Intel Wired LAN Driver Updates 2023-03-21 (iavf, i40e)

This series contains updates to iavf and i40e drivers.

Stefan Assmann adds check, and return, if driver has already gone
through remove to prevent hang for iavf.

Radoslaw adds zero initialization to ensure Flow Director packets are
populated with correct values for i40e.

* '40GbE' of git://git.kernel.org/pub/scm/linux/kernel/git/tnguy/net-queue:
  i40e: fix flow director packet filter programming
  iavf: fix hang on reboot with ice
====================

Link: https://lore.kernel.org/r/20230321183548.2849671-1-anthony.l.nguyen@intel.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:14:45 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=407b508bdd70b6848993843d96ed49ac4108fb52">net: dsa: mt7530: move setting ssc_delta to PHY_INTERFACE_MODE_TRGMII case</a></td><td>Arınç ÜNAL</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Move setting the ssc_delta variable to under the PHY_INTERFACE_MODE_TRGMII
case as it's only needed when trgmii is used.

Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Signed-off-by: Arınç ÜNAL &lt;arinc.unal@arinc9.com&gt;
Link: https://lore.kernel.org/r/20230320190520.124513-3-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:14:45 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fdcc8ccd823740c18e803b886cec461bc0e64201">net: dsa: mt7530: move lowering TRGMII driving to mt7530_setup()</a></td><td>Arınç ÜNAL</td><td>1</td><td><span class="deletions">-11</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Move lowering the TRGMII Tx clock driving to mt7530_setup(), after setting
the core clock, as seen on the U-Boot MediaTek ethernet driver.

Move the code which looks like it lowers the TRGMII Rx clock driving to
after the TRGMII Tx clock driving is lowered. This is run after lowering
the Tx clock driving on the U-Boot MediaTek ethernet driver as well.

This way, the switch should consume less power regardless of port 6 being
used.

Update the comment explaining mt7530_pad_clk_setup().

Tested rgmii and trgmii modes of port 6 and rgmii mode of port 5 on MCM
MT7530 on MT7621AT Unielec U7621-06 and standalone MT7530 on MT7623NI
Bananapi BPI-R2.

Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Link: https://source.denx.de/u-boot/u-boot/-/blob/29a48bf9ccba45a5e560bb564bbe76e42629325f/drivers/net/mtk_eth.c#L682
Tested-by: Arınç ÜNAL &lt;arinc.unal@arinc9.com&gt;
Signed-off-by: Arınç ÜNAL &lt;arinc.unal@arinc9.com&gt;
Link: https://lore.kernel.org/r/20230320190520.124513-2-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:14:45 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f058a6ef99f0b88a177b58cc46a44ff5112e40a">net: dsa: mt7530: move enabling disabling core clock to mt7530_pll_setup()</a></td><td>Arınç ÜNAL</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+12</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Split the code that enables and disables TRGMII clocks and core clock.
Move enabling and disabling core clock to mt7530_pll_setup() as it's
supposed to be run there.

Add 20 ms delay before enabling the core clock as seen on the U-Boot
MediaTek ethernet driver.

Change the comment for enabling and disabling TRGMII clocks as the code
seems to affect both TXC and RXC.

Tested rgmii and trgmii modes of port 6 and rgmii mode of port 5 on MCM
MT7530 on MT7621AT Unielec U7621-06 and standalone MT7530 on MT7623NI
Bananapi BPI-R2.

Fixes: b8f126a8d543 ("net-next: dsa: add dsa support for Mediatek MT7530 switch")
Link: https://source.denx.de/u-boot/u-boot/-/blob/29a48bf9ccba45a5e560bb564bbe76e42629325f/drivers/net/mtk_eth.c#L589
Tested-by: Arınç ÜNAL &lt;arinc.unal@arinc9.com&gt;
Signed-off-by: Arınç ÜNAL &lt;arinc.unal@arinc9.com&gt;
Link: https://lore.kernel.org/r/20230320190520.124513-1-arinc.unal@arinc9.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:04:04 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8eac0095de355ee31e1b014f79f83d2cd62a2d04">net: asix: fix modprobe "sysfs: cannot create duplicate filename"</a></td><td>Grant Grundler</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+27</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
"modprobe asix ; rmmod asix ; modprobe asix" fails with:
   sysfs: cannot create duplicate filename \
   	'/devices/virtual/mdio_bus/usb-003:004'

Issue was originally reported by Anton Lundin on 2022-06-22 (link below).

Chrome OS team hit the same issue in Feb, 2023 when trying to find
work arounds for other issues with AX88172 devices.

The use of devm_mdiobus_register() with usbnet devices results in the
MDIO data being associated with the USB device. When the asix driver
is unloaded, the USB device continues to exist and the corresponding
"mdiobus_unregister()" is NOT called until the USB device is unplugged
or unauthorized. So the next "modprobe asix" will fail because the MDIO
phy sysfs attributes still exist.

The 'easy' (from a design PoV) fix is to use the non-devm variants of
mdiobus_* functions and explicitly manage this use in the asix_bind
and asix_unbind function calls. I've not explored trying to fix usbnet
initialization so devm_* stuff will work.

Fixes: e532a096be0e5 ("net: usb: asix: ax88772: add phylib support")
Reported-by: Anton Lundin &lt;glance@acc.umu.se&gt;
Link: https://lore.kernel.org/netdev/20220623063649.GD23685@pengutronix.de/T/
Tested-by: Eizan Miyamoto &lt;eizan@chromium.org&gt;
Signed-off-by: Grant Grundler &lt;grundler@chromium.org&gt;
Link: https://lore.kernel.org/r/20230321170539.732147-1-grundler@chromium.org
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:03:21 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=68c3e4fc8628b1487c965aabb29207249657eb5f">gve: Cache link_speed value from device</a></td><td>Joshua Washington</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The link speed is never changed for the uptime of a VM, and the current
implementation sends an admin queue command for each call. Admin queue
command invocations have nontrivial overhead (e.g., VM exits), which can
be disruptive to users if triggered frequently. Our telemetry data shows
that there are VMs that make frequent calls to this admin queue command.
Caching the result of the original admin queue command would eliminate
the need to send multiple admin queue commands on subsequent calls to
retrieve link speed.

Fixes: 7e074d5a76ca ("gve: Enable Link Speed Reporting in the driver.")
Signed-off-by: Joshua Washington &lt;joshwash@google.com&gt;
Reviewed-by: Simon Horman &lt;simon.horman@corigine.com&gt;
Link: https://lore.kernel.org/r/20230321172332.91678-1-joshwash@google.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 23:15:40 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f4e429c846972c8405951a9ff7a82aceeca7461">cifs: lock chan_lock outside match_session</a></td><td>Shyam Prasad N</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Coverity had rightly indicated a possible deadlock
due to chan_lock being done inside match_session.
All callers of match_* functions should pick up the
necessary locks and call them.

Signed-off-by: Shyam Prasad N &lt;sprasad@microsoft.com&gt;
Reviewed-by: Paulo Alcantara (SUSE) &lt;pc@manguebit.com&gt;
Cc: stable@vger.kernel.org
Fixes: 724244cdb382 ("cifs: protect session channel fields with chan_lock")
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 20:40:04 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=758d29fb3a8b3c756b4e4e0aa9b32ca8cfaf3feb">tools: ynl: Fix genlmsg header encoding formats</a></td><td>Donald Hunter</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The pack strings use 'b' signed char for cmd and version but struct
genlmsghdr defines them as unsigned char. Use 'B' instead.

Fixes: 4e4480e89c47 ("tools: ynl: move the cli and netlink code around")
Signed-off-by: Donald Hunter &lt;donald.hunter@gmail.com&gt;
Link: https://lore.kernel.org/r/20230319193803.97453-1-donald.hunter@gmail.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 20:39:10 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c79493c3ccf06a3aeb72017a96ca3dfd166bc16b">net: enetc: fix aggregate RMON counters not showing the ranges</a></td><td>Vladimir Oltean</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When running "ethtool -S eno0 --groups rmon" without an explicit "--src
emac|pmac" argument, the kernel will not report
rx-rmon-etherStatsPkts64to64Octets, rx-rmon-etherStatsPkts65to127Octets,
etc. This is because on ETHTOOL_MAC_STATS_SRC_AGGREGATE, we do not
populate the "ranges" argument.

ocelot_port_get_rmon_stats() does things differently and things work
there. I had forgotten to make sure that the code is structured the same
way in both drivers, so do that now.

Fixes: cf52bd238b75 ("net: enetc: add support for MAC Merge statistics counters")
Signed-off-by: Vladimir Oltean &lt;vladimir.oltean@nxp.com&gt;
Reviewed-by: Simon Horman &lt;simon.horman@corigine.com&gt;
Link: https://lore.kernel.org/r/20230321232831.1200905-1-vladimir.oltean@nxp.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=52dd5e964a55c98c1b0bcf5fc737a5ddd00e7d4d">Bluetooth: Remove "Power-on" check from Mesh feature</a></td><td>Brian Gix</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+0</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The Bluetooth mesh experimental feature enable was requiring the
controller to be powered off in order for the Enable to work. Mesh is
supposed to be enablable regardless of the controller state, and created
an unintended requirement that the mesh daemon be started before the
classic bluetoothd daemon.

Fixes: af6bcc1921ff ("Bluetooth: Add experimental wrapper for MGMT based mesh")
Signed-off-by: Brian Gix &lt;brian.gix@gmail.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1c66bee492a5fe00ae3fe890bb693bfc99f994c6">Bluetooth: Fix race condition in hci_cmd_sync_clear</a></td><td>Min Li</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
There is a potential race condition in hci_cmd_sync_work and
hci_cmd_sync_clear, and could lead to use-after-free. For instance,
hci_cmd_sync_work is added to the 'req_workqueue' after cancel_work_sync
The entry of 'cmd_sync_work_list' may be freed in hci_cmd_sync_clear, and
causing kernel panic when it is used in 'hci_cmd_sync_work'.

Here's the call trace:

dump_stack_lvl+0x49/0x63
print_report.cold+0x5e/0x5d3
? hci_cmd_sync_work+0x282/0x320
kasan_report+0xaa/0x120
? hci_cmd_sync_work+0x282/0x320
__asan_report_load8_noabort+0x14/0x20
hci_cmd_sync_work+0x282/0x320
process_one_work+0x77b/0x11c0
? _raw_spin_lock_irq+0x8e/0xf0
worker_thread+0x544/0x1180
? poll_idle+0x1e0/0x1e0
kthread+0x285/0x320
? process_one_work+0x11c0/0x11c0
? kthread_complete_and_exit+0x30/0x30
ret_from_fork+0x22/0x30
&lt;/TASK&gt;

Allocated by task 266:
kasan_save_stack+0x26/0x50
__kasan_kmalloc+0xae/0xe0
kmem_cache_alloc_trace+0x191/0x350
hci_cmd_sync_queue+0x97/0x2b0
hci_update_passive_scan+0x176/0x1d0
le_conn_complete_evt+0x1b5/0x1a00
hci_le_conn_complete_evt+0x234/0x340
hci_le_meta_evt+0x231/0x4e0
hci_event_packet+0x4c5/0xf00
hci_rx_work+0x37d/0x880
process_one_work+0x77b/0x11c0
worker_thread+0x544/0x1180
kthread+0x285/0x320
ret_from_fork+0x22/0x30

Freed by task 269:
kasan_save_stack+0x26/0x50
kasan_set_track+0x25/0x40
kasan_set_free_info+0x24/0x40
____kasan_slab_free+0x176/0x1c0
__kasan_slab_free+0x12/0x20
slab_free_freelist_hook+0x95/0x1a0
kfree+0xba/0x2f0
hci_cmd_sync_clear+0x14c/0x210
hci_unregister_dev+0xff/0x440
vhci_release+0x7b/0xf0
__fput+0x1f3/0x970
____fput+0xe/0x20
task_work_run+0xd4/0x160
do_exit+0x8b0/0x22a0
do_group_exit+0xba/0x2a0
get_signal+0x1e4a/0x25b0
arch_do_signal_or_restart+0x93/0x1f80
exit_to_user_mode_prepare+0xf5/0x1a0
syscall_exit_to_user_mode+0x26/0x50
ret_from_fork+0x15/0x30

Fixes: 6a98e3836fa2 ("Bluetooth: Add helper for serialized HCI command execution")
Cc: stable@vger.kernel.org
Signed-off-by: Min Li &lt;lm0963hack@gmail.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=294d749b5df5a22d17989833fb1a0a2cd1dfd243">Bluetooth: btintel: Iterate only bluetooth device ACPI entries</a></td><td>Kiran K</td><td>3</td><td><span class="deletions">-25</span>/<span class="insertions">+27</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Current flow interates over entire ACPI table entries looking for
Bluetooth Per Platform Antenna Gain(PPAG) entry. This patch iterates
over ACPI entries relvant to Bluetooth device only.

Fixes: c585a92b2f9c ("Bluetooth: btintel: Set Per Platform Antenna Gain(PPAG)")
Signed-off-by: Kiran K &lt;kiran.k@intel.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f10e40a948e8a2abe7f983df3959a333ca8955f">Bluetooth: ISO: fix timestamped HCI ISO data packet parsing</a></td><td>Pauli Virtanen</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Use correct HCI ISO data packet header struct when the packet has
timestamp. The timestamp, when present, goes before the other fields
(Core v5.3 4E 5.4.5), so the structs are not compatible.

Fixes: ccf74f2390d6 ("Bluetooth: Add BTPROTO_ISO socket type")
Signed-off-by: Pauli Virtanen &lt;pav@iki.fi&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=efe375b716c1c1c9b52a816f5b933a95421020a2">Bluetooth: btusb: Remove detection of ISO packets over bulk</a></td><td>Luiz Augusto von Dentz</td><td>1</td><td><span class="deletions">-10</span>/<span class="insertions">+0</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
This removes the code introduced by
14202eff214e1e941fefa0366d4c3bc4b1a0d500 as hci_recv_frame is now able
to detect ACL packets that are in fact ISO packets.

Fixes: 14202eff214e ("Bluetooth: btusb: Detect if an ACL packet is in fact an ISO packet")
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=876e78104f23ce9267822757a63562a609b126c3">Bluetooth: hci_core: Detect if an ACL packet is in fact an ISO packet</a></td><td>Luiz Augusto von Dentz</td><td>1</td><td><span class="deletions">-4</span>/<span class="insertions">+19</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Because some transports don't have a dedicated type for ISO packets
(see 14202eff214e1e941fefa0366d4c3bc4b1a0d500) they may use ACL type
when in fact they are ISO packets.

In the past this was left for the driver to detect such thing but it
creates a problem when using the likes of btproxy when used by a VM as
the host would not be aware of the connection the guest is doing it
won't be able to detect such behavior, so this make bt_recv_frame
detect when it happens as it is the common interface to all drivers
including guest VMs.

Fixes: 14202eff214e ("Bluetooth: btusb: Detect if an ACL packet is in fact an ISO packet")
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:05:55 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c44a431d62bf4a20d7b901f98266ae3f4676d48">Bluetooth: hci_sync: Resume adv with no RPA when active scan</a></td><td>Zhengping Jiang</td><td>1</td><td><span class="deletions">-20</span>/<span class="insertions">+44</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The address resolution should be disabled during the active scan,
so all the advertisements can reach the host. The advertising
has to be paused before disabling the address resolution,
because the advertising will prevent any changes to the resolving
list and the address resolution status. Skipping this will cause
the hci error and the discovery failure.

According to the bluetooth specification:
"7.8.44 LE Set Address Resolution Enable command

This command shall not be used when:
- Advertising (other than periodic advertising) is enabled,
- Scanning is enabled, or
- an HCI_LE_Create_Connection, HCI_LE_Extended_Create_Connection, or
  HCI_LE_Periodic_Advertising_Create_Sync command is outstanding."

If the host is using RPA, the controller needs to generate RPA for
the advertising, so the advertising must remain paused during the
active scan.

If the host is not using RPA, the advertising can be resumed after
disabling the address resolution.

Fixes: 9afc675edeeb ("Bluetooth: hci_sync: allow advertise when scan without RPA")
Signed-off-by: Zhengping Jiang &lt;jiangzp@google.com&gt;
Signed-off-by: Luiz Augusto von Dentz &lt;luiz.von.dentz@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:38:33 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b53e8cfec30b93c120623232ba27c041b1ef8f1a">ksmbd: return STATUS_NOT_SUPPORTED on unsupported smb2.0 dialect</a></td><td>Namjae Jeon</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
ksmbd returned "Input/output error" when mounting with vers=2.0 to
ksmbd. It should return STATUS_NOT_SUPPORTED on unsupported smb2.0
dialect.

Cc: stable@vger.kernel.org
Reported-by: Steve French &lt;stfrench@microsoft.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:38:33 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be6f42fad5f5fd1fea9d562df82c38ad6ed3bfe9">ksmbd: don't terminate inactive sessions after a few seconds</a></td><td>Namjae Jeon</td><td>4</td><td><span class="deletions">-16</span>/<span class="insertions">+28</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Steve reported that inactive sessions are terminated after a few
seconds. ksmbd terminate when receiving -EAGAIN error from
kernel_recvmsg(). -EAGAIN means there is no data available in timeout.
So ksmbd should keep connection with unlimited retries instead of
terminating inactive sessions.

Cc: stable@vger.kernel.org
Reported-by: Steve French &lt;stfrench@microsoft.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:38:33 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2624b445544ffc1472ccabfb6ec867c199d4c95c">ksmbd: fix possible refcount leak in smb2_open()</a></td><td>ChenXiaoSong</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Reference count of acls will leak when memory allocation fails. Fix this
by adding the missing posix_acl_release().

Fixes: e2f34481b24d ("cifsd: add server-side procedures for SMB3")
Signed-off-by: ChenXiaoSong &lt;chenxiaosong2@huawei.com&gt;
Acked-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:38:33 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=342edb60dcda7a409430359b0cac2864bb9dfe44">ksmbd: add low bound validation to FSCTL_QUERY_ALLOCATED_RANGES</a></td><td>Namjae Jeon</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+6</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Smatch static checker warning:
 fs/ksmbd/vfs.c:1040 ksmbd_vfs_fqar_lseek() warn: no lower bound on 'length'
 fs/ksmbd/vfs.c:1041 ksmbd_vfs_fqar_lseek() warn: no lower bound on 'start'

Fix unexpected result that could caused from negative start and length.

Fixes: f44158485826 ("cifsd: add file operations")
Reported-by: Dan Carpenter &lt;error27@gmail.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Reviewed-by: Sergey Senozhatsky &lt;senozhatsky@chromium.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:38:33 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d74ec97131b1179a373b6d521f195c84e894eb6">ksmbd: add low bound validation to FSCTL_SET_ZERO_DATA</a></td><td>Namjae Jeon</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Smatch static checker warning:
 fs/ksmbd/smb2pdu.c:7759 smb2_ioctl()
 warn: no lower bound on 'off'

Fix unexpected result that could caused from negative off and bfz.

Fixes: b5e5f9dfc915 ("ksmbd: check invalid FileOffset and BeyondFinalZero in FSCTL_ZERO_DATA")
Reported-by: Dan Carpenter &lt;error27@gmail.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Reviewed-by: Sergey Senozhatsky &lt;senozhatsky@chromium.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:32:50 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=728f14c72b71a19623df329c1c7c9d1452e56f1e">ksmbd: set FILE_NAMED_STREAMS attribute in FS_ATTRIBUTE_INFORMATION</a></td><td>Namjae Jeon</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
If vfs objects = streams_xattr in ksmbd.conf FILE_NAMED_STREAMS should
be set to Attributes in FS_ATTRIBUTE_INFORMATION. MacOS client show
"Format: SMB (Unknown)" on faked NTFS and no streams support.

Cc: stable@vger.kernel.org
Reported-by: Miao Lihua &lt;441884205@qq.com&gt;
Tested-by: Miao Lihua &lt;441884205@qq.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:32:50 -0500">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7a891d4b62d62566323676cb0e922ded4f37afe1">ksmbd: fix wrong signingkey creation when encryption is AES256</a></td><td>Namjae Jeon</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
MacOS and Win11 support AES256 encrytion and it is included in the cipher
array of encryption context. Especially on macOS, The most preferred
cipher is AES256. Connecting to ksmbd fails on newer MacOS clients that
support AES256 encryption. MacOS send disconnect request after receiving
final session setup response from ksmbd. Because final session setup is
signed with signing key was generated incorrectly.
For signging key, 'L' value should be initialized to 128 if key size is
16bytes.

Cc: stable@vger.kernel.org
Reported-by: Miao Lihua &lt;441884205@qq.com&gt;
Tested-by: Miao Lihua &lt;441884205@qq.com&gt;
Signed-off-by: Namjae Jeon &lt;linkinjeon@kernel.org&gt;
Signed-off-by: Steve French &lt;stfrench@microsoft.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 14:15:05 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fff5a5e7f528b2ed2c335991399a766c2cf01103">Merge tag 'for-linus' of git://git.armlinux.org.uk/~rmk/linux-arm</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull ARM fix from Russell King:
 "Just one fix for now to eliminate a KASAN false positive"

* tag 'for-linus' of git://git.armlinux.org.uk/~rmk/linux-arm:
  ARM: 9290/1: uaccess: Fix KASAN false-positives


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 14:09:20 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c13e02d335c825ffc7f4af3733329d38e695b482">Merge tag 'bootconfig-fixes-v6.3-rc3' of ↵</a></td><td>Linus Torvalds</td><td>2</td><td><span class="deletions">-7</span>/<span class="insertions">+15</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/trace/linux-trace

Pull bootconfig fixes from Masami Hiramatsu:

 - Fix bootconfig test script to test increased maximum number (8192)
   node correctly

 - Change the console message if there is no bootconfig data and the
   kernel is compiled with CONFIG_BOOT_CONFIG_FORCE=y

* tag 'bootconfig-fixes-v6.3-rc3' of git://git.kernel.org/pub/scm/linux/kernel/git/trace/linux-trace:
  bootconfig: Change message if no bootconfig with CONFIG_BOOT_CONFIG_FORCE=y
  bootconfig: Fix testcase to increase max node


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 14:05:24 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d18a04157fc171fd48075e3dc96471bd3b87f0dd">rcu: Fix rcu_torture_read ftrace event</a></td><td>Douglas Raillard</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Fix the rcutorturename field so that its size is correctly reported in
the text format embedded in trace.dat files. As it stands, it is
reported as being of size 1:

    field:char rcutorturename[8];   offset:8;       size:1; signed:0;

Signed-off-by: Douglas Raillard &lt;douglas.raillard@arm.com&gt;
Reviewed-by: Mukesh Ojha &lt;quic_mojha@quicinc.com&gt;
Cc: stable@vger.kernel.org
Fixes: 04ae87a52074e ("ftrace: Rework event_create_dir()")
Reviewed-by: Steven Rostedt (Google) &lt;rostedt@goodmis.org&gt;
[ boqun: Add "Cc" and "Fixes" tags per Steven ]
Signed-off-by: Boqun Feng &lt;boqun.feng@gmail.com&gt;
Signed-off-by: Paul E. McKenney &lt;paulmck@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:58:26 -0400">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5f24a8725fe7bc2c6adf7ce00dd3e818387d8995">SUNRPC: Fix a crash in gss_krb5_checksum()</a></td><td>Chuck Lever</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+5</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Anna says:
&gt; KASAN reports [...] a slab-out-of-bounds in gss_krb5_checksum(),
&gt; and it can cause my client to panic when running cthon basic
&gt; tests with krb5p.

&gt; Running faddr2line gives me:
&gt;
&gt; gss_krb5_checksum+0x4b6/0x630:
&gt; ahash_request_free at
&gt; /home/anna/Programs/linux-nfs.git/./include/crypto/hash.h:619
&gt; (inlined by) gss_krb5_checksum at
&gt; /home/anna/Programs/linux-nfs.git/net/sunrpc/auth_gss/gss_krb5_crypto.c:358

My diagnosis is that the memcpy() at the end of gss_krb5_checksum()
reads past the end of the buffer containing the checksum data
because the callers have ignored gss_krb5_checksum()'s API contract:

 * Caller provides the truncation length of the output token (h) in
 * cksumout.len.

Instead they provide the fixed length of the hmac buffer. This
length happens to be larger than the value returned by
crypto_ahash_digestsize().

Change these errant callers to work like krb5_etm_{en,de}crypt().
As a defensive measure, bound the length of the byte copy at the
end of gss_krb5_checksum().

Kunit sez:
Testing complete. Ran 68 tests: passed: 68
Elapsed time: 81.680s total, 5.875s configuring, 75.610s building, 0.103s running

Reported-by: Anna Schumaker &lt;schumaker.anna@gmail.com&gt;
Fixes: 8270dbfcebea ("SUNRPC: Obscure Kerberos integrity keys")
Signed-off-by: Chuck Lever &lt;chuck.lever@oracle.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 20:22:53 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bbefb7ed83e639ba1633e807f56b38a71c51fda3">Merge tag 'thunderbolt-for-v6.3-rc4' of ↵</a></td><td>Greg Kroah-Hartman</td><td>9</td><td><span class="deletions">-41</span>/<span class="insertions">+166</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/westeri/thunderbolt into usb-linus

Mika writes:

thunderbolt: Fixes for v6.3-rc4

This includes following fixes and quirks for v6.3-rc:

  - Quirk to disable CL-states on AMD USB4 host routers
  - Fix memory leak in lane margining
  - Correct the retimer access flows
  - Quirk to limit USB3 bandwidth on certain Intel USB4 host routers
  - Fix usage of scale field when allocting USB3 bandwidth
  - Fix interrupt "auto clear" on non-Intel USB4 host routers.

There are also two commits that are not fixes themselves but are needed
for the USB3 bandwidth quirk and for the interrupt auto clear fix to
work.

All these have been in linux-next with no reported issues.

* tag 'thunderbolt-for-v6.3-rc4' of git://git.kernel.org/pub/scm/linux/kernel/git/westeri/thunderbolt:
  thunderbolt: Rename shadowed variables bit to interrupt_bit and auto_clear_bit
  thunderbolt: Disable interrupt auto clear for rings
  thunderbolt: Use const qualifier for `ring_interrupt_index`
  thunderbolt: Use scale field when allocating USB3 bandwidth
  thunderbolt: Limit USB3 bandwidth of certain Intel USB4 host routers
  thunderbolt: Call tb_check_quirks() after initializing adapters
  thunderbolt: Add missing UNSET_INBOUND_SBTX for retimer access
  thunderbolt: Fix memory leak in margining
  thunderbolt: Add quirk to disable CLx


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 19:59:08 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f1b80a3878b2d76ced46a275fdfd7fb80b4f083b">thermal: core: Restore behavior regarding invalid trip points</a></td><td>Ido Schimmel</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Commit 7c3d5c20dc16 ("thermal/core: Add a generic thermal_zone_get_trip()
function") stopped marking trip points with a zero temperature as
disabled, behavior that was originally introduced in commit 81ad4276b505
("Thermal: Ignore invalid trip points").

When using the mlxsw driver we see that when such trip points are not
disabled, the thermal subsystem repeatedly tries to set the state of the
associated cooling devices to the maximum state.

Address this by restoring the original behavior and mark trip points
with a zero temperature as disabled.

Fixes: 7c3d5c20dc16 ("thermal/core: Add a generic thermal_zone_get_trip() function")
Signed-off-by: Ido Schimmel &lt;idosch@nvidia.com&gt;
Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 11:00:49 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=62faca1ca10cc84e99ae7f38aa28df2bc945369b">selftests/x86/amx: Add a ptrace test</a></td><td>Chang S. Bae</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+105</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Include a test case to validate the XTILEDATA injection to the target.

Also, it ensures the kernel's ability to copy states between different
XSAVE formats.

Refactor the memcmp() code to be usable for the state validation.

Signed-off-by: Chang S. Bae &lt;chang.seok.bae@intel.com&gt;
Signed-off-by: Dave Hansen &lt;dave.hansen@linux.intel.com&gt;
Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/all/20230227210504.18520-3-chang.seok.bae%40intel.com


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 10:59:13 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b15888840207c2bfe678dd1f68a32db54315e71f">x86/fpu/xstate: Prevent false-positive warning in __copy_xstate_uabi_buf()</a></td><td>Chang S. Bae</td><td>1</td><td><span class="deletions">-16</span>/<span class="insertions">+14</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
__copy_xstate_to_uabi_buf() copies either from the tasks XSAVE buffer
or from init_fpstate into the ptrace buffer. Dynamic features, like
XTILEDATA, have an all zeroes init state and are not saved in
init_fpstate, which means the corresponding bit is not set in the
xfeatures bitmap of the init_fpstate header.

But __copy_xstate_to_uabi_buf() retrieves addresses for both the tasks
xstate and init_fpstate unconditionally via __raw_xsave_addr().

So if the tasks XSAVE buffer has a dynamic feature set, then the
address retrieval for init_fpstate triggers the warning in
__raw_xsave_addr() which checks the feature bit in the init_fpstate
header.

Remove the address retrieval from init_fpstate for extended features.
They have an all zeroes init state so init_fpstate has zeros for them.
Then zeroing the user buffer for the init state is the same as copying
them from init_fpstate.

Fixes: 2308ee57d93d ("x86/fpu/amx: Enable the AMX feature in 64-bit mode")
Reported-by: Mingwei Zhang &lt;mizhang@google.com&gt;
Link: https://lore.kernel.org/kvm/20230221163655.920289-2-mizhang@google.com/
Signed-off-by: Chang S. Bae &lt;chang.seok.bae@intel.com&gt;
Signed-off-by: Dave Hansen &lt;dave.hansen@linux.intel.com&gt;
Tested-by: Mingwei Zhang &lt;mizhang@google.com&gt;
Link: https://lore.kernel.org/all/20230227210504.18520-2-chang.seok.bae%40intel.com
Cc: stable@vger.kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 10:42:47 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a3f547addcaa10df5a226526bc9e2d9a94542344">x86/mm: Do not shuffle CPU entry areas without KASLR</a></td><td>Michal Koutný</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The commit 97e3d26b5e5f ("x86/mm: Randomize per-cpu entry area") fixed
an omission of KASLR on CPU entry areas. It doesn't take into account
KASLR switches though, which may result in unintended non-determinism
when a user wants to avoid it (e.g. debugging, benchmarking).

Generate only a single combination of CPU entry areas offsets -- the
linear array that existed prior randomization when KASLR is turned off.

Since we have 3f148f331814 ("x86/kasan: Map shadow for percpu pages on
demand") and followups, we can use the more relaxed guard
kasrl_enabled() (in contrast to kaslr_memory_enabled()).

Fixes: 97e3d26b5e5f ("x86/mm: Randomize per-cpu entry area")
Signed-off-by: Michal Koutný &lt;mkoutny@suse.com&gt;
Signed-off-by: Dave Hansen &lt;dave.hansen@linux.intel.com&gt;
Cc: stable@vger.kernel.org
Link: https://lore.kernel.org/all/20230306193144.24605-1-mkoutny%40suse.com


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 11:04:55 -0600">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=02a4d923e4400a36d340ea12d8058f69ebf3a383">io_uring/rsrc: fix null-ptr-deref in io_file_bitmap_get()</a></td><td>Savino Dicanosa</td><td>2</td><td><span class="deletions">-0</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When fixed files are unregistered, file_alloc_end and alloc_hint
are not cleared. This can later cause a NULL pointer dereference in
io_file_bitmap_get() if auto index selection is enabled via
IORING_FILE_INDEX_ALLOC:

[    6.519129] BUG: kernel NULL pointer dereference, address: 0000000000000000
[...]
[    6.541468] RIP: 0010:_find_next_zero_bit+0x1a/0x70
[...]
[    6.560906] Call Trace:
[    6.561322]  &lt;TASK&gt;
[    6.561672]  io_file_bitmap_get+0x38/0x60
[    6.562281]  io_fixed_fd_install+0x63/0xb0
[    6.562851]  ? __pfx_io_socket+0x10/0x10
[    6.563396]  io_socket+0x93/0xf0
[    6.563855]  ? __pfx_io_socket+0x10/0x10
[    6.564411]  io_issue_sqe+0x5b/0x3d0
[    6.564914]  io_submit_sqes+0x1de/0x650
[    6.565452]  __do_sys_io_uring_enter+0x4fc/0xb20
[    6.566083]  ? __do_sys_io_uring_register+0x11e/0xd80
[    6.566779]  do_syscall_64+0x3c/0x90
[    6.567247]  entry_SYSCALL_64_after_hwframe+0x72/0xdc
[...]

To fix the issue, set file alloc range and alloc_hint to zero after
file tables are freed.

Cc: stable@vger.kernel.org
Fixes: 4278a0deb1f6 ("io_uring: defer alloc_hint update to io_file_bitmap_set()")
Signed-off-by: Savino Dicanosa &lt;sd7.dev@pm.me&gt;
[axboe: add explicit bitmap == NULL check as well]
Signed-off-by: Jens Axboe &lt;axboe@kernel.dk&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 18:01:57 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a70ca89d59c7c8af006d29b965a95ede0abb0da">drm/bridge: lt8912b: return EPROBE_DEFER if bridge is not found</a></td><td>Matheus Castello</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Returns EPROBE_DEFER when of_drm_find_bridge() fails, this is consistent
with what all the other DRM bridge drivers are doing and this is
required since the bridge might not be there when the driver is probed
and this should not be a fatal failure.

Cc: &lt;stable@vger.kernel.org&gt;
Fixes: 30e2ae943c26 ("drm/bridge: Introduce LT8912B DSI to HDMI bridge")
Signed-off-by: Matheus Castello &lt;matheus.castello@toradex.com&gt;
Signed-off-by: Francesco Dolcini &lt;francesco.dolcini@toradex.com&gt;
Reviewed-by: Laurent Pinchart &lt;laurent.pinchart@ideasonboard.com&gt;
Reviewed-by: Andrzej Hajda &lt;andrzej.hajda@intel.com&gt;
Signed-off-by: Neil Armstrong &lt;neil.armstrong@linaro.org&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/20230322143821.109744-1-francesco@dolcini.it


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 18:00:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ba98413bf45edbf33672e2539e321b851b2cfbd1">drm/meson: fix missing component unbind on bind errors</a></td><td>Johan Hovold</td><td>1</td><td><span class="deletions">-5</span>/<span class="insertions">+8</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Make sure to unbind all subcomponents when binding the aggregate device
fails.

Fixes: a41e82e6c457 ("drm/meson: Add support for components")
Cc: stable@vger.kernel.org      # 4.12
Cc: Neil Armstrong &lt;neil.armstrong@linaro.org&gt;
Signed-off-by: Johan Hovold &lt;johan+linaro@kernel.org&gt;
Acked-by: Neil Armstrong &lt;neil.armstrong@linaro.org&gt;
Signed-off-by: Neil Armstrong &lt;neil.armstrong@linaro.org&gt;
Link: https://patchwork.freedesktop.org/patch/msgid/20230306103533.4915-1-johan+linaro@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 09:11:09 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=915efd8a446b74442039d31689d5d863caf82517">xdp: bpf_xdp_metadata use EOPNOTSUPP for no driver support</a></td><td>Jesper Dangaard Brouer</td><td>5</td><td><span class="deletions">-10</span>/<span class="insertions">+19</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When driver doesn't implement a bpf_xdp_metadata kfunc the fallback
implementation returns EOPNOTSUPP, which indicate device driver doesn't
implement this kfunc.

Currently many drivers also return EOPNOTSUPP when the hint isn't
available, which is ambiguous from an API point of view. Instead
change drivers to return ENODATA in these cases.

There can be natural cases why a driver doesn't provide any hardware
info for a specific hint, even on a frame to frame basis (e.g. PTP).
Lets keep these cases as separate return codes.

When describing the return values, adjust the function kernel-doc layout
to get proper rendering for the return values.

Fixes: ab46182d0dcb ("net/mlx4_en: Support RX XDP metadata")
Fixes: bc8d405b1ba9 ("net/mlx5e: Support RX XDP metadata")
Fixes: 306531f0249f ("veth: Support RX XDP metadata")
Fixes: 3d76a4d3d4e5 ("bpf: XDP metadata RX kfuncs")
Signed-off-by: Jesper Dangaard Brouer &lt;brouer@redhat.com&gt;
Acked-by: Stanislav Fomichev &lt;sdf@google.com&gt;
Acked-by: Toke Høiland-Jørgensen &lt;toke@redhat.com&gt;
Acked-by: Tariq Toukan &lt;tariqt@nvidia.com&gt;
Link: https://lore.kernel.org/r/167940675120.2718408.8176058626864184420.stgit@firesoul
Signed-off-by: Alexei Starovoitov &lt;ast@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:59:46 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aadbd07ff8a75ed342388846da78dfaddb8b106a">x86/PVH: avoid 32-bit build warning when obtaining VGA console info</a></td><td>Jan Beulich</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In the commit referenced below I failed to pay attention to this code
also being buildable as 32-bit. Adjust the type of "ret" - there's no
real need for it to be wider than 32 bits.

Fixes: 934ef33ee75c ("x86/PVH: obtain VGA console info in Dom0")
Reported-by: kernel test robot &lt;lkp@intel.com&gt;
Signed-off-by: Jan Beulich &lt;jbeulich@suse.com&gt;
Reviewed-by: Juergen Gross &lt;jgross@suse.com&gt;

Link: https://lore.kernel.org/r/2d2193ff-670b-0a27-e12d-2c5c4c121c79@suse.com
Signed-off-by: Juergen Gross &lt;jgross@suse.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:59:39 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6214894f49a967c749ee6c07cb00f9cede748df4">hvc/xen: prevent concurrent accesses to the shared ring</a></td><td>Roger Pau Monne</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+17</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The hvc machinery registers both a console and a tty device based on
the hv ops provided by the specific implementation.  Those two
interfaces however have different locks, and there's no single locks
that's shared between the tty and the console implementations, hence
the driver needs to protect itself against concurrent accesses.
Otherwise concurrent calls using the split interfaces are likely to
corrupt the ring indexes, leaving the console unusable.

Introduce a lock to xencons_info to serialize accesses to the shared
ring.  This is only required when using the shared memory console,
concurrent accesses to the hypercall based console implementation are
not an issue.

Note the conditional logic in domU_read_console() is slightly modified
so the notify_daemon() call can be done outside of the locked region:
it's an hypercall and there's no need for it to be done with the lock
held.

Fixes: b536b4b96230 ('xen: use the hvc console infrastructure for Xen console')
Signed-off-by: Roger Pau Monné &lt;roger.pau@citrix.com&gt;
Reviewed-by: Juergen Gross &lt;jgross@suse.com&gt;
Link: https://lore.kernel.org/r/20221130150919.13935-1-roger.pau@citrix.com
Signed-off-by: Juergen Gross &lt;jgross@suse.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:59:29 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e732e39ed9929c05fd219035bc9653ba4100d4fa">mtd: rawnand: meson: invalidate cache on polling ECC bit</a></td><td>Arseniy Krasnov</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
'info_buf' memory is cached and driver polls ECC bit in it. This bit
is set by the NAND controller. If 'usleep_range()' returns before device
sets this bit, 'info_buf' will be cached and driver won't see update of
this bit and will loop forever.

Fixes: 8fae856c5350 ("mtd: rawnand: meson: add support for Amlogic NAND flash controller")
Signed-off-by: Arseniy Krasnov &lt;AVKrasnov@sberdevices.ru&gt;
Reviewed-by: Neil Armstrong &lt;neil.armstrong@linaro.org&gt;
Signed-off-by: Miquel Raynal &lt;miquel.raynal@bootlin.com&gt;
Link: https://lore.kernel.org/linux-mtd/d4ef0bd6-816e-f6fa-9385-f05f775f0ae2@sberdevices.ru


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:59:29 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9b043c649022ec55040aa9315cc72059c4ec254c">mtd: rawnand: nandsim: Artificially prevent sequential page reads</a></td><td>Miquel Raynal</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+16</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The continuous read support added recently makes nandsim
unhappy. Indeed, all the supported commands should be re-encoded into
internal commands, so of course there is currently no support for the
commands and patterns needed for continuous reads to work.

I tried to add support for them but nandsim (which is more a tool to
develop/debug upper layers rather than the raw NAND core) suffers from a
big limitation: it's internal parser needs to know what exact operation
is happening when the address cycles are performed. The research is then
sequential from the start up to the address cycles, but does not check
what's coming next even though the information is available. This is a
limitation which is related to the old API used by the core which kind
of forced the controllers to guess what operation was being performed
rather early. Today the core uses a more transparent API called
-&gt;exec_op() which no longer requires controller drivers to do any more
guessing, but despite being updated to -&gt;exec_op(), nandsim is still a
bit constrained on this regard and thus cannot handle sequential page
reads because the start sequence beginning is identical to a regular
page read.

If the internal algorithm is updated some day, it should be possible to
make it support sequential page reads by adding something like:

       /* Large page devices continuous read page start */
       {OPT_LARGEPAGE, {STATE_CMD_READ0, STATE_ADDR_PAGE, STATE_CMD_READSTART,
                        STATE_CMD_READCACHESEQ | ACTION_CPY, STATE_DATAOUT,
                        STATE_READY}},
       /* Large page devices continuous read page continue */
       {OPT_LARGEPAGE, {STATE_CMD_READCACHESEQ | ACTION_CPY_NEXT, STATE_DATAOUT,
                        STATE_READY}},
       /* Large page devices continuous read page end */
       {OPT_LARGEPAGE, {STATE_CMD_READCACHEEND | ACTION_CPY_NEXT, STATE_DATAOUT,
                        STATE_READY}},

For now, we just return -EOPNOTSUPP when the core asks controller
drivers if they support the feature in order to prevent any further use
of these opcodes.

Note: This is a hack, -&gt;exec_op() is not supposed to check against the
COMMAND opcodes unless _really_ needed.

Fixes: 003fe4b9545b ("mtd: rawnand: Support for sequential cache reads")
Reported-by: Zhihao Cheng &lt;chengzhihao1@huawei.com&gt;
Link: https://lore.kernel.org/linux-mtd/fd34fe55-7f4a-030d-8653-9bb9cf08410d@huawei.com/
Signed-off-by: Miquel Raynal &lt;miquel.raynal@bootlin.com&gt;
Tested-by: Zhihao Cheng &lt;chengzhihao1@huawei.com&gt;
Acked-by: Richard Weinberger &lt;richard@nod.at&gt;
Link: https://lore.kernel.org/linux-mtd/20230310085452.1368716-1-miquel.raynal@bootlin.com


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 16:59:08 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a56cde41340ac4049fa6edac9e6cfbcd2804074e">dt-bindings: mtd: jedec,spi-nor: Document CPOL/CPHA support</a></td><td>Geert Uytterhoeven</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
SPI EEPROMs typically support both SPI Mode 0 (CPOL=CPHA=0) and Mode 3
(CPOL=CPHA=1).  However, using the latter is currently flagged as an
error by "make dtbs_check", e.g.:

    arch/arm/boot/dts/r8a7791-koelsch.dtb: flash@0: Unevaluated properties are not allowed ('spi-cpha', 'spi-cpol' were unexpected)
	    From schema: Documentation/devicetree/bindings/mtd/jedec,spi-nor.yaml

Fix this by documenting support for CPOL=CPHA=1.

Fixes: 233363aba72ac638 ("spi/panel: dt-bindings: drop CPHA and CPOL from common properties")
Cc: stable@vger.kernel.org
Signed-off-by: Geert Uytterhoeven &lt;geert+renesas@glider.be&gt;
Reviewed-by: Miquel Raynal &lt;miquel.raynal@bootlin.com&gt;
Reviewed-by: Krzysztof Kozlowski &lt;krzysztof.kozlowski@linaro.org&gt;
Reviewed-by: Tudor Ambarus &lt;tudor.ambarus@linaro.org&gt;
Signed-off-by: Miquel Raynal &lt;miquel.raynal@bootlin.com&gt;
Link: https://lore.kernel.org/linux-mtd/afe470603028db9374930b0c57464b1f6d52bdd3.1676384304.git.geert+renesas@glider.be


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:50:32 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb765a743377d46d8da8e7f7e5128022504741b9">mlxsw: spectrum_fid: Fix incorrect local port type</a></td><td>Ido Schimmel</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Local port is a 10-bit number, but it was mistakenly stored in a u8,
resulting in firmware errors when using a netdev corresponding to a
local port higher than 255.

Fix by storing the local port in u16, as is done in the rest of the
code.

Fixes: bf73904f5fba ("mlxsw: Add support for 802.1Q FID family")
Signed-off-by: Ido Schimmel &lt;idosch@nvidia.com&gt;
Reviewed-by: Danielle Ratson &lt;danieller@nvidia.com&gt;
Signed-off-by: Petr Machata &lt;petrm@nvidia.com&gt;
Reviewed-by: Simon Horman &lt;simon.horman@corigine.com&gt;
Link: https://lore.kernel.org/r/eace1f9d96545ab8a2775db857cb7e291a9b166b.1679398549.git.petrm@nvidia.com
Signed-off-by: Paolo Abeni &lt;pabeni@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 07:44:01 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=07b0883e1f09416d07d25a2158f8cd35b732b686">arm64: dts: qcom: sc8280xp-x13s: mark bob regulator as always-on</a></td><td>Johan Hovold</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The bob supply is used by several pmic regulators and components which
are not (yet fully) described in the devicetree.

Mark the regulator as always-on for now.

Fixes: f29077d86652 ("arm64: dts: qcom: sc8280xp-x13s: Add soundcard support")
Cc: Srinivas Kandagatla &lt;srinivas.kandagatla@linaro.org&gt;
Signed-off-by: Johan Hovold &lt;johan+linaro@kernel.org&gt;
Signed-off-by: Bjorn Andersson &lt;andersson@kernel.org&gt;
Link: https://lore.kernel.org/r/20230322113318.17908-5-johan+linaro@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 07:44:01 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=291e6b6cd7145108d45aeffbac4bb1348fece6b6">arm64: dts: qcom: sc8280xp-x13s: mark s12b regulator as always-on</a></td><td>Johan Hovold</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The s12b supply is used by several pmic regulators as well as the
wlan/bluetooth radio which are not yet fully described in the
devicetree.

Mark the regulator as always-on for now.

Fixes: f29077d86652 ("arm64: dts: qcom: sc8280xp-x13s: Add soundcard support")
Cc: Srinivas Kandagatla &lt;srinivas.kandagatla@linaro.org&gt;
Signed-off-by: Johan Hovold &lt;johan+linaro@kernel.org&gt;
Signed-off-by: Bjorn Andersson &lt;andersson@kernel.org&gt;
Link: https://lore.kernel.org/r/20230322113318.17908-4-johan+linaro@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 07:44:01 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f4472fd33e4751c54efb13d2536261e9273770a9">arm64: dts: qcom: sc8280xp-x13s: mark s10b regulator as always-on</a></td><td>Johan Hovold</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The s10b supply is used by several components that are not (yet)
described in devicetree (e.g. ram, charger, ec) and must not be
disabled.

Mark the regulator as always-on.

Fixes: f29077d86652 ("arm64: dts: qcom: sc8280xp-x13s: Add soundcard support")
Cc: Srinivas Kandagatla &lt;srinivas.kandagatla@linaro.org&gt;
Signed-off-by: Johan Hovold &lt;johan+linaro@kernel.org&gt;
Signed-off-by: Bjorn Andersson &lt;andersson@kernel.org&gt;
Link: https://lore.kernel.org/r/20230322113318.17908-3-johan+linaro@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 07:44:01 -0700">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b8838e653034425cd26983c7d96535e2742a6212">arm64: dts: qcom: sc8280xp-x13s: mark s11b regulator as always-on</a></td><td>Johan Hovold</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The s11b supply is used by the wlan module (as well as some of the
pmics) which are not yet fully described in the devicetree.

Mark the regulator as always-on for now.

Fixes: 123b30a75623 ("arm64: dts: qcom: sc8280xp-x13s: enable WiFi controller")
Cc: stable@vger.kernel.org	# 6.2
Signed-off-by: Johan Hovold &lt;johan+linaro@kernel.org&gt;
Signed-off-by: Bjorn Andersson &lt;andersson@kernel.org&gt;
Link: https://lore.kernel.org/r/20230322113318.17908-2-johan+linaro@kernel.org


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:23:03 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=acd0acb802b90f88d19ad4337183e44fd0f77c50">platform/surface: aggregator: Add missing fwnode_handle_put()</a></td><td>Liang He</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
In fwnode_for_each_child_node(), we should add
fwnode_handle_put() when break out of the iteration
fwnode_for_each_child_node() as it will automatically
increase and decrease the refcounter.

Fixes: fc622b3d36e6 ("platform/surface: Set up Surface Aggregator device registry")
Signed-off-by: Liang He &lt;windhl@126.com&gt;
Reviewed-by: Maximilian Luz &lt;luzmaximilian@gmail.com&gt;
Link: https://lore.kernel.org/r/20230322033057.1855741-1-windhl@126.com
Reviewed-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:48 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8a02d70679fc1c434401863333c8ea7dbf201494">platform/x86: think-lmi: Add possible_values for ThinkStation</a></td><td>Mark Pearson</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+20</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
ThinkStation platforms don't support the API to return possible_values
but instead embed it in the settings string.

Try and extract this information and set the possible_values attribute
appropriately.

Fixes: a40cd7ef22fb ("platform/x86: think-lmi: Add WMI interface support on Lenovo platforms")
Signed-off-by: Mark Pearson &lt;mpearson-lenovo@squebb.ca&gt;
Link: https://lore.kernel.org/r/20230320003221.561750-4-mpearson-lenovo@squebb.ca
Reviewed-by: Thomas Weißschuh &lt;linux@weissschuh.net&gt;
Reviewed-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:39 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cf337f27f3bfc4aeab4954c468239fd6233c7638">platform/x86: think-lmi: only display possible_values if available</a></td><td>Mark Pearson</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+13</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Some attributes don't have any values available. In those cases don't
make the possible_values entry visible.

Fixes: a40cd7ef22fb ("platform/x86: think-lmi: Add WMI interface support on Lenovo platforms")
Signed-off-by: Mark Pearson &lt;mpearson-lenovo@squebb.ca&gt;
Link: https://lore.kernel.org/r/20230320003221.561750-3-mpearson-lenovo@squebb.ca
Reviewed-by: Thomas Weißschuh &lt;linux@weissschuh.net&gt;
Reviewed-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=22c52fa5155a2f48aedb0f675903b20457285a27">ACPI: processor: thermal: Update CPU cooling devices on cpufreq policy changes</a></td><td>Rafael J. Wysocki</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When a cpufreq policy appears or goes away, the CPU cooling devices for
the CPUs covered by that policy need to be updated so that the new
processor_get_max_state() value is stored as max_state and the
statistics in sysfs are rearranged for each of them.

Do that accordingly in acpi_thermal_cpufreq_init() and
acpi_thermal_cpufreq_exit().

Fixes: a365105c685c("thermal: sysfs: Reuse cdev-&gt;max_state")
Reported-by: Wang, Quanxian &lt;quanxian.wang@intel.com&gt;
Link: https://lore.kernel.org/linux-pm/53ec1f06f61c984100868926f282647e57ecfb2d.camel@intel.com
Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;
Tested-by: Zhang Rui &lt;rui.zhang@intel.com&gt;
Reviewed-by: Zhang Rui &lt;rui.zhang@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=790930f44289c8209c57461b2db499fcc702e0b3">thermal: core: Introduce thermal_cooling_device_update()</a></td><td>Rafael J. Wysocki</td><td>4</td><td><span class="deletions">-10</span>/<span class="insertions">+150</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Introduce a core thermal API function, thermal_cooling_device_update(),
for updating the max_state value for a cooling device and rearranging
its statistics in sysfs after a possible change of its -&gt;get_max_state()
callback return value.

That callback is now invoked only once, during cooling device
registration, to populate the max_state field in the cooling device
object, so if its return value changes, it needs to be invoked again
and the new return value needs to be stored as max_state.  Moreover,
the statistics presented in sysfs need to be rearranged in general,
because there may not be enough room in them to store data for all
of the possible states (in the case when max_state grows).

The new function takes care of that (and some other minor things
related to it), but some extra locking and lockdep annotations are
added in several places too to protect against crashes in the cases
when the statistics are not present or when a stale max_state value
might be used by sysfs attributes.

Note that the actual user of the new function will be added separately.

Link: https://lore.kernel.org/linux-pm/53ec1f06f61c984100868926f282647e57ecfb2d.camel@intel.com/
Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;
Tested-by: Zhang Rui &lt;rui.zhang@intel.com&gt;
Reviewed-by: Zhang Rui &lt;rui.zhang@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c43198af05cffa5de8d4f356c40ce4bdca066272">thermal: core: Introduce thermal_cooling_device_present()</a></td><td>Rafael J. Wysocki</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+15</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Introduce a helper function, thermal_cooling_device_present(), for
checking if the given cooling device is in the list of registered
cooling devices to avoid some code duplication in a subsequent
patch.

No expected functional impact.

Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;
Tested-by: Zhang Rui &lt;rui.zhang@intel.com&gt;
Reviewed-by: Zhang Rui &lt;rui.zhang@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c0e0421a60bf468e88cf569fbd727346b138ed04">ACPI: processor: Reorder acpi_processor_driver_init()</a></td><td>Rafael J. Wysocki</td><td>1</td><td><span class="deletions">-6</span>/<span class="insertions">+6</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The cpufreq policy notifier in the ACPI processor driver may as
well be registered before the driver itself, which causes
acpi_processor_cpufreq_init to be true (unless the notifier
registration fails, which is unlikely at that point) when the
ACPI CPU thermal cooling devices are registered, so the
processor_get_max_state() result does not change while
acpi_processor_driver_init() is running.

Change the ordering in acpi_processor_driver_init() accordingly
to prevent the max_state value from remaining 0 permanently for all
ACPI CPU cooling devices due to setting acpi_processor_cpufreq_init
too late.  [Note that processor_get_max_state() may still return
different values at different times after this change, depending on
the cpufreq driver registration time, but that issue needs to be
addressed separately.]

Fixes: a365105c685c("thermal: sysfs: Reuse cdev-&gt;max_state")
Reported-by: Wang, Quanxian &lt;quanxian.wang@intel.com&gt;
Link: https://lore.kernel.org/linux-pm/53ec1f06f61c984100868926f282647e57ecfb2d.camel@intel.com
Signed-off-by: Rafael J. Wysocki &lt;rafael.j.wysocki@intel.com&gt;
Tested-by: Zhang Rui &lt;rui.zhang@intel.com&gt;
Reviewed-by: Zhang Rui &lt;rui.zhang@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:36 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=45e21289bfc6e257885514790a8a8887da822d40">platform/x86: think-lmi: use correct possible_values delimiters</a></td><td>Mark Pearson</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+8</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
firmware-attributes class requires that possible values are delimited
using ';' but the Lenovo firmware uses ',' instead.
Parse string and replace where appropriate.

Suggested-by: Thomas Weißschuh &lt;linux@weissschuh.net&gt;
Fixes: a40cd7ef22fb ("platform/x86: think-lmi: Add WMI interface support on Lenovo platforms")
Signed-off-by: Mark Pearson &lt;mpearson-lenovo@squebb.ca&gt;
Link: https://lore.kernel.org/r/20230320003221.561750-2-mpearson-lenovo@squebb.ca
Reviewed-by: Thomas Weißschuh &lt;linux@weissschuh.net&gt;
Reviewed-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 15:20:20 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=583329dcf22e568a328a944f20427ccfc95dce01">platform/x86: think-lmi: add missing type attribute</a></td><td>Mark Pearson</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+17</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
This driver was missing the mandatory type attribute...oops.

Add it in along with logic to determine whether the attribute is an
enumeration type or a string by parsing the possible_values attribute.

Upstream bug https://bugzilla.kernel.org/show_bug.cgi?id=216460

Fixes: a40cd7ef22fb ("platform/x86: think-lmi: Add WMI interface support on Lenovo platforms")
Signed-off-by: Mark Pearson &lt;mpearson-lenovo@squebb.ca&gt;
Link: https://lore.kernel.org/r/20230320003221.561750-1-mpearson-lenovo@squebb.ca
Reviewed-by: Thomas Weißschuh &lt;linux@weissschuh.net&gt;
Reviewed-by: Hans de Goede &lt;hdegoede@redhat.com&gt;
Signed-off-by: Hans de Goede &lt;hdegoede@redhat.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 22:21:43 +0900">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=caa0708a81d6a2217c942959ef40d515ec1d3108">bootconfig: Change message if no bootconfig with CONFIG_BOOT_CONFIG_FORCE=y</a></td><td>Masami Hiramatsu (Google)</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Change no bootconfig data error message if user do not specify 'bootconfig'
option but CONFIG_BOOT_CONFIG_FORCE=y.
With CONFIG_BOOT_CONFIG_FORCE=y, the kernel proceeds bootconfig check even
if user does not specify 'bootconfig' option. So the current error message
is confusing. Let's show just an information message to notice skipping
the bootconfig in that case.

Link: https://lore.kernel.org/all/167754610254.318944.16848412476667893329.stgit@devnote2/

Fixes: b743852ccc1d ("Allow forcing unconditional bootconfig processing")
Reported-by: Geert Uytterhoeven &lt;geert@linux-m68k.org&gt;
Link: https://lore.kernel.org/all/CAMuHMdV9jJvE2y8gY5V_CxidUikCf5515QMZHzTA3rRGEOj6=w@mail.gmail.com/
Suggested-by: Paul E. McKenney &lt;paulmck@kernel.org&gt;
Signed-off-by: Masami Hiramatsu (Google) &lt;mhiramat@kernel.org&gt;
Tested-by: Paul E. McKenney &lt;paulmck@kernel.org&gt;
Acked-by: Mukesh Ojha &lt;quic_mojha@quicinc.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 13:46:46 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f355f70145744518ca1d9799b42f4a8da9aa0d36">wifi: mac80211: fix mesh path discovery based on unicast packets</a></td><td>Felix Fietkau</td><td>1</td><td><span class="deletions">-11</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
If a packet has reached its intended destination, it was bumped to the code
that accepts it, without first checking if a mesh_path needs to be created
based on the discovered source.
Fix this by moving the destination address check further down.

Cc: stable@vger.kernel.org
Fixes: 986e43b19ae9 ("wifi: mac80211: fix receiving A-MSDU frames on mesh interfaces")
Signed-off-by: Felix Fietkau &lt;nbd@nbd.name&gt;
Link: https://lore.kernel.org/r/20230314095956.62085-3-nbd@nbd.name
Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 13:46:38 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4e348c6c6e23491ae6eb5e077848a42d0562339c">wifi: mac80211: fix qos on mesh interfaces</a></td><td>Felix Fietkau</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When ieee80211_select_queue is called for mesh, the sta pointer is usually
NULL, since the nexthop is looked up much later in the tx path.
Explicitly check for unicast address in that case in order to make qos work
again.

Cc: stable@vger.kernel.org
Fixes: 50e2ab392919 ("wifi: mac80211: fix queue selection for mesh/OCB interfaces")
Signed-off-by: Felix Fietkau &lt;nbd@nbd.name&gt;
Link: https://lore.kernel.org/r/20230314095956.62085-1-nbd@nbd.name
Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 13:14:24 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=923bf981eb6ecc027227716e30701bdcc1845fbf">wifi: iwlwifi: mvm: protect TXQ list manipulation</a></td><td>Johannes Berg</td><td>4</td><td><span class="deletions">-34</span>/<span class="insertions">+39</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Some recent upstream debugging uncovered the fact that in
iwlwifi, the TXQ list manipulation is racy.

Introduce a new state bit for when the TXQ is completely
ready and can be used without locking, and if that's not
set yet acquire the lock to check everything correctly.

Reviewed-by: Benjamin Berg &lt;benjamin.berg@intel.com&gt;
Tested-by: Jose Ignacio Tornos Martinez &lt;jtornosm@redhat.com&gt;
Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 13:14:18 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b58e3d4311b54b6dd0e37165277965da0c9eb21d">wifi: iwlwifi: mvm: fix mvmtxq-&gt;stopped handling</a></td><td>Johannes Berg</td><td>4</td><td><span class="deletions">-5</span>/<span class="insertions">+13</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
This could race if the queue is redirected while full, then
the flushing internally would start it while it's not yet
usable again. Fix it by using two state bits instead of just
one.

Reviewed-by: Benjamin Berg &lt;benjamin.berg@intel.com&gt;
Tested-by: Jose Ignacio Tornos Martinez &lt;jtornosm@redhat.com&gt;
Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 12:11:43 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=66a1c22b709178e7b823d44465d0c2e5ed7492fb">mm/slab: Fix undefined init_cache_node_node() for NUMA and !SMP</a></td><td>Geert Uytterhoeven</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
sh/migor_defconfig:

    mm/slab.c: In function ‘slab_memory_callback’:
    mm/slab.c:1127:23: error: implicit declaration of function ‘init_cache_node_node’; did you mean ‘drain_cache_node_node’? [-Werror=implicit-function-declaration]
     1127 |                 ret = init_cache_node_node(nid);
	  |                       ^~~~~~~~~~~~~~~~~~~~
	  |                       drain_cache_node_node

The #ifdef condition protecting the definition of init_cache_node_node()
no longer matches the conditions protecting the (multiple) users.

Fix this by syncing the conditions.

Fixes: 76af6a054da40553 ("mm/migrate: add CPU hotplug to demotion #ifdef")
Reported-by: Randy Dunlap &lt;rdunlap@infradead.org&gt;
Link: https://lore.kernel.org/r/b5bdea22-ed2f-3187-6efe-0c72330270a4@infradead.org
Signed-off-by: Geert Uytterhoeven &lt;geert+renesas@glider.be&gt;
Reviewed-by: John Paul Adrian Glaubitz &lt;glaubitz@physik.fu-berlin.de&gt;
Acked-by: Randy Dunlap &lt;rdunlap@infradead.org&gt;
Cc: &lt;stable@vger.kernel.org&gt;
Signed-off-by: Vlastimil Babka &lt;vbabka@suse.cz&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 09:19:56 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aa01c67de5926fdb276793180564f172c55fb0d7">nvme-tcp: fix nvme_tcp_term_pdu to match spec</a></td><td>Caleb Sander</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The FEI field of C2HTermReq/H2CTermReq is 4 bytes but not 4-byte-aligned
in the NVMe/TCP specification (it is located at offset 10 in the PDU).
Split it into two 16-bit integers in struct nvme_tcp_term_pdu
so no padding is inserted. There should also be 10 reserved bytes after.
There are currently no users of this type.

Fixes: fc221d05447aa6db ("nvme-tcp: Add protocol header")
Reported-by: Geert Uytterhoeven &lt;geert@linux-m68k.org&gt;
Signed-off-by: Caleb Sander &lt;csander@purestorage.com&gt;
Reviewed-by: Sagi Grimberg &lt;sagi@grimberg.me&gt;
Signed-off-by: Christoph Hellwig &lt;hch@lst.de&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-22 09:17:52 +0100">11 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=def84ab600b71ea3fcc422a876d5d0d0daa7d4f3">nvme: send Identify with CNS 06h only to I/O controllers</a></td><td>Martin George</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Identify CNS 06h (I/O Command Set Specific Identify Controller data
structure) is supported only on i/o controllers.

But nvme_init_non_mdts_limits() currently invokes this on all
controllers.  Correct this by ensuring this is sent to I/O
controllers only.

Signed-off-by: Martin George &lt;marting@netapp.com&gt;
Signed-off-by: Christoph Hellwig &lt;hch@lst.de&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:29:34 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4107b8746d93ace135b8c4da4f19bbae81db785f">net/sonic: use dma_mapping_error() for error check</a></td><td>Zhang Changzhong</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The DMA address returned by dma_map_single() should be checked with
dma_mapping_error(). Fix it accordingly.

Fixes: efcce839360f ("[PATCH] macsonic/jazzsonic network drivers update")
Signed-off-by: Zhang Changzhong &lt;zhangchangzhong@huawei.com&gt;
Tested-by: Stan Johnson &lt;userm57@yahoo.com&gt;
Signed-off-by: Finn Thain &lt;fthain@linux-m68k.org&gt;
Reviewed-by: Leon Romanovsky &lt;leonro@nvidia.com&gt;
Link: https://lore.kernel.org/r/6645a4b5c1e364312103f48b7b36783b94e197a2.1679370343.git.fthain@linux-m68k.org
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:28:08 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=82463d9dbb5b90a64eb186afda47d703716d02a9">Merge branch 'fix-trainwreck-with-ocelot-switch-statistics-counters'</a></td><td>Jakub Kicinski</td><td>1</td><td><span class="deletions">-4</span>/<span class="insertions">+7</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Vladimir Oltean says:

====================
Fix trainwreck with Ocelot switch statistics counters

While testing the patch set for preemptible traffic classes with some
controlled traffic and measuring counter deltas:
https://lore.kernel.org/netdev/20230220122343.1156614-1-vladimir.oltean@nxp.com/

I noticed that in the output of "ethtool -S swp0 --groups eth-mac
eth-phy eth-ctrl rmon -- --src emac | grep -v ': 0'", the TX counters
were off. Quickly I realized that their values were permutated by 1
compared to their names, and that for example
tx-rmon-etherStatsPkts64to64Octets was incrementing when
tx-rmon-etherStatsPkts65to127Octets should have.

Initially I suspected something having to do with the bulk reading
logic, and indeed I found a bug there (fixed as 1/3), but that was not
the source of the problems. Instead it revealed other problems.

While dumping the regions created by the driver on my switch, I figured
out that it sees a discontinuity which shouldn't have existed between
reg 0x278 and reg 0x280.

Discontinuity between last reg 0x0 and new reg 0x0, creating new region
Discontinuity between last reg 0x108 and new reg 0x200, creating new region
Discontinuity between last reg 0x278 and new reg 0x280, creating new region
Discontinuity between last reg 0x2b0 and new reg 0x400, creating new region
region of 67 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 31 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 13 contiguous counters starting with SYS:STAT:CNT[0x0a0]
region of 18 contiguous counters starting with SYS:STAT:CNT[0x100]

That is where TX_MM_HOLD should have been, and that was the bug, since
it was missing. After adding it, the regions look like this and the
off-by-one issue is resolved:

Discontinuity between last reg 0x000000 and new reg 0x000000, creating new region
Discontinuity between last reg 0x000108 and new reg 0x000200, creating new region
Discontinuity between last reg 0x0002b0 and new reg 0x000400, creating new region
region of 67 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 45 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 18 contiguous counters starting with SYS:STAT:CNT[0x100]

However, as I am thinking out loud, it should have not reported the
other counters as off by one even when skipping TX_MM_HOLD... after all,
on Ocelot/Seville, there are more counters which need to be skipped.

Which is when I investigated and noticed the bug solved in 2/3.
I've validated that both on native VSC9959 (which uses
ocelot_mm_stats_layout) as well as by faking the other switches by
making VSC9959 use the plain ocelot_stats_layout.

To summarize: on all Ocelot switches, the TX counters and drop counters
are completely broken. The RX counters are mostly fine.

With this occasion, I have collected more cleanup patches in this area,
which I'm going to submit after the net -&gt; net-next merge.
====================

Link: https://lore.kernel.org/r/20230321010325.897817-1-vladimir.oltean@nxp.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:28:07 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5291099e0f61a4a1f4d2e11ac2af8123ece17e0e">net: mscc: ocelot: add TX_MM_HOLD to ocelot_mm_stats_layout</a></td><td>Vladimir Oltean</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The lack of a definition for this counter is what initially prompted me
to investigate a problem which really manifested itself as the previous
change, "net: mscc: ocelot: fix transfer from region-&gt;buf to ocelot-&gt;stats".

When TX_MM_HOLD is defined in enum ocelot_stat but not in struct
ocelot_stat_layout ocelot_mm_stats_layout, this creates a hole, which
due to the aforementioned bug, makes all counters following TX_MM_HOLD
be recorded off by one compared to their correct position. So for
example, a non-zero TX_PMAC_OCTETS would be reported as TX_MERGE_FRAGMENTS,
TX_PMAC_UNICAST would be reported as TX_PMAC_OCTETS, TX_PMAC_64 would be
reported as TX_PMAC_PAUSE, etc etc. This is because the size of the hole
(1) is much smaller than the size of the region, so the phenomenon where
the stats are off-by-one, rather than lost, prevails.

However, the phenomenon where stats are lost can be seen too, for
example with DROP_LOCAL, which is at the beginning of its own region
(offset 0x000400 vs the previous 0x0002b0 constitutes a discontinuity).
This is also reported as off by one and saved to TX_PMAC_1527_MAX, but
that counter is not reported to the unstructured "ethtool -S", as
opposed to DROP_LOCAL which is (as "drop_local").

Fixes: ab3f97a9610a ("net: mscc: ocelot: export ethtool MAC Merge stats for Felix VSC9959")
Signed-off-by: Vladimir Oltean &lt;vladimir.oltean@nxp.com&gt;
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:27:51 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=17dfd210459837b453c2a3c20406ee12082f151c">net: mscc: ocelot: fix transfer from region-&gt;buf to ocelot-&gt;stats</a></td><td>Vladimir Oltean</td><td>1</td><td><span class="deletions">-3</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
To understand the problem, we need some definitions.

The driver is aware of multiple counters (enum ocelot_stat), yet not all
switches supported by the driver implement all counters. There are 2
statistics layouts: ocelot_stats_layout and ocelot_mm_stats_layout, the
latter having 36 counters more than the former.

ocelot-&gt;stats[] is not a compact array, i.e. there are elements within
it which are not going to be populated for ocelot_stats_layout. On the
other hand, ocelot-&gt;stats[] is easily indexable, for example "tx_octets"
for port 3 can be found at ocelot-&gt;stats[3 * OCELOT_NUM_STATS +
OCELOT_STAT_TX_OCTETS], and that is why we keep it sparse.

Regions, as created by ocelot_prepare_stats_regions(), are compact
(every element from region-&gt;buf will correspond to a counter that is
present in this switch's layout) but are not easily indexable.

Let's define holes as the ranges of values of enum ocelot_stat for which
ocelot_stats_layout doesn't have a "reg" defined. For example, there is
a hole between OCELOT_STAT_RX_GREEN_PRIO_7 and OCELOT_STAT_TX_OCTETS
which is of 23 elements that are only present on ocelot_mm_stats_layout,
and as such, they are also present in enum ocelot_stat. Let's define the
left extremity of the hole - the last enum ocelot_stat still defined -
as A (in this case OCELOT_STAT_RX_GREEN_PRIO_7) and the right extremity -
the first enum ocelot_stat that is defined after a series of undefined
ones - as B (in this case OCELOT_STAT_TX_OCTETS).

There is a bug in the procedure which transfers stats from region-&gt;buf[]
to ocelot-&gt;stats[].

For each hole in the ocelot_stats_layout, the logic transfers the stats
starting with enum ocelot_stat B to ocelot-&gt;stats[] index A + 1. So all
stats after a hole are saved to a position which is off by B - A + 1
elements.

This causes 2 kinds of issues:
(a) counters which shouldn't increment increment
(b) counters which should increment don't

Holes in the ocelot_stat_layout automatically imply the end of a region
and the beginning of a new one; however the reverse is not necessarily
true. For example, for ocelot_mm_stat_layout, there could be multiple
regions (which indicate discontinuities in register addresses) while
there is no hole (which indicates discontinuities in enum ocelot_stat
values).

In the example above, the stats from the second region-&gt;buf[] are not
transferred to ocelot-&gt;stats starting with index
"port * OCELOT_NUM_STATS + OCELOT_STAT_TX_OCTETS" as they should, but
rather, starting with element
"port * OCELOT_NUM_STATS + OCELOT_STAT_RX_GREEN_PRIO_7 + 1".

That stats[] array element is not reported to user space for switches
that use ocelot_stat_layout, and that is how issue (b) occurs.

However, if the length of the second region is larger than the hole,
then some stats will start to be transferred to the ocelot-&gt;stats[]
indices which *are* reported to user space, but those indices contain
wrong values (corresponding to unexpected counters). This is how issue
(a) occurs.

The procedure, as it was introduced in commit d87b1c08f38a ("net: mscc:
ocelot: use bulk reads for stats"), was not buggy, because there were no
holes in the struct ocelot_stat_layout instances at that time. The
problem is that when those holes were introduced, the function was not
updated to take them into consideration.

To update the procedure, we need to know, for each region, which enum
ocelot_stat corresponds to its region-&gt;base. We have no way of deducing
that based on the contents of struct ocelot_stats_region, so we need to
add this information.

Fixes: ab3f97a9610a ("net: mscc: ocelot: export ethtool MAC Merge stats for Felix VSC9959")
Signed-off-by: Vladimir Oltean &lt;vladimir.oltean@nxp.com&gt;
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:27:10 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6acc72a43eac78a309160d0a7512bbc59bcdd757">net: mscc: ocelot: fix stats region batching</a></td><td>Vladimir Oltean</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+2</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The blamed commit changed struct ocelot_stat_layout :: "u32 offset" to
"u32 reg".

However, "u32 reg" is not quite a register address, but an enum
ocelot_reg, which in itself encodes an enum ocelot_target target in the
upper bits, and an index into the ocelot-&gt;map[target][] array in the
lower bits.

So, whereas the previous code comparison between stats_layout[i].offset
and last + 1 was correct (because those "offsets" at the time were
32-bit relative addresses), the new code, comparing layout[i].reg to
last + 4 is not correct, because the "reg" here is an enum/index, not an
actual register address.

What we want to compare are indeed register addresses, but to do that,
we need to actually go through the same motions as
__ocelot_bulk_read_ix() itself.

With this bug, all statistics counters are deemed by
ocelot_prepare_stats_regions() as constituting their own region.
(Truncated) log on VSC9959 (Felix) below (prints added by me):

Before:

region of 1 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x001]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x002]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x041]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x042]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x081]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x0ac]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x100]
region of 1 contiguous counters starting with SYS:STAT:CNT[0x101]
...
region of 1 contiguous counters starting with SYS:STAT:CNT[0x111]

After:

region of 67 contiguous counters starting with SYS:STAT:CNT[0x000]
region of 45 contiguous counters starting with SYS:STAT:CNT[0x080]
region of 18 contiguous counters starting with SYS:STAT:CNT[0x100]

Since commit d87b1c08f38a ("net: mscc: ocelot: use bulk reads for
stats") intended bulking as a performance improvement, and since now,
with trivial-sized regions, performance is even worse than without
bulking at all, this could easily qualify as a performance regression.

Fixes: d4c367650704 ("net: mscc: ocelot: keep ocelot_stat_layout by reg address, not offset")
Signed-off-by: Vladimir Oltean &lt;vladimir.oltean@nxp.com&gt;
Acked-by: Colin Foster &lt;colin.foster@in-advantage.com&gt;
Tested-by: Colin Foster &lt;colin.foster@in-advantage.com&gt;
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 21:16:26 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8e50ed774554f93d55426039b27b1e38d7fa64d8">erspan: do not use skb_mac_header() in ndo_start_xmit()</a></td><td>Eric Dumazet</td><td>2</td><td><span class="deletions">-4</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Drivers should not assume skb_mac_header(skb) == skb-&gt;data in their
ndo_start_xmit().

Use skb_network_offset() and skb_transport_offset() which
better describe what is needed in erspan_fb_xmit() and
ip6erspan_tunnel_xmit()

syzbot reported:
WARNING: CPU: 0 PID: 5083 at include/linux/skbuff.h:2873 skb_mac_header include/linux/skbuff.h:2873 [inline]
WARNING: CPU: 0 PID: 5083 at include/linux/skbuff.h:2873 ip6erspan_tunnel_xmit+0x1d9c/0x2d90 net/ipv6/ip6_gre.c:962
Modules linked in:
CPU: 0 PID: 5083 Comm: syz-executor406 Not tainted 6.3.0-rc2-syzkaller-00866-gd4671cb96fa3 #0
Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 03/02/2023
RIP: 0010:skb_mac_header include/linux/skbuff.h:2873 [inline]
RIP: 0010:ip6erspan_tunnel_xmit+0x1d9c/0x2d90 net/ipv6/ip6_gre.c:962
Code: 04 02 41 01 de 84 c0 74 08 3c 03 0f 8e 1c 0a 00 00 45 89 b4 24 c8 00 00 00 c6 85 77 fe ff ff 01 e9 33 e7 ff ff e8 b4 27 a1 f8 &lt;0f&gt; 0b e9 b6 e7 ff ff e8 a8 27 a1 f8 49 8d bf f0 0c 00 00 48 b8 00
RSP: 0018:ffffc90003b2f830 EFLAGS: 00010293
RAX: 0000000000000000 RBX: 000000000000ffff RCX: 0000000000000000
RDX: ffff888021273a80 RSI: ffffffff88e1bd4c RDI: 0000000000000003
RBP: ffffc90003b2f9d8 R08: 0000000000000003 R09: 000000000000ffff
R10: 000000000000ffff R11: 0000000000000000 R12: ffff88802b28da00
R13: 00000000000000d0 R14: ffff88807e25b6d0 R15: ffff888023408000
FS: 0000555556a61300(0000) GS:ffff8880b9800000(0000) knlGS:0000000000000000
CS: 0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 000055e5b11eb6e8 CR3: 0000000027c1b000 CR4: 00000000003506f0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
Call Trace:
&lt;TASK&gt;
__netdev_start_xmit include/linux/netdevice.h:4900 [inline]
netdev_start_xmit include/linux/netdevice.h:4914 [inline]
__dev_direct_xmit+0x504/0x730 net/core/dev.c:4300
dev_direct_xmit include/linux/netdevice.h:3088 [inline]
packet_xmit+0x20a/0x390 net/packet/af_packet.c:285
packet_snd net/packet/af_packet.c:3075 [inline]
packet_sendmsg+0x31a0/0x5150 net/packet/af_packet.c:3107
sock_sendmsg_nosec net/socket.c:724 [inline]
sock_sendmsg+0xde/0x190 net/socket.c:747
__sys_sendto+0x23a/0x340 net/socket.c:2142
__do_sys_sendto net/socket.c:2154 [inline]
__se_sys_sendto net/socket.c:2150 [inline]
__x64_sys_sendto+0xe1/0x1b0 net/socket.c:2150
do_syscall_x64 arch/x86/entry/common.c:50 [inline]
do_syscall_64+0x39/0xb0 arch/x86/entry/common.c:80
entry_SYSCALL_64_after_hwframe+0x63/0xcd
RIP: 0033:0x7f123aaa1039
Code: 28 00 00 00 75 05 48 83 c4 28 c3 e8 b1 14 00 00 90 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 &lt;48&gt; 3d 01 f0 ff ff 73 01 c3 48 c7 c1 c0 ff ff ff f7 d8 64 89 01 48
RSP: 002b:00007ffc15d12058 EFLAGS: 00000246 ORIG_RAX: 000000000000002c
RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007f123aaa1039
RDX: 0000000000000000 RSI: 0000000000000000 RDI: 0000000000000003
RBP: 0000000000000000 R08: 0000000020000040 R09: 0000000000000014
R10: 0000000000000000 R11: 0000000000000246 R12: 00007f123aa648c0
R13: 431bde82d7b634db R14: 0000000000000000 R15: 0000000000000000

Fixes: 1baf5ebf8954 ("erspan: auto detect truncated packets.")
Reported-by: syzbot &lt;syzkaller@googlegroups.com&gt;
Signed-off-by: Eric Dumazet &lt;edumazet@google.com&gt;
Reviewed-by: Simon Horman &lt;simon.horman@corigine.com&gt;
Link: https://lore.kernel.org/r/20230320163427.8096-1-edumazet@google.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 20:19:28 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4fe3c88552a3fbe1944426a4506a18cdeb457b5a">atm: idt77252: fix kmemleak when rmmod idt77252</a></td><td>Li Zetao</td><td>1</td><td><span class="deletions">-0</span>/<span class="insertions">+11</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
There are memory leaks reported by kmemleak:

  unreferenced object 0xffff888106500800 (size 128):
    comm "modprobe", pid 1017, jiffies 4297787785 (age 67.152s)
    hex dump (first 32 bytes):
      00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
      00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
    backtrace:
      [&lt;00000000970ce626&gt;] __kmem_cache_alloc_node+0x20c/0x380
      [&lt;00000000fb5f78d9&gt;] kmalloc_trace+0x2f/0xb0
      [&lt;000000000e947e2a&gt;] idt77252_init_one+0x2847/0x3c90 [idt77252]
      [&lt;000000006efb048e&gt;] local_pci_probe+0xeb/0x1a0
    ...

  unreferenced object 0xffff888106500b00 (size 128):
    comm "modprobe", pid 1017, jiffies 4297787785 (age 67.152s)
    hex dump (first 32 bytes):
      00 20 3d 01 80 88 ff ff 00 20 3d 01 80 88 ff ff  . =...... =.....
      f0 23 3d 01 80 88 ff ff 00 20 3d 01 00 00 00 00  .#=...... =.....
    backtrace:
      [&lt;00000000970ce626&gt;] __kmem_cache_alloc_node+0x20c/0x380
      [&lt;00000000fb5f78d9&gt;] kmalloc_trace+0x2f/0xb0
      [&lt;00000000f451c5be&gt;] alloc_scq.constprop.0+0x4a/0x400 [idt77252]
      [&lt;00000000e6313849&gt;] idt77252_init_one+0x28cf/0x3c90 [idt77252]

The root cause is traced to the vc_maps which alloced in open_card_oam()
are not freed in close_card_oam(). The vc_maps are used to record
open connections, so when close a vc_map in close_card_oam(), the memory
should be freed. Moreover, the ubr0 is not closed when close a idt77252
device, leading to the memory leak of vc_map and scq_info.

Fix them by adding kfree in close_card_oam() and implementing new
close_card_ubr0() to close ubr0.

Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Li Zetao &lt;lizetao1@huawei.com&gt;
Reviewed-by: Francois Romieu &lt;romieu@fr.zoreil.com&gt;
Link: https://lore.kernel.org/r/20230320143318.2644630-1-lizetao1@huawei.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 19:14:55 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=968b66ffeb7956acc72836a7797aeb7b2444ec51">hwmon (it87): Fix voltage scaling for chips with 10.9mV  ADCs</a></td><td>Frank Crawford</td><td>1</td><td><span class="deletions">-1</span>/<span class="insertions">+3</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Fix voltage scaling for chips that have 10.9mV ADCs, where scaling was
not performed.

Fixes: ead8080351c9 ("hwmon: (it87) Add support for IT8732F")
Signed-off-by: Frank Crawford &lt;frank@crawford.emu.id.au&gt;
Link: https://lore.kernel.org/r/20230318080543.1226700-2-frank@crawford.emu.id.au
[groeck: Update subject and description to focus on bug fix]
Signed-off-by: Guenter Roeck &lt;linux@roeck-us.net&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 17:29:13 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=032a954061afd4b7426c3eb6bfd2952ef1e9a384">net: dsa: tag_brcm: legacy: fix daisy-chained switches</a></td><td>Álvaro Fernández Rojas</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+8</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
When BCM63xx internal switches are connected to switches with a 4-byte
Broadcom tag, it does not identify the packet as VLAN tagged, so it adds one
based on its PVID (which is likely 0).
Right now, the packet is received by the BCM63xx internal switch and the 6-byte
tag is properly processed. The next step would to decode the corresponding
4-byte tag. However, the internal switch adds an invalid VLAN tag after the
6-byte tag and the 4-byte tag handling fails.
In order to fix this we need to remove the invalid VLAN tag after the 6-byte
tag before passing it to the 4-byte tag decoding.

Fixes: 964dbf186eaa ("net: dsa: tag_brcm: add support for legacy tags")
Signed-off-by: Álvaro Fernández Rojas &lt;noltari@gmail.com&gt;
Reviewed-by: Michal Swiatkowski &lt;michal.swiatkowski@linux.intel.com&gt;
Reviewed-by: Florian Fainelli &lt;f.fainelli@gmail.com&gt;
Link: https://lore.kernel.org/r/20230319095540.239064-1-noltari@gmail.com
Signed-off-by: Jakub Kicinski &lt;kuba@kernel.org&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 15:55:19 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9a801afd3eb95e1a89aba17321062df06fb49d98">riscv: mm: Fix incorrect ASID argument when flushing TLB</a></td><td>Dylan Jhong</td><td>3</td><td><span class="deletions">-2</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Currently, we pass the CONTEXTID instead of the ASID to the TLB flush
function. We should only take the ASID field to prevent from touching
the reserved bit field.

Fixes: 3f1e782998cd ("riscv: add ASID-based tlbflushing methods")
Signed-off-by: Dylan Jhong &lt;dylan@andestech.com&gt;
Reviewed-by: Sergey Matyukevich &lt;sergey.matyukevich@syntacore.com&gt;
Link: https://lore.kernel.org/r/20230313034906.2401730-1-dylan@andestech.com
Cc: stable@vger.kernel.org
Signed-off-by: Palmer Dabbelt &lt;palmer@rivosinc.com&gt;


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 15:46:39 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a1effab7a3a35a837dd9d2b974a1bc4939df1ad5">Merge tag 'vfio-v6.3-rc4' of https://github.com/awilliam/linux-vfio</a></td><td>Linus Torvalds</td><td>1</td><td><span class="deletions">-10</span>/<span class="insertions">+4</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
Pull VFIO fix from Alex Williamson:

 - Fix dirty size reporting for pre-copy in mlx5 variant driver (Yishai
   Hadas)

* tag 'vfio-v6.3-rc4' of https://github.com/awilliam/linux-vfio:
  vfio/mlx5: Fix the report of dirty_bytes upon pre-copy


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 14:48:38 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a2eaf246f5732519f3dcc34e18fd41909e226284">Merge tag 'nfsd-6.3-3' of ↵</a></td><td>Linus Torvalds</td><td>3</td><td><span class="deletions">-3</span>/<span class="insertions">+10</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux

Pull nfsd fixes from Chuck Lever:

 - Fix a crash during NFS READs from certain client implementations

 - Address a minor kbuild regression in v6.3

* tag 'nfsd-6.3-3' of git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux:
  nfsd: don't replace page in rq_pages if it's a continuation of last page
  NFS &amp; NFSD: Update GSS dependencies


</td></tr>
<tr class="logheader"><td><span class="age-days" title="2023-03-21 14:06:32 -0700">12 days</span></td><td class="logsubject"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=640fcdbcf27fc62de9223f958ceb4e897a00e791">net/mlx5: E-Switch, Fix an Oops in error handling code</a></td><td>Dan Carpenter</td><td>1</td><td><span class="deletions">-2</span>/<span class="insertions">+1</span></td></tr>
<tr class="nohover-highlight"><td></td><td colspan="5" class="logmsg">
The error handling dereferences "vport".  There is nothing we can do if
it is an error pointer except returning the error code.

Fixes: 133dcfc577ea ("net/mlx5: E-Switch, Alloc and free unique metadata for match")
Signed-off-by: Dan Carpenter &lt;error27@gmail.com&gt;
Reviewed-by: Roi Dayan &lt;roid@nvidia.com&gt;
Signed-off-by: Saeed Mahameed &lt;saeedm@nvidia.com&gt;


</td></tr>
</tbody></table><ul class="pager"><li><a href="https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/log/?ofs=200&amp;showmsg=1">[next]</a></li></ul></div> <!-- class=content -->
<div class="footer">generated by <a href="https://git.zx2c4.com/cgit/about/">cgit </a> (<a href="https://git-scm.com/">git 2.34.1</a>) at 2023-04-02 17:29:42 +0000</div>
</div> <!-- id=cgit -->


</body></html>
------MultipartBoundary--2Ng0UIrejWON2hK2bTTeGrk0kOyFYgbVPrXihQP3nh----
Content-Type: text/css
Content-Transfer-Encoding: binary
Content-Location: https://git.kernel.org/cgit-data/cgit.css

@charset "utf-8";

div#cgit { margin: 0em; font-family: sans-serif; font-size: 10pt; color: rgb(51, 51, 51); background: white; padding: 4px; }

div#cgit a { color: blue; text-decoration: none; }

div#cgit a:hover { text-decoration: underline; }

div#cgit table { border-collapse: collapse; }

div#cgit table#header { width: 100%; margin-bottom: 1em; }

div#cgit table#header td.logo { width: 96px; vertical-align: top; }

div#cgit table#header td.main { font-size: 250%; padding-left: 10px; white-space: nowrap; }

div#cgit table#header td.main a { color: rgb(0, 0, 0); }

div#cgit table#header td.form { text-align: right; vertical-align: bottom; padding-right: 1em; padding-bottom: 2px; white-space: nowrap; }

div#cgit table#header td.form form, div#cgit table#header td.form input, div#cgit table#header td.form select { font-size: 90%; }

div#cgit table#header td.sub { color: rgb(119, 119, 119); border-top: 1px solid rgb(204, 204, 204); padding-left: 10px; }

div#cgit table.tabs { border-bottom: 3px solid rgb(204, 204, 204); border-collapse: collapse; margin-top: 2em; margin-bottom: 0px; width: 100%; }

div#cgit table.tabs td { padding: 0px 1em; vertical-align: bottom; }

div#cgit table.tabs td a { padding: 2px 0.75em; color: rgb(119, 119, 119); font-size: 110%; }

div#cgit table.tabs td a.active { color: rgb(0, 0, 0); background-color: rgb(204, 204, 204); }

div#cgit table.tabs a[href^="http://"]::after, div#cgit table.tabs a[href^="https://"]::after { content: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgAhcJDQY+gm2TAAAAHWlUWHRDb21tZW50AAAAAABDcmVhdGVkIHdpdGggR0lNUGQuZQcAAABbSURBVAhbY2BABs4MU4CwhYHBh2Erww4wrGFQZHjI8B8IgUIscJWyDHcggltQhI4zGDCcRwhChPggHIggP1QoAVmQkSETrGoHsiAEsACtBYN0oDAMbgU6EBcAAL2eHUt4XUU4AAAAAElFTkSuQmCC"); opacity: 0.5; margin: 0px 0px 0px 5px; }

div#cgit table.tabs td.form { text-align: right; }

div#cgit table.tabs td.form form { padding-bottom: 2px; font-size: 90%; white-space: nowrap; }

div#cgit table.tabs td.form input, div#cgit table.tabs td.form select { font-size: 90%; }

div#cgit div.path { margin: 0px; padding: 5px 2em 2px; color: rgb(0, 0, 0); background-color: rgb(238, 238, 238); }

div#cgit div.content { margin: 0px; padding: 2em; border-bottom: 3px solid rgb(204, 204, 204); }

div#cgit table.list { width: 100%; border: none; border-collapse: collapse; }

div#cgit table.list tr { background: white; }

div#cgit table.list tr.logheader { background: rgb(238, 238, 238); }

div#cgit table.list tr:nth-child(2n) { background: rgb(247, 247, 247); }

div#cgit table.list tr:nth-child(2n+1) { background: white; }

div#cgit table.list tr:hover { background: rgb(238, 238, 238); }

div#cgit table.list tr.nohover { background: white; }

div#cgit table.list tr.nohover:hover { background: white; }

div#cgit table.list tr.nohover-highlight:hover:nth-child(2n) { background: rgb(247, 247, 247); }

div#cgit table.list tr.nohover-highlight:hover:nth-child(2n+1) { background: white; }

div#cgit table.list th { font-weight: bold; padding: 0.1em 0.5em 0.05em; vertical-align: baseline; }

div#cgit table.list td { border: none; padding: 0.1em 0.5em; }

div#cgit table.list td.commitgraph { font-family: monospace; white-space: pre; }

div#cgit table.list td.commitgraph .column1 { color: rgb(170, 0, 0); }

div#cgit table.list td.commitgraph .column2 { color: rgb(0, 170, 0); }

div#cgit table.list td.commitgraph .column3 { color: rgb(170, 170, 0); }

div#cgit table.list td.commitgraph .column4 { color: rgb(0, 0, 170); }

div#cgit table.list td.commitgraph .column5 { color: rgb(170, 0, 170); }

div#cgit table.list td.commitgraph .column6 { color: rgb(0, 170, 170); }

div#cgit table.list td.logsubject { font-family: monospace; font-weight: bold; }

div#cgit table.list td.logmsg { font-family: monospace; white-space: pre; padding: 0px 0.5em; }

div#cgit table.list td a { color: black; }

div#cgit table.list td a.ls-dir { font-weight: bold; color: rgb(0, 0, 255); }

div#cgit table.list td a:hover { color: rgb(0, 0, 255); }

div#cgit img { border: none; }

div#cgit input#switch-btn { margin: 2px 0px 0px; }

div#cgit td#sidebar input.txt { width: 100%; margin: 2px 0px 0px; }

div#cgit table#grid { margin: 0px; }

div#cgit td#content { vertical-align: top; padding: 1em 2em 1em 1em; border: none; }

div#cgit div#summary { vertical-align: top; margin-bottom: 1em; }

div#cgit table#downloads { float: right; border-collapse: collapse; border: 1px solid rgb(119, 119, 119); margin-left: 0.5em; margin-bottom: 0.5em; }

div#cgit table#downloads th { background-color: rgb(204, 204, 204); }

div#cgit div#blob { border: 1px solid black; }

div#cgit div.error { color: red; font-weight: bold; margin: 1em 2em; }

div#cgit a.ls-blob, div#cgit a.ls-dir, div#cgit .ls-mod { font-family: monospace; }

div#cgit td.ls-size { text-align: right; font-family: monospace; width: 10em; }

div#cgit td.ls-mode { font-family: monospace; width: 10em; }

div#cgit table.blob { margin-top: 0.5em; border-top: 1px solid black; }

div#cgit table.blob td.hashes, div#cgit table.blob td.lines { margin: 0px; padding: 0px 0px 0px 0.5em; vertical-align: top; color: black; }

div#cgit table.blob td.linenumbers { margin: 0px; padding: 0px 0.5em; vertical-align: top; text-align: right; border-right: 1px solid gray; }

div#cgit table.blob pre { padding: 0px; margin: 0px; }

div#cgit table.blob td.linenumbers a, div#cgit table.ssdiff td.lineno a { color: gray; text-align: right; text-decoration: none; }

div#cgit table.blob td.linenumbers a:hover, div#cgit table.ssdiff td.lineno a:hover { color: black; }

div#cgit table.blame td.hashes, div#cgit table.blame td.lines, div#cgit table.blame td.linenumbers { padding: 0px; }

div#cgit table.blame td.hashes div.alt, div#cgit table.blame td.lines div.alt { padding: 0px 0.5em; }

div#cgit table.blame td.linenumbers div.alt { padding: 0px 0.5em 0px 0px; }

div#cgit table.blame div.alt:nth-child(2n) { background: rgb(238, 238, 238); }

div#cgit table.blame div.alt:nth-child(2n+1) { background: white; }

div#cgit table.blame td.lines > div { position: relative; }

div#cgit table.blame td.lines > div > pre { padding: 0px 0px 0px 0.5em; position: absolute; top: 0px; }

div#cgit table.bin-blob { margin-top: 0.5em; border: 1px solid black; }

div#cgit table.bin-blob th { font-family: monospace; white-space: pre; border: 1px solid rgb(119, 119, 119); padding: 0.5em 1em; }

div#cgit table.bin-blob td { font-family: monospace; white-space: pre; border-left: 1px solid rgb(119, 119, 119); padding: 0em 1em; }

div#cgit table.nowrap td { white-space: nowrap; }

div#cgit table.commit-info { border-collapse: collapse; margin-top: 1.5em; }

div#cgit div.cgit-panel { float: right; margin-top: 1.5em; }

div#cgit div.cgit-panel table { border-collapse: collapse; border: 1px solid rgb(170, 170, 170); background-color: rgb(238, 238, 238); }

div#cgit div.cgit-panel th { text-align: center; }

div#cgit div.cgit-panel td { padding: 0.25em 0.5em; }

div#cgit div.cgit-panel td.label { padding-right: 0.5em; }

div#cgit div.cgit-panel td.ctrl { padding-left: 0.5em; }

div#cgit table.commit-info th { text-align: left; font-weight: normal; padding: 0.1em 1em 0.1em 0.1em; vertical-align: top; }

div#cgit table.commit-info td { font-weight: normal; padding: 0.1em 1em 0.1em 0.1em; }

div#cgit div.commit-subject { font-weight: bold; font-size: 125%; margin: 1.5em 0em 0.5em; padding: 0em; }

div#cgit div.commit-msg { white-space: pre; font-family: monospace; }

div#cgit div.notes-header { font-weight: bold; padding-top: 1.5em; }

div#cgit div.notes { white-space: pre; font-family: monospace; border: 1px solid rgb(238, 238, 153); background-color: rgb(255, 255, 221); padding: 0.3em 2em 0.3em 1em; float: left; }

div#cgit div.notes-footer { clear: left; }

div#cgit div.diffstat-header { font-weight: bold; padding-top: 1.5em; }

div#cgit table.diffstat { border-collapse: collapse; border: 1px solid rgb(170, 170, 170); background-color: rgb(238, 238, 238); }

div#cgit table.diffstat th { font-weight: normal; text-align: left; text-decoration: underline; padding: 0.1em 1em 0.1em 0.1em; font-size: 100%; }

div#cgit table.diffstat td { padding: 0.2em 0.2em 0.1em 0.1em; font-size: 100%; border: none; }

div#cgit table.diffstat td.mode { white-space: nowrap; }

div#cgit table.diffstat td span.modechange { padding-left: 1em; color: red; }

div#cgit table.diffstat td.add a { color: green; }

div#cgit table.diffstat td.del a { color: red; }

div#cgit table.diffstat td.upd a { color: blue; }

div#cgit table.diffstat td.graph { width: 500px; vertical-align: middle; }

div#cgit table.diffstat td.graph table { border: none; }

div#cgit table.diffstat td.graph td { padding: 0px; border: 0px; height: 7pt; }

div#cgit table.diffstat td.graph td.add { background-color: rgb(85, 204, 85); }

div#cgit table.diffstat td.graph td.rem { background-color: rgb(204, 85, 85); }

div#cgit div.diffstat-summary { color: rgb(136, 136, 136); padding-top: 0.5em; }

div#cgit table.diff { width: 100%; }

div#cgit table.diff td { font-family: monospace; white-space: pre; }

div#cgit table.diff td div.head { font-weight: bold; margin-top: 1em; color: black; }

div#cgit table.diff td div.hunk { color: rgb(0, 0, 153); }

div#cgit table.diff td div.add { color: green; }

div#cgit table.diff td div.del { color: red; }

div#cgit .sha1 { font-family: monospace; font-size: 90%; }

div#cgit .left { text-align: left; }

div#cgit .right { text-align: right; }

div#cgit table.list td.reposection { font-style: italic; color: rgb(136, 136, 136); }

div#cgit a.button { font-size: 80%; padding: 0em 0.5em; }

div#cgit a.primary { font-size: 100%; }

div#cgit a.secondary { font-size: 90%; }

div#cgit td.toplevel-repo { }

div#cgit table.list td.sublevel-repo { padding-left: 1.5em; }

div#cgit ul.pager { list-style-type: none; text-align: center; margin: 1em 0em 0em; padding: 0px; }

div#cgit ul.pager li { display: inline-block; margin: 0.25em 0.5em; }

div#cgit ul.pager a { color: rgb(119, 119, 119); }

div#cgit ul.pager .current { font-weight: bold; }

div#cgit span.age-mins { font-weight: bold; color: rgb(0, 136, 0); }

div#cgit span.age-hours { color: rgb(0, 136, 0); }

div#cgit span.age-days { color: rgb(0, 68, 0); }

div#cgit span.age-weeks { color: rgb(68, 68, 68); }

div#cgit span.age-months { color: rgb(136, 136, 136); }

div#cgit span.age-years { color: rgb(187, 187, 187); }

div#cgit span.insertions { color: rgb(0, 136, 0); }

div#cgit span.deletions { color: rgb(136, 0, 0); }

div#cgit div.footer { margin-top: 0.5em; text-align: center; font-size: 80%; color: rgb(204, 204, 204); }

div#cgit div.footer a { color: rgb(204, 204, 204); text-decoration: none; }

div#cgit div.footer a:hover { text-decoration: underline; }

div#cgit a.branch-deco { color: rgb(0, 0, 0); margin: 0px 0.5em; padding: 0px 0.25em; background-color: rgb(136, 255, 136); border: 1px solid rgb(0, 119, 0); }

div#cgit a.tag-deco { color: rgb(0, 0, 0); margin: 0px 0.5em; padding: 0px 0.25em; background-color: rgb(255, 255, 136); border: 1px solid rgb(119, 119, 0); }

div#cgit a.tag-annotated-deco { color: rgb(0, 0, 0); margin: 0px 0.5em; padding: 0px 0.25em; background-color: rgb(255, 204, 136); border: 1px solid rgb(119, 119, 0); }

div#cgit a.remote-deco { color: rgb(0, 0, 0); margin: 0px 0.5em; padding: 0px 0.25em; background-color: rgb(204, 204, 255); border: 1px solid rgb(0, 0, 119); }

div#cgit a.deco { color: rgb(0, 0, 0); margin: 0px 0.5em; padding: 0px 0.25em; background-color: rgb(255, 136, 136); border: 1px solid rgb(119, 0, 0); }

div#cgit div.commit-subject a.branch-deco, div#cgit div.commit-subject a.tag-deco, div#cgit div.commit-subject a.tag-annotated-deco, div#cgit div.commit-subject a.remote-deco, div#cgit div.commit-subject a.deco { margin-left: 1em; font-size: 75%; }

div#cgit table.stats { border: 1px solid black; border-collapse: collapse; }

div#cgit table.stats th { text-align: left; padding: 1px 0.5em; background-color: rgb(238, 238, 238); border: 1px solid black; }

div#cgit table.stats td { text-align: right; padding: 1px 0.5em; border: 1px solid black; }

div#cgit table.stats td.total { font-weight: bold; text-align: left; }

div#cgit table.stats td.sum { color: rgb(204, 0, 0); font-weight: bold; }

div#cgit table.stats td.left { text-align: left; }

div#cgit table.vgraph { border-collapse: separate; border: 1px solid black; height: 200px; }

div#cgit table.vgraph th { background-color: rgb(238, 238, 238); font-weight: bold; border: 1px solid white; padding: 1px 0.5em; }

div#cgit table.vgraph td { vertical-align: bottom; padding: 0px 10px; }

div#cgit table.vgraph div.bar { background-color: rgb(238, 238, 238); }

div#cgit table.hgraph { border: 1px solid black; width: 800px; }

div#cgit table.hgraph th { background-color: rgb(238, 238, 238); font-weight: bold; border: 1px solid black; padding: 1px 0.5em; }

div#cgit table.hgraph td { vertical-align: middle; padding: 2px; }

div#cgit table.hgraph div.bar { background-color: rgb(238, 238, 238); height: 1em; }

div#cgit table.ssdiff { width: 100%; }

div#cgit table.ssdiff td { font-size: 75%; font-family: monospace; white-space: pre; padding: 1px 4px; border-left: 1px solid rgb(170, 170, 170); border-right: 1px solid rgb(170, 170, 170); }

div#cgit table.ssdiff td.add { color: black; background: rgb(204, 255, 204); min-width: 50%; }

div#cgit table.ssdiff td.add_dark { color: black; background: rgb(170, 204, 170); min-width: 50%; }

div#cgit table.ssdiff span.add { background: rgb(204, 255, 204); font-weight: bold; }

div#cgit table.ssdiff td.del { color: black; background: rgb(255, 204, 204); min-width: 50%; }

div#cgit table.ssdiff td.del_dark { color: black; background: rgb(204, 170, 170); min-width: 50%; }

div#cgit table.ssdiff span.del { background: rgb(255, 204, 204); font-weight: bold; }

div#cgit table.ssdiff td.changed { color: black; background: rgb(255, 255, 204); min-width: 50%; }

div#cgit table.ssdiff td.changed_dark { color: black; background: rgb(204, 204, 170); min-width: 50%; }

div#cgit table.ssdiff td.lineno { color: black; background: rgb(238, 238, 238); text-align: right; width: 3em; min-width: 3em; }

div#cgit table.ssdiff td.hunk { color: black; background: rgb(204, 204, 255); border-top: 1px solid rgb(170, 170, 170); border-bottom: 1px solid rgb(170, 170, 170); }

div#cgit table.ssdiff td.head { border-top: 1px solid rgb(170, 170, 170); border-bottom: 1px solid rgb(170, 170, 170); }

div#cgit table.ssdiff td.head div.head { font-weight: bold; color: black; }

div#cgit table.ssdiff td.foot { border-top: 1px solid rgb(170, 170, 170); border-left: none; border-right: none; border-bottom: none; }

div#cgit table.ssdiff td.space { border: none; }

div#cgit table.ssdiff td.space div { min-height: 3em; }

div#cgit span.libravatar img.onhover { display: none; border: 1px solid gray; padding: 0px; border-radius: 4px; width: 128px; height: 128px; }

div#cgit span.libravatar img.inline { border-radius: 3px; width: 13px; height: 13px; margin-right: 0.2em; opacity: 0.4; }

div#cgit span.libravatar:hover > img.onhover { display: block; position: absolute; margin-left: 1.5em; background-color: rgb(238, 238, 238); box-shadow: rgb(187, 187, 187) 5px 5px 3px; }

#lfcollabprojects-header, #lfcollabprojects-footer { font-family: Helvetica, Arial, "Lucida Grande", sans-serif; font-size: 11px; line-height: 16px; font-weight: 300; color: rgb(255, 255, 255); background: -webkit-gradient(linear, 100% 0%, 0% 0%, from(rgb(64, 64, 66)), color-stop(0.69, rgb(59, 57, 59))) rgb(64, 64, 66); margin-left: 0px; }

#lfcollabprojects-header a, #lfcollabprojects-footer a { color: rgb(255, 255, 255) !important; text-decoration: underline !important; }

#lfcollabprojects-header a:hover, #lfcollabprojects-footer a:hover { color: rgb(0, 145, 68); text-decoration: none; }

#lfcollabprojects-header .gray-diagonal, #lfcollabprojects-footer .gray-diagonal { min-height: 30px; background: url("/cgit-data/di_dark_gray.png") transparent; width: 100%; }

#lfcollabprojects-header .header-inner, #lfcollabprojects-footer .footer-inner { margin: 0px auto; position: relative; }

#lfcollabprojects-footer .footer-inner { padding: 16px 0px; }

#lfcollabprojects-footer .footer-inner p { margin: 0px; }

#lfcollabprojects-footer { padding-left: 10px; }

#lfcollabprojects-logo { margin-top: 10px; height: 14px; background: url("/cgit-data/lfcollabprojects_logo_gray.png") 10px center no-repeat transparent; width: 100%; max-width: 400px; float: left; text-indent: -9000px; }

body, html { margin: 0px; padding: 0px; }
------MultipartBoundary--2Ng0UIrejWON2hK2bTTeGrk0kOyFYgbVPrXihQP3nh----
Content-Type: image/png
Content-Transfer-Encoding: binary
Content-Location: https://git.kernel.org/cgit-data/cgit.png

PNG

   IHDR   `   F   3m   bKGD      	pHYs    
	   tIME"2s~  IDATxypUu?-I^o@dRQTZ,[QDh.m1Q@QFJG4[6//߽{!HrnUrsWeYfX.`!-_`شiǎpN{{; Ǐ'77I&y(y;St21uTy'Z \.h"9,,OHLL7l0@P3fM(b5rnƌrcc@l4L6qAק1zhN'N>3pwb۹뮻.xFRa4q1N޽{IOOdѢE{#.JEXX TUUpAדE2e
Vz4776ׯ/|l#>>^l(ݶZrCCàxAc⋋rJjjjx<ݶcڵ>\?p)..i@<x O $yZZ׽DQ$!!ЂAy>..k>񐞞yG{lGb P$''p8fҤIDGGwт̙3C!2|̙39s搟ߣGzjCs9^駟fȑt:*++Yr%W]uZڧz)S(QVp<y2*
IBvPPPp^{M>x\]]-755v]>|jYf'Nt:e%\.]7l Z6&(((ΆnܸQY$Y$wIv.ss8ĉ{^}@$&&bXIMMe֬Y#GtM||illd̙XV͛
{cߗ&Ngdee1c{@U3lFBQ_yv؁fԩ|8N 233{/tA477c/NN:66cǢP8hƍ9v|4yN TTTEff&O˅@eh
hnp~NGXXr={ pmuw0(4 22RY>sb
ΖpG#hvz6ӧwdS  6z! rrgZ*&ޅo%_X!p'|QF!2=O?]gr HOOɓz_HIz8`d@v?FT.(:'1:ٙ3g}@{{;fY?)+בsT׃Tvz"Ծd'~?-߁+m2pȘ ɤwqu<o$gϽj` %zʰC?4HH@`w(JdPfR  ktm6@dd$^XB0d)e5
*# 	lEoR^{ߛ7o 22-Gぐ]T|i6V3'xi)ҥ0~|r}p;ӹ;v(|d @}+pdf-\[  A_EUG&^/x9r$&LO?nrؾ};s ^|{wVCm].6?U|kagjblmmEg&%%M6m ʖB$=2GVsm-ATH~SO^ ^/47#hz?{ɤ͛7hPTL>R6mDII	C#G `6ILNJ߸~|Q܌a 鄦z(-qd>I~?{ŋ+:t'Vill,/˖-wzXuu5#Fի;v,͜:u
YlR 7@CTTD<L,$	_LY4IVsqF94ܢb!))(n7ewG\hqqrnf#::SER4i˖-AXgtRdgg+6qz9qEEETUUֆ$IFQQQXVV+6*zg%*{eԩCC^xe-BNNFCZZ>VKkk+(3F"##!&&٬gO<;~a7 ղˢ4lvϟ?p@7%I*Z[[e^hb^G8;}j{r+[/^dAWXjbeYi1!bZx߿׶۶m[oeƌWYO>`6--ua4C|kKz^"̚5Om#""'&&ʊwƲbl6c6y1cKQ8tj| FxxwOg\5: |wl߾]y#Fի϶G/	 ٲe˕XfM'vqwAꫯVʦ}pUU!|DmDaYYL<{Yf 0) JHHH믩߽ݻ;%ߔj`%~IQ1S[[]v-/u%w§zu$&ix!hnΝ;7+0yd222Ye<{C[e$Itt:q\\. $%%a4do~Ye[sr~YFF%>:sz*sinnf
 T*ZZZΝK]wQfEWd<~zeNJdYpt/QFaZ7ٷoyyy( e%M}&z+
ϧo#e\z}QQQL&DQD956q jkk$4(vu0j(͛GAAA`qqn%;ڝ|w}c搓!gS8>M@qqq6bX,h4YNlll^GcXzرLe\ Oll,̙3ddd< `"u'Z^B:0Fu~vDQDEx<܌w]e$''_v+N7d	SS|N"TJDQDբhiitFBBB'liib$ Cɓ'ɹ<4Tc$z6Xh4Q8Y)~BEZ[[q8N&L 5׫hNwZPYYIvvv_@Le1͊	eHN\Fb(:ieˀ< R/[![Eey<f3YYY5L~%xEA$	IE@waW ?RE״ЋJoKJBrQl/##2Zd2a0p_@kkD.) 88JK{l^YAJV%66W	+)N$Gy9st:f2Aǂ\ *7Gi);wmiA||)?:FQqd}ɣrTn[RUj5 H9~;~Si:{`*BzqPs'g.`0DOVSWzqgFF۩SJrṆ'LT*T*Uuw ;W?R܏JuԄC	Pp!VJ~dr~[xըjFF3m,	$.pP_1K"h4l6boI+WZŕ"Ҁ}۽g> e>Ejh`X.h:t?HJ5;y<[	2Eg֥n`CI[nwtv`HH2~<N Ih<x)pת*O 46R`?,w>w|q7@?QQAݮ]8ΞExT*4efsuhK\qFf    IENDB`
------MultipartBoundary--2Ng0UIrejWON2hK2bTTeGrk0kOyFYgbVPrXihQP3nh------
